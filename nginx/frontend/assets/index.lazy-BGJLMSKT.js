const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-GqBVQ6Dm.js","assets/html-DG1TtFnM.js","assets/javascript-DNgb01dh.js","assets/css-u4bm_LMz.js","assets/angular-ts-MKs4dlu_.js","assets/scss-BfMQ58X7.js","assets/apl-C6GBNg32.js","assets/xml-BOQ9RtXF.js","assets/java-BN40hmum.js","assets/json-DWmkr0yC.js","assets/astro-DTSlZd1t.js","assets/typescript-CVESyXxo.js","assets/postcss-DmF4-xLG.js","assets/blade-CPEzV-UE.js","assets/sql-D8nBeWSR.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cairo-BM1Freo3.js","assets/python-CK56Z9cH.js","assets/cobol-NX_YbRMJ.js","assets/coffee-CXcjgkhu.js","assets/cpp-IRqjNdQP.js","assets/regexp-DoiKbUTj.js","assets/glsl-bwZ1_LLM.js","assets/c-BhsLqr-4.js","assets/crystal-DFEzbmK1.js","assets/shellscript-HNM5thJl.js","assets/edge-Cq_6DOij.js","assets/html-derivative-CDVwFiY1.js","assets/elixir-BoNJ9vXU.js","assets/elm-CTr_twwF.js","assets/erb-BgreK6rt.js","assets/ruby-DsC6krmi.js","assets/haml-B1jT_oKV.js","assets/graphql-DqgCZ2sd.js","assets/jsx-CM4fc1WH.js","assets/tsx-DqpEK-75.js","assets/lua-B2--UKVN.js","assets/yaml-CIiI48o2.js","assets/fortran-fixed-form-C9lV_GL-.js","assets/fortran-free-form-B3Z_eaxm.js","assets/fsharp-Vw5t3P44.js","assets/markdown-CNXuF1yM.js","assets/gdresource-NFcQ0Q3Z.js","assets/gdshader-BSHf-0eb.js","assets/gdscript-BVlVXSjx.js","assets/git-commit-C0WNX4K0.js","assets/diff-Dnfm4U7b.js","assets/git-rebase-3YLVFLpI.js","assets/glimmer-js-D4fdoRWd.js","assets/glimmer-ts-DFoQQgBS.js","assets/hack-BV5LM4CS.js","assets/handlebars-HtVeTy3a.js","assets/http-CYnz8shJ.js","assets/hxml-BfFmssGd.js","assets/haxe-BgqZeg96.js","assets/imba-C6vdFTm2.js","assets/jinja-BORjBBXU.js","assets/jison-Ct8rtT8R.js","assets/julia-Czdw582_.js","assets/r-Cqv5JV-q.js","assets/latex-BpoAco4y.js","assets/tex-Dej6pUpk.js","assets/liquid-DlGqZaOj.js","assets/marko-BxSrAFJn.js","assets/less-Dk1rBueR.js","assets/mdc-DfEMzj3F.js","assets/nginx-Dw0nYz9L.js","assets/nim-NHYZZDnF.js","assets/perl-DLffUHFU.js","assets/php-D3VTUn6x.js","assets/pug-BbGfWiEl.js","assets/qml-Dhho_E4W.js","assets/razor-CDyaIOPG.js","assets/csharp-D7v6OrNy.js","assets/rst-BCmapc_q.js","assets/cmake-DbXoA79R.js","assets/sas-K_Wwm3IX.js","assets/shaderlab-CsYUIUcf.js","assets/hlsl-DkpUthgY.js","assets/shellsession-DU_2P5ZA.js","assets/soy-aWhPD8Nq.js","assets/sparql-B5YtT9lV.js","assets/turtle-C0hdQUNN.js","assets/stata-bRt97scT.js","assets/svelte-B94b8dMa.js","assets/templ-MrK5mfgg.js","assets/go-C5-9kuJc.js","assets/ts-tags-CiO5kd_m.js","assets/twig-CvAdjvFj.js","assets/vue-srE0XGv_.js","assets/vue-html-59TQSa_j.js","assets/xsl-BqG2VzO2.js"])))=>i.map(i=>d[i]);
var kp=Object.defineProperty;var jp=(t,e,n)=>e in t?kp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>jp(t,typeof e!="symbol"?e+"":e,n);import{c as yr,ay as td,r as v,bn as Dp,bo as Op,bp as Mp,j as m,bq as ki,aF as C,br as $p,bs as Vp,bt as bn,aA as nd,aB as rd,aC as sd,B as fe,y as ge,aD as id,b8 as Bp,X as jt,a1 as b,bu as Fp,bv as Hp,bw as Gp,bx as Up,E as qn,bm as zp,by as od,al as ad,S as ld,I as nr,i as ts,bz as Wp,bA as Us,bB as Ja,a8 as Kp,a9 as Xp,aa as Yp,ab as Dn,ac as On,ad as nn,ae as Mn,b7 as rn,af as zs,P as cd,a as So,ap as yt,T as qp,D as rr,d as sr,e as ir,f as or,g as Zp,K as Jp,bC as Qp,u as eg,N as ud,O as dd,R as hd,b1 as ji,U as un,L as fd,h as tg,A as ng,k as rg,l as sg,m as ig,n as og,o as ag,p as lg,q as cg,bD as Qa,a7 as ug,az as dg,bE as hg,bF as fg,aE as mg,w as pg}from"./index-CTPVv2qI.js";import{C as gg}from"./chevron-left-CWNWUXxo.js";import{P as _g,x as el,z as yg}from"./index-CagKKcNF.js";import{C as vg}from"./copy-DCTh9Qv_.js";import{w as To,s as md,f as xg,a as wg,b as bg,h as Eg,M as Sg}from"./markdown-text-CB2uSyzD.js";import{C as Tg}from"./chevron-down-B6oOayy8.js";import{C as tl}from"./clock-DWJkb9W8.js";import{C as nl}from"./circle-check-big-t4zTYrA6.js";import{T as Di}from"./textarea-sXwijNo4.js";import{F as rl}from"./file-DzXp9-3N.js";import{m as sl,M as Ag}from"./model-management-dialog-BsUM410n.js";import{u as Cg,g as il}from"./agent.service-CQ2z388P.js";import{S as ol}from"./switch-DtYmKlj_.js";import{a as Rg}from"./use-infinite-scroll-BdHXd_Cp.js";import{T as Pg}from"./tag-VD1gqTC7.js";import{S as pd}from"./square-pen-DRmb1xVr.js";import{c as We,u as Ng,a as Ig,s as $e,z as Lg,b as gd,i as yn,p as kg,d as jg,e as al}from"./index-Cmg_3NXZ.js";import{H as Dg}from"./header-DQW_dqlj.js";import"./setPrototypeOf-BNw_nwy-.js";import"./eye-off-Bvt1R7Db.js";import"./eye-CrEdTXEF.js";import"./checkbox-B8lOC6Cy.js";import"./index-DOFEKLPp.js";import"./index-pO__9giw.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=yr("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=yr("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=yr("CopyCheck",[["path",{d:"m12 15 2 2 4-4",key:"2c609p"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=yr("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=yr("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),Bg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Fg(t){return typeof t=="string"&&Bg.test(t)}const Le=[];for(let t=0;t<256;++t)Le.push((t+256).toString(16).slice(1));function Hg(t,e=0){return(Le[t[e+0]]+Le[t[e+1]]+Le[t[e+2]]+Le[t[e+3]]+"-"+Le[t[e+4]]+Le[t[e+5]]+"-"+Le[t[e+6]]+Le[t[e+7]]+"-"+Le[t[e+8]]+Le[t[e+9]]+"-"+Le[t[e+10]]+Le[t[e+11]]+Le[t[e+12]]+Le[t[e+13]]+Le[t[e+14]]+Le[t[e+15]]).toLowerCase()}let Ws;const Gg=new Uint8Array(16);function Ug(){if(!Ws){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ws=crypto.getRandomValues.bind(crypto)}return Ws(Gg)}const zg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cl={randomUUID:zg};function Wg(t,e,n){var s;t=t||{};const r=t.random??((s=t.rng)==null?void 0:s.call(t))??Ug();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Hg(r)}function _d(t,e,n){return cl.randomUUID&&!e&&!t?cl.randomUUID():Wg(t)}function Kg(t){return[...new Set(t)]}function Xg(t,e){for(let n=t.length-1;n>=0;n-=1)if(e(t[n]))return t[n]}class Oi extends Error{constructor(e){super(e.message),this.name=e.name??e.error??"StreamError"}static isStructuredError(e){return typeof e=="object"&&e!=null&&"message"in e}}function Yg(t){var c,u;const e=new Set,n={};if(t.length<=1)return{rootSequence:{type:"sequence",items:t.map(d=>({type:"node",value:d,path:[]}))},paths:[]};t.forEach(d=>{var h,p;const f=((h=d.parent_checkpoint)==null?void 0:h.checkpoint_id)??"$";n[f]??(n[f]=[]),n[f].push(d),((p=d.checkpoint)==null?void 0:p.checkpoint_id)!=null&&e.add(d.checkpoint.checkpoint_id)});const r=(...d)=>d.filter(f=>f!=null).sort((f,h)=>f.localeCompare(h)).at(-1),s=n.$==null?(c=Object.keys(n).filter(d=>!e.has(d)).map(d=>{const f=[d],h=new Set;let p=d;for(;f.length>0;){const _=f.shift();if(h.has(_))continue;h.add(_);const g=(n[_]??[]).flatMap(x=>{var y;return((y=x.checkpoint)==null?void 0:y.checkpoint_id)??[]});p=r(p,...g),f.push(...g)}return{parentId:d,lastId:p}}).sort((d,f)=>d.lastId.localeCompare(f.lastId)).at(-1))==null?void 0:c.parentId:void 0;s!=null&&(n.$=n[s]);const i={type:"sequence",items:[]},o=[{id:"$",sequence:i,path:[]}],a=[],l=new Set;for(;o.length>0;){const d=o.shift();if(l.has(d.id))continue;l.add(d.id);const f=n[d.id];if(f==null||f.length===0)continue;let h;f.length>1&&(h={type:"fork",items:[]},d.sequence.items.push(h));for(const p of f){const _=(u=p.checkpoint)==null?void 0:u.checkpoint_id;if(_==null)continue;let{sequence:g}=d,{path:x}=d;h!=null&&(g={type:"sequence",items:[]},h.items.unshift(g),x=x.slice(),x.push(_),a.push(x)),g.items.push({type:"node",value:p,path:x}),o.push({id:_,sequence:g,path:x})}}return{rootSequence:i,paths:a}}const Ks=">",ul="$";function qg(t,e,n){var c,u;const r=n.split(Ks),s={};for(const d of e){const f=d.at(-2)??ul;s[f]??(s[f]=[]),s[f].unshift(d)}const i=[],o={},a=r.slice(),l=[...t.items];for(;l.length>0;){const d=l.shift();if(d.type==="node"){i.push(d.value);const f=(c=d.value.checkpoint)==null?void 0:c.checkpoint_id;if(f==null)continue;o[f]={branch:d.path.join(Ks),branchOptions:(d.path.length>0?s[d.path.at(-2)??ul]??[]:[]).map(h=>h.join(Ks))}}if(d.type==="fork"){const f=a.shift(),h=f!=null?d.items.findIndex(_=>{var x;const g=_.items.at(0);return!g||g.type!=="node"?!1:((x=g.value.checkpoint)==null?void 0:x.checkpoint_id)===f}):-1,p=((u=d.items.at(h))==null?void 0:u.items)??[];l.push(...p)}}return{history:i,branchByCheckpoint:o}}function Zg(t,e){const{rootSequence:n,paths:r}=Yg(e??[]),{history:s,branchByCheckpoint:i}=qg(n,r,t);return{branchTree:n,flatHistory:s,branchByCheckpoint:i,threadHead:s.at(-1)}}function yd(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const n=[];let r=!1,s=!1;for(let i of t){if(r)i==='"'&&!s?r=!1:i===`
`&&!s?i="\\n":i==="\\"?s=!s:s=!1;else if(i==='"')r=!0,s=!1;else if(i==="{")n.push("}");else if(i==="[")n.push("]");else if(i==="}"||i==="]")if(n&&n[n.length-1]===i)n.pop();else return null;e+=i}r&&(e+='"');for(let i=n.length-1;i>=0;i-=1)e+=n[i];try{return JSON.parse(e)}catch{return null}}var Jg=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const Qg=td(Jg);var vd={exports:{}};const e0=/[\p{Lu}]/u,t0=/[\p{Ll}]/u,dl=/^[\p{Lu}](?![\p{Lu}])/gu,xd=/([\p{Alpha}\p{N}_]|$)/u,wd=/[_.\- ]+/,n0=new RegExp("^"+wd.source),hl=new RegExp(wd.source+xd.source,"gu"),fl=new RegExp("\\d+"+xd.source,"gu"),r0=(t,e,n)=>{let r=!1,s=!1,i=!1;for(let o=0;o<t.length;o++){const a=t[o];r&&e0.test(a)?(t=t.slice(0,o)+"-"+t.slice(o),r=!1,i=s,s=!0,o++):s&&i&&t0.test(a)?(t=t.slice(0,o-1)+"-"+t.slice(o-1),i=s,s=!1,r=!0):(r=e(a)===a&&n(a)!==a,i=s,s=n(a)===a&&e(a)!==a)}return t},s0=(t,e)=>(dl.lastIndex=0,t.replace(dl,n=>e(n))),i0=(t,e)=>(hl.lastIndex=0,fl.lastIndex=0,t.replace(hl,(n,r)=>e(r)).replace(fl,n=>e(n))),bd=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(i=>i.trim()).filter(i=>i.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),r=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=r0(t,n,r)),t=t.replace(n0,""),e.preserveConsecutiveUppercase?t=s0(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),i0(t,r))};vd.exports=bd;vd.exports.default=bd;function o0(t,e){return(e==null?void 0:e[t])||Qg(t)}function a0(t,e,n){const r={};for(const s in t)Object.hasOwn(t,s)&&(r[e(s,n)]=t[s]);return r}function ml(t){return Array.isArray(t)?[...t]:{...t}}function l0(t,e){const n=ml(t);for(const[r,s]of Object.entries(e)){const[i,...o]=r.split(".").reverse();let a=n;for(const l of o.reverse()){if(a[l]===void 0)break;a[l]=ml(a[l]),a=a[l]}a[i]!==void 0&&(a[i]={lc:1,type:"secret",id:[s]})}return n}function c0(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class Ao{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,c0(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Ao||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((s,i)=>(s[i]=i in this?this[i]:this.lc_kwargs[i],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(e,Reflect.get(s,"lc_aliases",this)),Object.assign(n,Reflect.get(s,"lc_secrets",this)),Object.assign(r,Reflect.get(s,"lc_attributes",this));return Object.keys(n).forEach(s=>{let i=this,o=r;const[a,...l]=s.split(".").reverse();for(const c of l.reverse()){if(!(c in i)||i[c]===void 0)return;(!(c in o)||o[c]===void 0)&&(typeof i[c]=="object"&&i[c]!=null?o[c]={}:Array.isArray(i[c])&&(o[c]=[])),i=i[c],o=o[c]}a in i&&i[a]!==void 0&&(o[a]=o[a]||i[a])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:a0(Object.keys(n).length?l0(r,n):r,o0,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function pl(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function vr(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.some(n=>pl(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?Co(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>pl(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function u0(t,e){function n(r,s){if(typeof r!="object"||r===null||r===void 0)return r;if(s>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(o=>n(o,s+1));const i={};for(const o of Object.keys(r))i[o]=n(r[o],s+1);return i}return JSON.stringify(n(t,0),null,2)}class Jt extends Ao{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=u0(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function ot(t,e){const n={...t};for(const[r,s]of Object.entries(e))if(n[r]==null)n[r]=s;else{if(s==null)continue;if(typeof n[r]!=typeof s||Array.isArray(n[r])!==Array.isArray(s))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;["id","name","output_version","model_provider"].includes(r)?n[r]=s:n[r]+=s}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=ot(n[r],s);else if(Array.isArray(n[r]))n[r]=Co(n[r],s);else{if(n[r]===s)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function Co(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const n=[...t];for(const r of e)if(typeof r=="object"&&r!==null&&"index"in r&&typeof r.index=="number"){const s=n.findIndex(i=>{const o=typeof i=="object",a="index"in i&&i.index===r.index,l="id"in i&&"id"in r&&(i==null?void 0:i.id)===(r==null?void 0:r.id),c=!("id"in i)||!(i!=null&&i.id)||!("id"in r)||!(r!=null&&r.id);return o&&a&&(l||c)});s!==-1&&typeof n[s]=="object"&&n[s]!==null?n[s]=ot(n[s],r):n.push(r)}else{if(typeof r=="object"&&r!==null&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}class xr extends Jt{}function d0(t){return typeof t.role=="string"}function Ed(t){return typeof(t==null?void 0:t._getType)=="function"}function h0(t){return Ed(t)&&typeof t.concat=="function"}class f0 extends Jt{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status,this.metadata=e.metadata}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function m0(t){const e=[],n=[];for(const r of t)if(r.function){const s=r.function.name;try{const i=JSON.parse(r.function.arguments),o={name:s||"",args:i||{},id:r.id};e.push(o)}catch{n.push({name:s,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class gl extends Jt{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var s;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const i=(s=r.additional_kwargs)==null?void 0:s.tool_calls,o=r.tool_calls;i!=null&&i.length>0&&(o===void 0||o.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(i!=null&&o===void 0){const[a,l]=m0(i);r.tool_calls=a??[],r.invalid_tool_calls=l??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}class Ro extends xr{constructor(e){var r,s;let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const i=e.tool_call_chunks.reduce((l,c)=>{const u=l.findIndex(([d])=>"id"in c&&c.id&&"index"in c&&c.index!==void 0?c.id===d.id&&c.index===d.index:"id"in c&&c.id?c.id===d.id:"index"in c&&c.index!==void 0?c.index===d.index:!1);return u!==-1?l[u].push(c):l.push([c]),l},[]),o=[],a=[];for(const l of i){let c={};const u=((r=l[0])==null?void 0:r.name)??"",d=l.map(p=>p.args||"").join(""),f=d.length?d:"{}",h=(s=l[0])==null?void 0:s.id;try{if(c=yd(f),!h||c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");o.push({name:u,args:c,id:h,type:"tool_call"})}catch{a.push({name:u,args:f,id:h,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:o,invalid_tool_calls:a,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,s,i,o,a,l,c,u,d,f,h,p,_,g,x,y,w,E,S,R,k,P,L,V,j,O,z,A,N,F,$,H,T,B,W,M,G,D,I,K;const n={content:vr(this.content,e.content),additional_kwargs:ot(this.additional_kwargs,e.additional_kwargs),response_metadata:ot(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Z=Co(this.tool_call_chunks,e.tool_call_chunks);Z!==void 0&&Z.length>0&&(n.tool_call_chunks=Z)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Z={...(((s=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:s.audio)!==void 0||((o=(i=e.usage_metadata)==null?void 0:i.input_token_details)==null?void 0:o.audio)!==void 0)&&{audio:(((l=(a=this.usage_metadata)==null?void 0:a.input_token_details)==null?void 0:l.audio)??0)+(((u=(c=e.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:u.audio)??0)},...(((f=(d=this.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:f.cache_read)!==void 0||((p=(h=e.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:p.cache_read)!==void 0)&&{cache_read:(((g=(_=this.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:g.cache_read)??0)+(((y=(x=e.usage_metadata)==null?void 0:x.input_token_details)==null?void 0:y.cache_read)??0)},...(((E=(w=this.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:E.cache_creation)!==void 0||((R=(S=e.usage_metadata)==null?void 0:S.input_token_details)==null?void 0:R.cache_creation)!==void 0)&&{cache_creation:(((P=(k=this.usage_metadata)==null?void 0:k.input_token_details)==null?void 0:P.cache_creation)??0)+(((V=(L=e.usage_metadata)==null?void 0:L.input_token_details)==null?void 0:V.cache_creation)??0)}},te={...(((O=(j=this.usage_metadata)==null?void 0:j.output_token_details)==null?void 0:O.audio)!==void 0||((A=(z=e.usage_metadata)==null?void 0:z.output_token_details)==null?void 0:A.audio)!==void 0)&&{audio:(((F=(N=this.usage_metadata)==null?void 0:N.output_token_details)==null?void 0:F.audio)??0)+(((H=($=e.usage_metadata)==null?void 0:$.output_token_details)==null?void 0:H.audio)??0)},...(((B=(T=this.usage_metadata)==null?void 0:T.output_token_details)==null?void 0:B.reasoning)!==void 0||((M=(W=e.usage_metadata)==null?void 0:W.output_token_details)==null?void 0:M.reasoning)!==void 0)&&{reasoning:(((D=(G=this.usage_metadata)==null?void 0:G.output_token_details)==null?void 0:D.reasoning)??0)+(((K=(I=e.usage_metadata)==null?void 0:I.output_token_details)==null?void 0:K.reasoning)??0)}},ee=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Y=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ue={input_tokens:ee.input_tokens+Y.input_tokens,output_tokens:ee.output_tokens+Y.output_tokens,total_tokens:ee.total_tokens+Y.total_tokens,...Object.keys(Z).length>0&&{input_token_details:Z},...Object.keys(te).length>0&&{output_token_details:te}};n.usage_metadata=ue}return new Ro(n)}}class Po extends Jt{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Po}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class No extends xr{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new No({content:vr(this.content,e.content),additional_kwargs:ot(this.additional_kwargs,e.additional_kwargs),response_metadata:ot(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Io extends xr{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Io({content:vr(this.content,e.content),additional_kwargs:ot(this.additional_kwargs,e.additional_kwargs),response_metadata:ot(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}let Sd=class extends Jt{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,n){super(e,n)}};class Lo extends xr{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,n){super(e,n)}concat(e){return new Lo({content:vr(this.content,e.content),additional_kwargs:ot(this.additional_kwargs,e.additional_kwargs),response_metadata:ot(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class _l extends Jt{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,n){super(e,n)}}class ko extends xr{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,n){super(e,n)}concat(e){return new ko({content:vr(this.content,e.content),additional_kwargs:ot(this.additional_kwargs,e.additional_kwargs),response_metadata:ot(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function p0(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function g0(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class Td extends Jt{constructor(e){super({...e,content:""}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=e.id}_getType(){return"remove"}get _printableFields(){return{...super._printableFields,id:this.id}}}function _0(t){return g0(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function y0(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function Xs(t){let e,n;if(y0(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:r,...s}=t;e=r,n=s}if(e==="human"||e==="user")return new Sd(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...s}=n;if(!Array.isArray(r))return new gl(n);const i=r.map(_0);return new gl({...s,tool_calls:i})}else{if(e==="system")return new _l(n);if(e==="developer")return new _l({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new f0({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new Td({...n,id:n.id});throw p0(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function v0(t){if(typeof t=="string")return new Sd(t);if(Ed(t))return t;if(Array.isArray(t)){const[e,n]=t;return Xs({type:e,content:n})}else if(d0(t)){const{role:e,...n}=t;return Xs({...n,type:e})}else return Xs(t)}function x0(t){var n;const e=t._getType();if(e==="human")return new Lo({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),new Ro({...r})}else{if(e==="system")return new ko({...t});if(e==="function")return new Io({...t});if(Po.isInstance(t))return new No({...t});throw new Error("Unknown message type.")}}var bs={exports:{}},Ad={};function at(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var w0=at;at.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};at.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};at.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};at.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};at.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};at.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};at.prototype.start=at.prototype.try;at.prototype.errors=function(){return this._errors};at.prototype.attempts=function(){return this._attempts};at.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var s=this._errors[r],i=s.message,o=(t[i]||0)+1;t[i]=o,o>=n&&(e=s,n=o)}return e};(function(t){var e=w0;t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in n)r[s]=n[s];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],o=0;o<r.retries;o++)i.push(this.createTimeout(o,r));return n&&n.forever&&!i.length&&i.push(this.createTimeout(o,r)),i.sort(function(a,l){return a-l}),i},t.createTimeout=function(n,r){var s=r.randomize?Math.random()+1:1,i=Math.round(s*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return i=Math.min(i,r.maxTimeout),i},t.wrap=function(n,r,s){if(r instanceof Array&&(s=r,r=null),!s){s=[];for(var i in n)typeof n[i]=="function"&&s.push(i)}for(var o=0;o<s.length;o++){var a=s[o],l=n[a];n[a]=(function(u){var d=t.operation(r),f=Array.prototype.slice.call(arguments,1),h=f.pop();f.push(function(p){d.retry(p)||(p&&(arguments[0]=d.mainError()),h.apply(this,arguments))}),d.attempt(function(){u.apply(n,f)})}).bind(n,l),n[a].options=r}}})(Ad);var b0=Ad;const E0=b0,S0=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class Cd extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const T0=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},A0=t=>S0.includes(t),Rd=(t,e)=>new Promise((n,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const s=E0.operation(e);s.attempt(async i=>{try{n(await t(i))}catch(o){if(!(o instanceof Error)){r(new TypeError(`Non-error was thrown: "${o}". You should only throw errors.`));return}if(o instanceof Cd)s.stop(),r(o.originalError);else if(o instanceof TypeError&&!A0(o.message))s.stop(),r(o);else{T0(o,i,e);try{await e.onFailedAttempt(o)}catch(a){r(a);return}s.retry(o)||r(s.mainError())}}})});bs.exports=Rd;bs.exports.default=Rd;bs.exports.AbortError=Cd;var C0=bs.exports;const R0=td(C0);var Pd={},Nd={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new s(u,d||l,f),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,h,p){var _=n?n+c:c;if(!this._events[_])return!1;var g=this._events[_],x=arguments.length,y,w;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,f),!0;case 5:return g.fn.call(g.context,u,d,f,h),!0;case 6:return g.fn.call(g.context,u,d,f,h,p),!0}for(w=1,y=new Array(x-1);w<x;w++)y[w-1]=arguments[w];g.fn.apply(g.context,y)}else{var E=g.length,S;for(w=0;w<E;w++)switch(g[w].once&&this.removeListener(c,g[w].fn,void 0,!0),x){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,d);break;case 4:g[w].fn.call(g[w].context,u,d,f);break;default:if(!y)for(S=1,y=new Array(x-1);S<x;S++)y[S-1]=arguments[S];g[w].fn.apply(g[w].context,y)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var _=0,g=[],x=p.length;_<x;_++)(p[_].fn!==u||f&&!p[_].once||d&&p[_].context!==d)&&g.push(p[_]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Nd);var P0=Nd.exports,Es={exports:{}},N0=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const I0=N0;class Id extends Error{constructor(e){super(e),this.name="TimeoutError"}}const Ld=(t,e,n)=>new Promise((r,s)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const i=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(l){s(l)}return}const o=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,a=n instanceof Error?n:new Id(o);typeof t.cancel=="function"&&t.cancel(),s(a)},e);I0(t.then(r,s),()=>{clearTimeout(i)})});Es.exports=Ld;Es.exports.default=Ld;Es.exports.TimeoutError=Id;var L0=Es.exports,jo={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});function k0(t,e,n){let r=0,s=t.length;for(;s>0;){const i=s/2|0;let o=r+i;n(t[o],e)<=0?(r=++o,s-=i+1):s=i}return r}Do.default=k0;Object.defineProperty(jo,"__esModule",{value:!0});const j0=Do;class D0{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const s=j0.default(this._queue,r,(i,o)=>o.priority-i.priority);this._queue.splice(s,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}jo.default=D0;Object.defineProperty(Pd,"__esModule",{value:!0});const O0=P0,kd=L0,M0=jo,Nr=()=>{},$0=new kd.TimeoutError;class V0 extends O0{constructor(e){var n,r,s,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Nr,this._resolveIdle=Nr,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:M0.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Nr,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Nr,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,s)=>{const i=async()=>{this._pendingCount++,this._intervalCount++;try{const o=this._timeout===void 0&&n.timeout===void 0?e():kd.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&s($0)});r(await o)}catch(o){s(o)}this._next()};this._queue.enqueue(i,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var Ys=Pd.default=V0,Mi={exports:{}};const B0="2.0.0",jd=256,F0=Number.MAX_SAFE_INTEGER||9007199254740991,H0=16,G0=jd-6,U0=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Ss={MAX_LENGTH:jd,MAX_SAFE_COMPONENT_LENGTH:H0,MAX_SAFE_BUILD_LENGTH:G0,MAX_SAFE_INTEGER:F0,RELEASE_TYPES:U0,SEMVER_SPEC_VERSION:B0,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},qs={};const z0=typeof process=="object"&&qs&&qs.NODE_DEBUG&&/\bsemver\b/i.test(qs.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Ts=z0;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=Ss,i=Ts;e=t.exports={};const o=e.re=[],a=e.safeRe=[],l=e.src=[],c=e.t={};let u=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",s],[d,r]],h=_=>{for(const[g,x]of f)_=_.split(`${g}*`).join(`${g}{0,${x}}`).split(`${g}+`).join(`${g}{1,${x}}`);return _},p=(_,g,x)=>{const y=h(g),w=u++;i(_,w,g),c[_]=w,l[w]=g,o[w]=new RegExp(g,x?"g":void 0),a[w]=new RegExp(y,x?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),p("FULL",`^${l[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),p("LOOSE",`^${l[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),p("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[c.COERCE],!0),p("COERCERTLFULL",l[c.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Mi,Mi.exports);var wr=Mi.exports;const W0=Object.freeze({loose:!0}),K0=Object.freeze({}),X0=t=>t?typeof t!="object"?W0:t:K0;var Oo=X0;const yl=/^[0-9]+$/,Dd=(t,e)=>{const n=yl.test(t),r=yl.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Y0=(t,e)=>Dd(e,t);var Od={compareIdentifiers:Dd,rcompareIdentifiers:Y0};const Ir=Ts,{MAX_LENGTH:vl,MAX_SAFE_INTEGER:Lr}=Ss,{safeRe:xl,t:wl}=wr,q0=Oo,{compareIdentifiers:sn}=Od;let Z0=class pt{constructor(e,n){if(n=q0(n),e instanceof pt){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>vl)throw new TypeError(`version is longer than ${vl} characters`);Ir("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?xl[wl.LOOSE]:xl[wl.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Lr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<Lr)return i}return s}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ir("SemVer.compare",this.version,this.options,e),!(e instanceof pt)){if(typeof e=="string"&&e===this.version)return 0;e=new pt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof pt||(e=new pt(e,this.options)),sn(this.major,e.major)||sn(this.minor,e.minor)||sn(this.patch,e.patch)}comparePre(e){if(e instanceof pt||(e=new pt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],s=e.prerelease[n];if(Ir("prerelease compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return sn(r,s)}while(++n)}compareBuild(e){e instanceof pt||(e=new pt(e,this.options));let n=0;do{const r=this.build[n],s=e.build[n];if(Ir("build compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return sn(r,s)}while(++n)}inc(e,n,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let i=[n,s];r===!1&&(i=[n]),sn(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var He=Z0;const bl=He,J0=(t,e,n=!1)=>{if(t instanceof bl)return t;try{return new bl(t,e)}catch(r){if(!n)return null;throw r}};var In=J0;const Q0=In,e_=(t,e)=>{const n=Q0(t,e);return n?n.version:null};var t_=e_;const n_=In,r_=(t,e)=>{const n=n_(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var s_=r_;const El=He,i_=(t,e,n,r,s)=>{typeof n=="string"&&(s=r,r=n,n=void 0);try{return new El(t instanceof El?t.version:t,n).inc(e,r,s).version}catch{return null}};var o_=i_;const Sl=In,a_=(t,e)=>{const n=Sl(t,null,!0),r=Sl(e,null,!0),s=n.compare(r);if(s===0)return null;const i=s>0,o=i?n:r,a=i?r:n,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";const u=l?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};var l_=a_;const c_=He,u_=(t,e)=>new c_(t,e).major;var d_=u_;const h_=He,f_=(t,e)=>new h_(t,e).minor;var m_=f_;const p_=He,g_=(t,e)=>new p_(t,e).patch;var __=g_;const y_=In,v_=(t,e)=>{const n=y_(t,e);return n&&n.prerelease.length?n.prerelease:null};var x_=v_;const Tl=He,w_=(t,e,n)=>new Tl(t,n).compare(new Tl(e,n));var dt=w_;const b_=dt,E_=(t,e,n)=>b_(e,t,n);var S_=E_;const T_=dt,A_=(t,e)=>T_(t,e,!0);var C_=A_;const Al=He,R_=(t,e,n)=>{const r=new Al(t,n),s=new Al(e,n);return r.compare(s)||r.compareBuild(s)};var Mo=R_;const P_=Mo,N_=(t,e)=>t.sort((n,r)=>P_(n,r,e));var I_=N_;const L_=Mo,k_=(t,e)=>t.sort((n,r)=>L_(r,n,e));var j_=k_;const D_=dt,O_=(t,e,n)=>D_(t,e,n)>0;var As=O_;const M_=dt,$_=(t,e,n)=>M_(t,e,n)<0;var $o=$_;const V_=dt,B_=(t,e,n)=>V_(t,e,n)===0;var Md=B_;const F_=dt,H_=(t,e,n)=>F_(t,e,n)!==0;var $d=H_;const G_=dt,U_=(t,e,n)=>G_(t,e,n)>=0;var Vo=U_;const z_=dt,W_=(t,e,n)=>z_(t,e,n)<=0;var Bo=W_;const K_=Md,X_=$d,Y_=As,q_=Vo,Z_=$o,J_=Bo,Q_=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return K_(t,n,r);case"!=":return X_(t,n,r);case">":return Y_(t,n,r);case">=":return q_(t,n,r);case"<":return Z_(t,n,r);case"<=":return J_(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var Vd=Q_;const ey=He,ty=In,{safeRe:kr,t:jr}=wr,ny=(t,e)=>{if(t instanceof ey)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?kr[jr.COERCEFULL]:kr[jr.COERCE]);else{const l=e.includePrerelease?kr[jr.COERCERTLFULL]:kr[jr.COERCERTL];let c;for(;(c=l.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(n===null)return null;const r=n[2],s=n[3]||"0",i=n[4]||"0",o=e.includePrerelease&&n[5]?`-${n[5]}`:"",a=e.includePrerelease&&n[6]?`+${n[6]}`:"";return ty(`${r}.${s}.${i}${o}${a}`,e)};var ry=ny;class sy{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(e,n)}return this}}var iy=sy,Zs,Cl;function ht(){if(Cl)return Zs;Cl=1;const t=/\s+/g;class e{constructor(N,F){if(F=s(F),N instanceof e)return N.loose===!!F.loose&&N.includePrerelease===!!F.includePrerelease?N:new e(N.raw,F);if(N instanceof i)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=N.trim().replace(t," "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(H=>!_(H[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&g(H[0])){this.set=[H];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const F=this.set[N];for(let $=0;$<F.length;$++)$>0&&(this.formatted+=" "),this.formatted+=F[$].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const $=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+N,H=r.get($);if(H)return H;const T=this.options.loose,B=T?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];N=N.replace(B,O(this.options.includePrerelease)),o("hyphen replace",N),N=N.replace(l[c.COMPARATORTRIM],u),o("comparator trim",N),N=N.replace(l[c.TILDETRIM],d),o("tilde trim",N),N=N.replace(l[c.CARETTRIM],f),o("caret trim",N);let W=N.split(" ").map(I=>y(I,this.options)).join(" ").split(/\s+/).map(I=>j(I,this.options));T&&(W=W.filter(I=>(o("loose invalid filter",I,this.options),!!I.match(l[c.COMPARATORLOOSE])))),o("range list",W);const M=new Map,G=W.map(I=>new i(I,this.options));for(const I of G){if(_(I))return[I];M.set(I.value,I)}M.size>1&&M.has("")&&M.delete("");const D=[...M.values()];return r.set($,D),D}intersects(N,F){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some($=>x($,F)&&N.set.some(H=>x(H,F)&&$.every(T=>H.every(B=>T.intersects(B,F)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new a(N,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(z(this.set[F],N,this.options))return!0;return!1}}Zs=e;const n=iy,r=new n,s=Oo,i=Cs(),o=Ts,a=He,{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:f}=wr,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=Ss,_=A=>A.value==="<0.0.0-0",g=A=>A.value==="",x=(A,N)=>{let F=!0;const $=A.slice();let H=$.pop();for(;F&&$.length;)F=$.every(T=>H.intersects(T,N)),H=$.pop();return F},y=(A,N)=>(o("comp",A,N),A=R(A,N),o("caret",A),A=E(A,N),o("tildes",A),A=P(A,N),o("xrange",A),A=V(A,N),o("stars",A),A),w=A=>!A||A.toLowerCase()==="x"||A==="*",E=(A,N)=>A.trim().split(/\s+/).map(F=>S(F,N)).join(" "),S=(A,N)=>{const F=N.loose?l[c.TILDELOOSE]:l[c.TILDE];return A.replace(F,($,H,T,B,W)=>{o("tilde",A,$,H,T,B,W);let M;return w(H)?M="":w(T)?M=`>=${H}.0.0 <${+H+1}.0.0-0`:w(B)?M=`>=${H}.${T}.0 <${H}.${+T+1}.0-0`:W?(o("replaceTilde pr",W),M=`>=${H}.${T}.${B}-${W} <${H}.${+T+1}.0-0`):M=`>=${H}.${T}.${B} <${H}.${+T+1}.0-0`,o("tilde return",M),M})},R=(A,N)=>A.trim().split(/\s+/).map(F=>k(F,N)).join(" "),k=(A,N)=>{o("caret",A,N);const F=N.loose?l[c.CARETLOOSE]:l[c.CARET],$=N.includePrerelease?"-0":"";return A.replace(F,(H,T,B,W,M)=>{o("caret",A,H,T,B,W,M);let G;return w(T)?G="":w(B)?G=`>=${T}.0.0${$} <${+T+1}.0.0-0`:w(W)?T==="0"?G=`>=${T}.${B}.0${$} <${T}.${+B+1}.0-0`:G=`>=${T}.${B}.0${$} <${+T+1}.0.0-0`:M?(o("replaceCaret pr",M),T==="0"?B==="0"?G=`>=${T}.${B}.${W}-${M} <${T}.${B}.${+W+1}-0`:G=`>=${T}.${B}.${W}-${M} <${T}.${+B+1}.0-0`:G=`>=${T}.${B}.${W}-${M} <${+T+1}.0.0-0`):(o("no pr"),T==="0"?B==="0"?G=`>=${T}.${B}.${W}${$} <${T}.${B}.${+W+1}-0`:G=`>=${T}.${B}.${W}${$} <${T}.${+B+1}.0-0`:G=`>=${T}.${B}.${W} <${+T+1}.0.0-0`),o("caret return",G),G})},P=(A,N)=>(o("replaceXRanges",A,N),A.split(/\s+/).map(F=>L(F,N)).join(" ")),L=(A,N)=>{A=A.trim();const F=N.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return A.replace(F,($,H,T,B,W,M)=>{o("xRange",A,$,H,T,B,W,M);const G=w(T),D=G||w(B),I=D||w(W),K=I;return H==="="&&K&&(H=""),M=N.includePrerelease?"-0":"",G?H===">"||H==="<"?$="<0.0.0-0":$="*":H&&K?(D&&(B=0),W=0,H===">"?(H=">=",D?(T=+T+1,B=0,W=0):(B=+B+1,W=0)):H==="<="&&(H="<",D?T=+T+1:B=+B+1),H==="<"&&(M="-0"),$=`${H+T}.${B}.${W}${M}`):D?$=`>=${T}.0.0${M} <${+T+1}.0.0-0`:I&&($=`>=${T}.${B}.0${M} <${T}.${+B+1}.0-0`),o("xRange return",$),$})},V=(A,N)=>(o("replaceStars",A,N),A.trim().replace(l[c.STAR],"")),j=(A,N)=>(o("replaceGTE0",A,N),A.trim().replace(l[N.includePrerelease?c.GTE0PRE:c.GTE0],"")),O=A=>(N,F,$,H,T,B,W,M,G,D,I,K)=>(w($)?F="":w(H)?F=`>=${$}.0.0${A?"-0":""}`:w(T)?F=`>=${$}.${H}.0${A?"-0":""}`:B?F=`>=${F}`:F=`>=${F}${A?"-0":""}`,w(G)?M="":w(D)?M=`<${+G+1}.0.0-0`:w(I)?M=`<${G}.${+D+1}.0-0`:K?M=`<=${G}.${D}.${I}-${K}`:A?M=`<${G}.${D}.${+I+1}-0`:M=`<=${M}`,`${F} ${M}`.trim()),z=(A,N,F)=>{for(let $=0;$<A.length;$++)if(!A[$].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(let $=0;$<A.length;$++)if(o(A[$].semver),A[$].semver!==i.ANY&&A[$].semver.prerelease.length>0){const H=A[$].semver;if(H.major===N.major&&H.minor===N.minor&&H.patch===N.patch)return!0}return!1}return!0};return Zs}var Js,Rl;function Cs(){if(Rl)return Js;Rl=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,d){if(d=n(d),u instanceof e){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const d=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],f=u.match(d);if(!f)throw new TypeError(`Invalid comparator: ${u}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return i(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||i(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||i(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}Js=e;const n=Oo,{safeRe:r,t:s}=wr,i=Vd,o=Ts,a=He,l=ht();return Js}const oy=ht(),ay=(t,e,n)=>{try{e=new oy(e,n)}catch{return!1}return e.test(t)};var Rs=ay;const ly=ht(),cy=(t,e)=>new ly(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var uy=cy;const dy=He,hy=ht(),fy=(t,e,n)=>{let r=null,s=null,i=null;try{i=new hy(e,n)}catch{return null}return t.forEach(o=>{i.test(o)&&(!r||s.compare(o)===-1)&&(r=o,s=new dy(r,n))}),r};var my=fy;const py=He,gy=ht(),_y=(t,e,n)=>{let r=null,s=null,i=null;try{i=new gy(e,n)}catch{return null}return t.forEach(o=>{i.test(o)&&(!r||s.compare(o)===1)&&(r=o,s=new py(r,n))}),r};var yy=_y;const Qs=He,vy=ht(),Pl=As,xy=(t,e)=>{t=new vy(t,e);let n=new Qs("0.0.0");if(t.test(n)||(n=new Qs("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){const s=t.set[r];let i=null;s.forEach(o=>{const a=new Qs(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Pl(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!n||Pl(n,i))&&(n=i)}return n&&t.test(n)?n:null};var wy=xy;const by=ht(),Ey=(t,e)=>{try{return new by(t,e).range||"*"}catch{return null}};var Sy=Ey;const Ty=He,Bd=Cs(),{ANY:Ay}=Bd,Cy=ht(),Ry=Rs,Nl=As,Il=$o,Py=Bo,Ny=Vo,Iy=(t,e,n,r)=>{t=new Ty(t,r),e=new Cy(e,r);let s,i,o,a,l;switch(n){case">":s=Nl,i=Py,o=Il,a=">",l=">=";break;case"<":s=Il,i=Ny,o=Nl,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ry(t,e,r))return!1;for(let c=0;c<e.set.length;++c){const u=e.set[c];let d=null,f=null;if(u.forEach(h=>{h.semver===Ay&&(h=new Bd(">=0.0.0")),d=d||h,f=f||h,s(h.semver,d.semver,r)?d=h:o(h.semver,f.semver,r)&&(f=h)}),d.operator===a||d.operator===l||(!f.operator||f.operator===a)&&i(t,f.semver))return!1;if(f.operator===l&&o(t,f.semver))return!1}return!0};var Fo=Iy;const Ly=Fo,ky=(t,e,n)=>Ly(t,e,">",n);var jy=ky;const Dy=Fo,Oy=(t,e,n)=>Dy(t,e,"<",n);var My=Oy;const Ll=ht(),$y=(t,e,n)=>(t=new Ll(t,n),e=new Ll(e,n),t.intersects(e,n));var Vy=$y;const By=Rs,Fy=dt;var Hy=(t,e,n)=>{const r=[];let s=null,i=null;const o=t.sort((u,d)=>Fy(u,d,n));for(const u of o)By(u,e,n)?(i=u,s||(s=u)):(i&&r.push([s,i]),i=null,s=null);s&&r.push([s,null]);const a=[];for(const[u,d]of r)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);const l=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e};const kl=ht(),Ho=Cs(),{ANY:ei}=Ho,$n=Rs,Go=dt,Gy=(t,e,n={})=>{if(t===e)return!0;t=new kl(t,n),e=new kl(e,n);let r=!1;e:for(const s of t.set){for(const i of e.set){const o=zy(s,i,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},Uy=[new Ho(">=0.0.0-0")],jl=[new Ho(">=0.0.0")],zy=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===ei){if(e.length===1&&e[0].semver===ei)return!0;n.includePrerelease?t=Uy:t=jl}if(e.length===1&&e[0].semver===ei){if(n.includePrerelease)return!0;e=jl}const r=new Set;let s,i;for(const h of t)h.operator===">"||h.operator===">="?s=Dl(s,h,n):h.operator==="<"||h.operator==="<="?i=Ol(i,h,n):r.add(h.semver);if(r.size>1)return null;let o;if(s&&i){if(o=Go(s.semver,i.semver,n),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const h of r){if(s&&!$n(h,String(s),n)||i&&!$n(h,String(i),n))return null;for(const p of e)if(!$n(h,String(p),n))return!1;return!0}let a,l,c,u,d=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const h of e){if(u=u||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator===">"||h.operator===">="){if(a=Dl(s,h,n),a===h&&a!==s)return!1}else if(s.operator===">="&&!$n(s.semver,String(h),n))return!1}if(i){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(l=Ol(i,h,n),l===h&&l!==i)return!1}else if(i.operator==="<="&&!$n(i.semver,String(h),n))return!1}if(!h.operator&&(i||s)&&o!==0)return!1}return!(s&&c&&!i&&o!==0||i&&u&&!s&&o!==0||f||d)},Dl=(t,e,n)=>{if(!t)return e;const r=Go(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},Ol=(t,e,n)=>{if(!t)return e;const r=Go(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var Wy=Gy;const ti=wr,Ml=Ss,Ky=He,$l=Od,Xy=In,Yy=t_,qy=s_,Zy=o_,Jy=l_,Qy=d_,ev=m_,tv=__,nv=x_,rv=dt,sv=S_,iv=C_,ov=Mo,av=I_,lv=j_,cv=As,uv=$o,dv=Md,hv=$d,fv=Vo,mv=Bo,pv=Vd,gv=ry,_v=Cs(),yv=ht(),vv=Rs,xv=uy,wv=my,bv=yy,Ev=wy,Sv=Sy,Tv=Fo,Av=jy,Cv=My,Rv=Vy,Pv=Hy,Nv=Wy;ti.re,ti.src,ti.t,Ml.SEMVER_SPEC_VERSION,Ml.RELEASE_TYPES,$l.compareIdentifiers,$l.rcompareIdentifiers;new TextEncoder;var Uo={exports:{}};Uo.exports;(function(t){const n=(i=0)=>o=>`\x1B[${38+i};5;${o}m`,r=(i=0)=>(o,a,l)=>`\x1B[${38+i};2;${o};${a};${l}m`;function s(){const i=new Map,o={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};o.color.gray=o.color.blackBright,o.bgColor.bgGray=o.bgColor.bgBlackBright,o.color.grey=o.color.blackBright,o.bgColor.bgGrey=o.bgColor.bgBlackBright;for(const[a,l]of Object.entries(o)){for(const[c,u]of Object.entries(l))o[c]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},l[c]=o[c],i.set(u[0],u[1]);Object.defineProperty(o,a,{value:l,enumerable:!1})}return Object.defineProperty(o,"codes",{value:i,enumerable:!1}),o.color.close="\x1B[39m",o.bgColor.close="\x1B[49m",o.color.ansi256=n(),o.color.ansi16m=r(),o.bgColor.ansi256=n(10),o.bgColor.ansi16m=r(10),Object.defineProperties(o,{rgbToAnsi256:{value:(a,l,c)=>a===l&&l===c?a<8?16:a>248?231:Math.round((a-8)/247*24)+232:16+36*Math.round(a/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:a=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(a.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(d=>d+d).join(""));const u=Number.parseInt(c,16);return[u>>16&255,u>>8&255,u&255]},enumerable:!1},hexToAnsi256:{value:a=>o.rgbToAnsi256(...o.hexToRgb(a)),enumerable:!1}}),o}Object.defineProperty(t,"exports",{enumerable:!0,get:s})})(Uo);Uo.exports;new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Iv(t){try{return x0(t)}catch{return null}}function Lv(t){return t.type==="remove"&&t.id!=null?new Td({...t,id:t.id}):v0(t)}class Fd{constructor(){Object.defineProperty(this,"chunks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this.chunks={}}add(e,n){var o,a;e.type.endsWith("MessageChunk")&&(e.type=e.type.slice(0,-12).toLowerCase());const r=Lv(e),s=Iv(r),{id:i}=s??r;if(!i)return console.warn("No message ID found for chunk, ignoring in state",e),null;if((o=this.chunks)[i]??(o[i]={}),this.chunks[i].metadata=n??this.chunks[i].metadata,s){const l=this.chunks[i].chunk;this.chunks[i].chunk=((a=h0(l)?l:null)==null?void 0:a.concat(s))??s}else this.chunks[i].chunk=r;return i}clear(){this.chunks={}}get(e,n){var r;return e==null||this.chunks[e]==null?null:(n!=null&&((r=this.chunks[e]).index??(r.index=n)),this.chunks[e])}}const kv=t=>{const{type:e,data:n}=t.toDict();return{...n,type:e}};class Hd{constructor(e){Object.defineProperty(this,"abortRef",{enumerable:!0,configurable:!0,writable:!0,value:new AbortController}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setState",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.state={...this.state,...n},this.notifyListeners()}}),Object.defineProperty(this,"notifyListeners",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.listeners.forEach(n=>n())}}),Object.defineProperty(this,"subscribe",{enumerable:!0,configurable:!0,writable:!0,value:n=>(this.listeners.add(n),()=>this.listeners.delete(n))}),Object.defineProperty(this,"getSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state}),Object.defineProperty(this,"setStreamValues",{enumerable:!0,configurable:!0,writable:!0,value:(n,r="stream")=>{if(typeof n=="function"){const[s,i]=this.state.values??[null,"stream"],o=n(s,i);this.setState({values:o!=null?[o,r]:null})}else{const s=n!=null?[n,r]:null;this.setState({values:s})}}}),Object.defineProperty(this,"getMutateFn",{enumerable:!0,configurable:!0,writable:!0,value:(n,r)=>s=>{const i={...r,...(this.state.values??[null,"stream"])[0]},o=typeof s=="function"?s(i):s;this.setStreamValues({...i,...o},n)}}),Object.defineProperty(this,"matchEventType",{enumerable:!0,configurable:!0,writable:!0,value:(n,r,s)=>n===r||r.startsWith(`${n}|`)}),Object.defineProperty(this,"start",{enumerable:!0,configurable:!0,writable:!0,value:async(n,r)=>{var s,i,o,a,l,c,u,d,f,h,p,_,g,x,y,w,E;if(!this.state.isLoading)try{this.setState({isLoading:!0,error:void 0}),this.abortRef=new AbortController;const S=await n(this.abortRef.signal);let R;for await(const{event:P,data:L}of S){if(P==="error"){R=new Oi(L);break}const V=P.includes("|")?P.split("|").slice(1):void 0,j=this.getMutateFn("stream",r.initialValues);if(P==="metadata"&&((i=(s=r.callbacks).onMetadataEvent)==null||i.call(s,L)),P==="events"&&((a=(o=r.callbacks).onLangChainEvent)==null||a.call(o,L)),this.matchEventType("updates",P,L)&&((c=(l=r.callbacks).onUpdateEvent)==null||c.call(l,L,{namespace:V,mutate:j})),this.matchEventType("custom",P,L)&&((d=(u=r.callbacks).onCustomEvent)==null||d.call(u,L,{namespace:V,mutate:j})),this.matchEventType("checkpoints",P,L)&&((h=(f=r.callbacks).onCheckpointEvent)==null||h.call(f,L,{namespace:V})),this.matchEventType("tasks",P,L)&&((_=(p=r.callbacks).onTaskEvent)==null||_.call(p,L,{namespace:V})),this.matchEventType("debug",P,L)&&((x=(g=r.callbacks).onDebugEvent)==null||x.call(g,L,{namespace:V})),P==="values"&&("__interrupt__"in L?this.setStreamValues(O=>({...O,...L})):this.setStreamValues(L)),this.matchEventType("messages",P,L)){const[O,z]=L,A=this.messages.add(O,z);if(!A){console.warn("Failed to add message to manager, no message ID found");continue}this.setStreamValues(N=>{const F={...r.initialValues,...N},$=r.getMessages(F).slice(),{chunk:H,index:T}=this.messages.get(A,$.length)??{};return!H||T==null?F:(H.getType()==="remove"?$.splice(T,1):$[T]=kv(H),r.setMessages(F,$))})}}if(R!=null)throw R;const k=await((y=r.onSuccess)==null?void 0:y.call(r));typeof k<"u"&&this.setStreamValues(k)}catch(S){S instanceof Error&&(S.name==="AbortError"||S.name==="TimeoutError")||(console.error(S),this.setState({error:S}),await((w=r.onError)==null?void 0:w.call(r,S)))}finally{this.setState({isLoading:!1}),this.abortRef=new AbortController,(E=r.onFinish)==null||E.call(r)}}}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:async(n,r)=>{var s;this.abortRef.abort(),this.abortRef=new AbortController,(s=r.onStop)==null||s.call(r,{mutate:this.getMutateFn("stop",n)})}}),Object.defineProperty(this,"clear",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.abortRef.abort(),this.abortRef=new AbortController,this.setState({error:void 0,values:null}),this.messages.clear()}}),this.messages=e,this.state={isLoading:!1,values:null,error:void 0}}get isLoading(){return this.state.isLoading}get values(){var e;return((e=this.state.values)==null?void 0:e[0])??null}get error(){return this.state.error}}const jv=(...t)=>fetch(...t),Dv=Symbol.for("lg:fetch_implementation"),Ov=()=>globalThis[Dv]??jv,Mv=[400,401,402,403,404,405,406,407,408,409,422];function $v(t){return t==null||typeof t!="object"?!1:"status"in t&&"statusText"in t&&"text"in t}class ar extends Error{constructor(e,n,r){super(`HTTP ${e}: ${n}`),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.status=e,this.text=n,this.response=r}static async fromResponse(e,n){try{return new ar(e.status,await e.text(),n!=null&&n.includeResponse?e:void 0)}catch{return new ar(e.status,e.statusText,n!=null&&n.includeResponse?e:void 0)}}}class Vv{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"customFetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??4,"default"in Ys?this.queue=new Ys.default({concurrency:this.maxConcurrency}):this.queue=new Ys({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook,this.customFetch=e.fetch}call(e,...n){const{onFailedResponseHook:r}=this;return this.queue.add(()=>R0(()=>e(...n).catch(async s=>{throw s instanceof Error?s:$v(s)?await ar.fromResponse(s,{includeResponse:!!r}):new Error(s)}),{async onFailedAttempt(s){if(s.message.startsWith("Cancel")||s.message.startsWith("TimeoutError")||s.message.startsWith("AbortError")||(s==null?void 0:s.code)==="ECONNABORTED")throw s;if(s instanceof ar){if(Mv.includes(s.status))throw s;r&&s.response&&await r(s.response)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((s,i)=>{var o;(o=e.signal)==null||o.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){const n=this.customFetch??Ov();return this.call(()=>n(...e).then(r=>r.ok?r:Promise.reject(r)))}}var ni={};function Bv(t){try{return typeof process<"u"?ni==null?void 0:ni[t]:void 0}catch{return}}function Fv(...t){const e=t.filter(r=>r!=null);if(e.length===0)return;if(e.length===1)return e[0];const n=new AbortController;for(const r of t){if(r!=null&&r.aborted)return n.abort(r.reason),n.signal;r==null||r.addEventListener("abort",()=>n.abort(r.reason),{once:!0})}return n.signal}const Un=13,$i=10,Hv=0,Vl=58,Gv=32,Uv=[Un,$i];function Vi(){let t=[],e=!1;return new TransformStream({start(){t=[],e=!1},transform(n,r){let s=n;if(e&&(s=Yr([[Un],s]),e=!1),s.length>0&&s.at(-1)===Un&&(e=!0,s=s.subarray(0,-1)),!s.length)return;const i=Uv.includes(s.at(-1)),o=s.length-1,{lines:a}=s.reduce((l,c,u)=>(l.from>u||((c===Un||c===$i)&&(l.lines.push(s.subarray(l.from,u)),c===Un&&s[u+1]===$i?l.from=u+2:l.from=u+1),u===o&&l.from<=o&&l.lines.push(s.subarray(l.from))),l),{lines:[],from:0});if(a.length===1&&!i){t.push(a[0]);return}t.length&&(t.push(a[0]),a[0]=Yr(t),t=[]),i||a.length&&(t=[a.pop()]);for(const l of a)r.enqueue(l)},flush(n){t.length&&n.enqueue(Yr(t))}})}function Bi(){let t="",e=[],n="",r=null;const s=new TextDecoder;return new TransformStream({transform(i,o){if(!i.length){if(!t&&!e.length&&!n&&r==null)return;const u={id:n||void 0,event:t,data:e.length?Bl(s,e):null};t="",e=[],r=null,o.enqueue(u);return}if(i[0]===Vl)return;const a=i.indexOf(Vl);if(a===-1)return;const l=s.decode(i.subarray(0,a));let c=i.subarray(a+1);if(c[0]===Gv&&(c=c.subarray(1)),l==="event")t=s.decode(c);else if(l==="data")e.push(c);else if(l==="id")c.indexOf(Hv)===-1&&(n=s.decode(c));else if(l==="retry"){const u=Number.parseInt(s.decode(c),10);Number.isNaN(u)||(r=u)}},flush(i){t&&i.enqueue({id:n||void 0,event:t,data:e.length?Bl(s,e):null})}})}function Yr(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Bl(t,e){return JSON.parse(t.decode(Yr(e)))}class En extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}async[Symbol.asyncDispose](){await this.return()}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const n=e.getReader();return new En({start(r){return s();function s(){return n.read().then(({done:i,value:o})=>{if(i){r.close();return}return r.enqueue(o),s()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new En({async pull(n){const{value:r,done:s}=await e.next();s&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function*zv(t){let e,n=!1;if(t instanceof Headers){const r=[];t.forEach((s,i)=>{r.push([i,s])}),e=r}else Array.isArray(t)?e=t:(n=!0,e=Object.entries(t??{}));for(const r of e){const s=r[0];if(typeof s!="string")throw new TypeError(`Expected header name to be a string, got ${typeof s}`);const i=Array.isArray(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(n&&!o&&(o=!0,yield[s,null]),yield[s,a])}}function Fl(...t){const e=new Headers;for(const r of t)if(r)for(const[s,i]of zv(r))i===null?e.delete(s):e.append(s,i);const n=[];return e.forEach((r,s)=>{n.push([s,r])}),Object.fromEntries(n)}function Wv(t){if(t)return t;const e=["LANGGRAPH","LANGSMITH","LANGCHAIN"];for(const n of e){const r=Bv(`${n}_API_KEY`);if(r)return r.trim().replace(/^["']|["']$/g,"")}}const Kv=/(\/threads\/(?<thread_id>.+))?\/runs\/(?<run_id>.+)/;function ri(t){var r;const e=t.headers.get("Content-Location");if(!e)return;const n=Kv.exec(e);if((r=n==null?void 0:n.groups)!=null&&r.run_id)return{run_id:n.groups.run_id,thread_id:n.groups.thread_id||void 0}}class Ln{constructor(e){var i;Object.defineProperty(this,"asyncCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeoutMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultHeaders",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onRequest",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n={maxRetries:4,maxConcurrency:4,...e==null?void 0:e.callerOptions};let r="http://localhost:8123";if(!(e!=null&&e.apiUrl)&&typeof globalThis=="object"&&globalThis!=null){const o=Symbol.for("langgraph_api:fetch"),a=Symbol.for("langgraph_api:url"),l=globalThis;l[o]&&(n.fetch??(n.fetch=l[o])),l[a]&&(r=l[a])}this.asyncCaller=new Vv(n),this.timeoutMs=e==null?void 0:e.timeoutMs,this.apiUrl=((i=e==null?void 0:e.apiUrl)==null?void 0:i.replace(/\/$/,""))||r,this.defaultHeaders=(e==null?void 0:e.defaultHeaders)||{},this.onRequest=e==null?void 0:e.onRequest;const s=Wv(e==null?void 0:e.apiKey);s&&(this.defaultHeaders["x-api-key"]=s)}prepareFetchOptions(e,n){const r={...n,headers:Fl(this.defaultHeaders,n==null?void 0:n.headers)};r.json&&(r.body=JSON.stringify(r.json),r.headers=Fl(r.headers,{"content-type":"application/json"}),delete r.json),r.withResponse&&delete r.withResponse;let s=null;typeof(n==null?void 0:n.timeoutMs)<"u"?n.timeoutMs!=null&&(s=AbortSignal.timeout(n.timeoutMs)):this.timeoutMs!=null&&(s=AbortSignal.timeout(this.timeoutMs)),r.signal=Fv(s,r.signal);const i=new URL(`${this.apiUrl}${e}`);if(r.params){for(const[o,a]of Object.entries(r.params)){if(a==null)continue;const l=typeof a=="string"||typeof a=="number"?a.toString():JSON.stringify(a);i.searchParams.append(o,l)}delete r.params}return[i,r]}async fetch(e,n){const[r,s]=this.prepareFetchOptions(e,n);let i=s;this.onRequest&&(i=await this.onRequest(r,s));const o=await this.asyncCaller.fetch(r,i),a=(()=>{if(!(o.status===202||o.status===204))return o.json()})();return n!=null&&n.withResponse?[await a,o]:a}}class Xv extends Ln{async createForThread(e,n,r){const s={schedule:r==null?void 0:r.schedule,input:r==null?void 0:r.input,config:r==null?void 0:r.config,context:r==null?void 0:r.context,metadata:r==null?void 0:r.metadata,assistant_id:n,interrupt_before:r==null?void 0:r.interruptBefore,interrupt_after:r==null?void 0:r.interruptAfter,webhook:r==null?void 0:r.webhook,multitask_strategy:r==null?void 0:r.multitaskStrategy,if_not_exists:r==null?void 0:r.ifNotExists,checkpoint_during:r==null?void 0:r.checkpointDuring,durability:r==null?void 0:r.durability};return this.fetch(`/threads/${e}/runs/crons`,{method:"POST",json:s})}async create(e,n){const r={schedule:n==null?void 0:n.schedule,input:n==null?void 0:n.input,config:n==null?void 0:n.config,context:n==null?void 0:n.context,metadata:n==null?void 0:n.metadata,assistant_id:e,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,webhook:n==null?void 0:n.webhook,multitask_strategy:n==null?void 0:n.multitaskStrategy,if_not_exists:n==null?void 0:n.ifNotExists,checkpoint_during:n==null?void 0:n.checkpointDuring,durability:n==null?void 0:n.durability};return this.fetch("/runs/crons",{method:"POST",json:r})}async delete(e){await this.fetch(`/runs/crons/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/runs/crons/search",{method:"POST",json:{assistant_id:(e==null?void 0:e.assistantId)??void 0,thread_id:(e==null?void 0:e.threadId)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0,sort_by:(e==null?void 0:e.sortBy)??void 0,sort_order:(e==null?void 0:e.sortOrder)??void 0,select:(e==null?void 0:e.select)??void 0}})}async count(e){return this.fetch("/runs/crons/count",{method:"POST",json:{assistant_id:(e==null?void 0:e.assistantId)??void 0,thread_id:(e==null?void 0:e.threadId)??void 0}})}}class Yv extends Ln{async get(e){return this.fetch(`/assistants/${e}`)}async getGraph(e,n){return this.fetch(`/assistants/${e}/graph`,{params:{xray:n==null?void 0:n.xray}})}async getSchemas(e){return this.fetch(`/assistants/${e}/schemas`)}async getSubgraphs(e,n){return n!=null&&n.namespace?this.fetch(`/assistants/${e}/subgraphs/${n.namespace}`,{params:{recurse:n==null?void 0:n.recurse}}):this.fetch(`/assistants/${e}/subgraphs`,{params:{recurse:n==null?void 0:n.recurse}})}async create(e){return this.fetch("/assistants",{method:"POST",json:{graph_id:e.graphId,config:e.config,context:e.context,metadata:e.metadata,assistant_id:e.assistantId,if_exists:e.ifExists,name:e.name,description:e.description}})}async update(e,n){return this.fetch(`/assistants/${e}`,{method:"PATCH",json:{graph_id:n.graphId,config:n.config,context:n.context,metadata:n.metadata,name:n.name,description:n.description}})}async delete(e){return this.fetch(`/assistants/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/assistants/search",{method:"POST",json:{graph_id:(e==null?void 0:e.graphId)??void 0,metadata:(e==null?void 0:e.metadata)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0,sort_by:(e==null?void 0:e.sortBy)??void 0,sort_order:(e==null?void 0:e.sortOrder)??void 0,select:(e==null?void 0:e.select)??void 0}})}async count(e){return this.fetch("/assistants/count",{method:"POST",json:{metadata:(e==null?void 0:e.metadata)??void 0,graph_id:(e==null?void 0:e.graphId)??void 0}})}async getVersions(e,n){return this.fetch(`/assistants/${e}/versions`,{method:"POST",json:{metadata:(n==null?void 0:n.metadata)??void 0,limit:(n==null?void 0:n.limit)??10,offset:(n==null?void 0:n.offset)??0}})}async setLatest(e,n){return this.fetch(`/assistants/${e}/latest`,{method:"POST",json:{version:n}})}}class qv extends Ln{async get(e){return this.fetch(`/threads/${e}`)}async create(e){var r;const n=typeof(e==null?void 0:e.ttl)=="number"?{ttl:e.ttl,strategy:"delete"}:e==null?void 0:e.ttl;return this.fetch("/threads",{method:"POST",json:{metadata:{...e==null?void 0:e.metadata,graph_id:e==null?void 0:e.graphId},thread_id:e==null?void 0:e.threadId,if_exists:e==null?void 0:e.ifExists,supersteps:(r=e==null?void 0:e.supersteps)==null?void 0:r.map(s=>({updates:s.updates.map(i=>({values:i.values,command:i.command,as_node:i.asNode}))})),ttl:n}})}async copy(e){return this.fetch(`/threads/${e}/copy`,{method:"POST"})}async update(e,n){const r=typeof(n==null?void 0:n.ttl)=="number"?{ttl:n.ttl,strategy:"delete"}:n==null?void 0:n.ttl;return this.fetch(`/threads/${e}`,{method:"PATCH",json:{metadata:n==null?void 0:n.metadata,ttl:r}})}async delete(e){return this.fetch(`/threads/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/threads/search",{method:"POST",json:{metadata:(e==null?void 0:e.metadata)??void 0,ids:(e==null?void 0:e.ids)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0,status:e==null?void 0:e.status,sort_by:e==null?void 0:e.sortBy,sort_order:e==null?void 0:e.sortOrder,select:(e==null?void 0:e.select)??void 0}})}async count(e){return this.fetch("/threads/count",{method:"POST",json:{metadata:(e==null?void 0:e.metadata)??void 0,values:(e==null?void 0:e.values)??void 0,status:(e==null?void 0:e.status)??void 0}})}async getState(e,n,r){return n!=null?typeof n!="string"?this.fetch(`/threads/${e}/state/checkpoint`,{method:"POST",json:{checkpoint:n,subgraphs:r==null?void 0:r.subgraphs}}):this.fetch(`/threads/${e}/state/${n}`,{params:{subgraphs:r==null?void 0:r.subgraphs}}):this.fetch(`/threads/${e}/state`,{params:{subgraphs:r==null?void 0:r.subgraphs}})}async updateState(e,n){return this.fetch(`/threads/${e}/state`,{method:"POST",json:{values:n.values,checkpoint_id:n.checkpointId,checkpoint:n.checkpoint,as_node:n==null?void 0:n.asNode}})}async patchState(e,n){var s;let r;if(typeof e!="string"){if(typeof((s=e.configurable)==null?void 0:s.thread_id)!="string")throw new Error("Thread ID is required when updating state with a config.");r=e.configurable.thread_id}else r=e;return this.fetch(`/threads/${r}/state`,{method:"PATCH",json:{metadata:n}})}async getHistory(e,n){return this.fetch(`/threads/${e}/history`,{method:"POST",json:{limit:(n==null?void 0:n.limit)??10,before:n==null?void 0:n.before,metadata:n==null?void 0:n.metadata,checkpoint:n==null?void 0:n.checkpoint}})}async*joinStream(e,n){let[r,s]=this.prepareFetchOptions(`/threads/${e}/stream`,{method:"GET",headers:n!=null&&n.lastEventId?{"Last-Event-ID":n.lastEventId}:void 0,params:n!=null&&n.streamMode?{stream_mode:n.streamMode}:void 0});this.onRequest!=null&&(s=await this.onRequest(r,s));const o=((await this.asyncCaller.fetch(r,s)).body||new ReadableStream({start:a=>a.close()})).pipeThrough(Vi()).pipeThrough(Bi());yield*En.fromReadableStream(o)}}class Zv extends Ln{async*stream(e,n,r){var d;const s={input:r==null?void 0:r.input,command:r==null?void 0:r.command,config:r==null?void 0:r.config,context:r==null?void 0:r.context,metadata:r==null?void 0:r.metadata,stream_mode:r==null?void 0:r.streamMode,stream_subgraphs:r==null?void 0:r.streamSubgraphs,stream_resumable:r==null?void 0:r.streamResumable,feedback_keys:r==null?void 0:r.feedbackKeys,assistant_id:n,interrupt_before:r==null?void 0:r.interruptBefore,interrupt_after:r==null?void 0:r.interruptAfter,checkpoint:r==null?void 0:r.checkpoint,checkpoint_id:r==null?void 0:r.checkpointId,webhook:r==null?void 0:r.webhook,multitask_strategy:r==null?void 0:r.multitaskStrategy,on_completion:r==null?void 0:r.onCompletion,on_disconnect:r==null?void 0:r.onDisconnect,after_seconds:r==null?void 0:r.afterSeconds,if_not_exists:r==null?void 0:r.ifNotExists,checkpoint_during:r==null?void 0:r.checkpointDuring,durability:r==null?void 0:r.durability},i=e==null?"/runs/stream":`/threads/${e}/runs/stream`;let[o,a]=this.prepareFetchOptions(i,{method:"POST",json:s,timeoutMs:null,signal:r==null?void 0:r.signal});this.onRequest!=null&&(a=await this.onRequest(o,a));const l=await this.asyncCaller.fetch(o,a),c=ri(l);c&&((d=r==null?void 0:r.onRunCreated)==null||d.call(r,c));const u=(l.body||new ReadableStream({start:f=>f.close()})).pipeThrough(Vi()).pipeThrough(Bi());yield*En.fromReadableStream(u)}async create(e,n,r){var l,c,u;const s={input:r==null?void 0:r.input,command:r==null?void 0:r.command,config:r==null?void 0:r.config,context:r==null?void 0:r.context,metadata:r==null?void 0:r.metadata,stream_mode:r==null?void 0:r.streamMode,stream_subgraphs:r==null?void 0:r.streamSubgraphs,stream_resumable:r==null?void 0:r.streamResumable,assistant_id:n,interrupt_before:r==null?void 0:r.interruptBefore,interrupt_after:r==null?void 0:r.interruptAfter,webhook:r==null?void 0:r.webhook,checkpoint:r==null?void 0:r.checkpoint,checkpoint_id:r==null?void 0:r.checkpointId,multitask_strategy:r==null?void 0:r.multitaskStrategy,after_seconds:r==null?void 0:r.afterSeconds,if_not_exists:r==null?void 0:r.ifNotExists,checkpoint_during:r==null?void 0:r.checkpointDuring,durability:r==null?void 0:r.durability,langsmith_tracer:r!=null&&r._langsmithTracer?{project_name:(l=r==null?void 0:r._langsmithTracer)==null?void 0:l.projectName,example_id:(c=r==null?void 0:r._langsmithTracer)==null?void 0:c.exampleId}:void 0},[i,o]=await this.fetch(`/threads/${e}/runs`,{method:"POST",json:s,signal:r==null?void 0:r.signal,withResponse:!0}),a=ri(o);return a&&((u=r==null?void 0:r.onRunCreated)==null||u.call(r,a)),i}async createBatch(e){const n=e.map(r=>({...r,assistant_id:r.assistantId})).map(r=>Object.fromEntries(Object.entries(r).filter(([s,i])=>i!==void 0)));return this.fetch("/runs/batch",{method:"POST",json:n})}async wait(e,n,r){var u,d,f,h,p;const s={input:r==null?void 0:r.input,command:r==null?void 0:r.command,config:r==null?void 0:r.config,context:r==null?void 0:r.context,metadata:r==null?void 0:r.metadata,assistant_id:n,interrupt_before:r==null?void 0:r.interruptBefore,interrupt_after:r==null?void 0:r.interruptAfter,checkpoint:r==null?void 0:r.checkpoint,checkpoint_id:r==null?void 0:r.checkpointId,webhook:r==null?void 0:r.webhook,multitask_strategy:r==null?void 0:r.multitaskStrategy,on_completion:r==null?void 0:r.onCompletion,on_disconnect:r==null?void 0:r.onDisconnect,after_seconds:r==null?void 0:r.afterSeconds,if_not_exists:r==null?void 0:r.ifNotExists,checkpoint_during:r==null?void 0:r.checkpointDuring,durability:r==null?void 0:r.durability,langsmith_tracer:r!=null&&r._langsmithTracer?{project_name:(u=r==null?void 0:r._langsmithTracer)==null?void 0:u.projectName,example_id:(d=r==null?void 0:r._langsmithTracer)==null?void 0:d.exampleId}:void 0},i=e==null?"/runs/wait":`/threads/${e}/runs/wait`,[o,a]=await this.fetch(i,{method:"POST",json:s,timeoutMs:null,signal:r==null?void 0:r.signal,withResponse:!0}),l=ri(a);if(l&&((f=r==null?void 0:r.onRunCreated)==null||f.call(r,l)),((r==null?void 0:r.raiseError)!==void 0?r.raiseError:!0)&&"__error__"in o&&typeof o.__error__=="object"&&o.__error__&&"error"in o.__error__&&"message"in o.__error__)throw new Error(`${(h=o.__error__)==null?void 0:h.error}: ${(p=o.__error__)==null?void 0:p.message}`);return o}async list(e,n){return this.fetch(`/threads/${e}/runs`,{params:{limit:(n==null?void 0:n.limit)??10,offset:(n==null?void 0:n.offset)??0,status:(n==null?void 0:n.status)??void 0,select:(n==null?void 0:n.select)??void 0}})}async get(e,n){return this.fetch(`/threads/${e}/runs/${n}`)}async cancel(e,n,r=!1,s="interrupt"){return this.fetch(`/threads/${e}/runs/${n}/cancel`,{method:"POST",params:{wait:r?"1":"0",action:s}})}async join(e,n,r){return this.fetch(`/threads/${e}/runs/${n}/join`,{timeoutMs:null,signal:r==null?void 0:r.signal})}async*joinStream(e,n,r){const s=typeof r=="object"&&r!=null&&r instanceof AbortSignal?{signal:r}:r;let[i,o]=this.prepareFetchOptions(e!=null?`/threads/${e}/runs/${n}/stream`:`/runs/${n}/stream`,{method:"GET",timeoutMs:null,signal:s==null?void 0:s.signal,headers:s!=null&&s.lastEventId?{"Last-Event-ID":s.lastEventId}:void 0,params:{cancel_on_disconnect:s!=null&&s.cancelOnDisconnect?"1":"0",stream_mode:s==null?void 0:s.streamMode}});this.onRequest!=null&&(o=await this.onRequest(i,o));const l=((await this.asyncCaller.fetch(i,o)).body||new ReadableStream({start:c=>c.close()})).pipeThrough(Vi()).pipeThrough(Bi());yield*En.fromReadableStream(l)}async delete(e,n){return this.fetch(`/threads/${e}/runs/${n}`,{method:"DELETE"})}}class Jv extends Ln{async putItem(e,n,r,s){e.forEach(o=>{if(o.includes("."))throw new Error(`Invalid namespace label '${o}'. Namespace labels cannot contain periods ('.')`)});const i={namespace:e,key:n,value:r,index:s==null?void 0:s.index,ttl:s==null?void 0:s.ttl};return this.fetch("/store/items",{method:"PUT",json:i})}async getItem(e,n,r){e.forEach(o=>{if(o.includes("."))throw new Error(`Invalid namespace label '${o}'. Namespace labels cannot contain periods ('.')`)});const s={namespace:e.join("."),key:n};(r==null?void 0:r.refreshTtl)!==void 0&&(s.refresh_ttl=r.refreshTtl);const i=await this.fetch("/store/items",{params:s});return i?{...i,createdAt:i.created_at,updatedAt:i.updated_at}:null}async deleteItem(e,n){return e.forEach(r=>{if(r.includes("."))throw new Error(`Invalid namespace label '${r}'. Namespace labels cannot contain periods ('.')`)}),this.fetch("/store/items",{method:"DELETE",json:{namespace:e,key:n}})}async searchItems(e,n){const r={namespace_prefix:e,filter:n==null?void 0:n.filter,limit:(n==null?void 0:n.limit)??10,offset:(n==null?void 0:n.offset)??0,query:n==null?void 0:n.query,refresh_ttl:n==null?void 0:n.refreshTtl};return{items:(await this.fetch("/store/items/search",{method:"POST",json:r})).items.map(i=>({...i,createdAt:i.created_at,updatedAt:i.updated_at}))}}async listNamespaces(e){const n={prefix:e==null?void 0:e.prefix,suffix:e==null?void 0:e.suffix,max_depth:e==null?void 0:e.maxDepth,limit:(e==null?void 0:e.limit)??100,offset:(e==null?void 0:e.offset)??0};return this.fetch("/store/namespaces",{method:"POST",json:n})}}class zt extends Ln{static getOrCached(e,n){if(zt.promiseCache[e]!=null)return zt.promiseCache[e];const r=n();return zt.promiseCache[e]=r,r}async getComponent(e,n){return zt.getOrCached(`${this.apiUrl}-${e}-${n}`,async()=>{let[r,s]=this.prepareFetchOptions(`/ui/${e}`,{headers:{Accept:"text/html","Content-Type":"application/json"},method:"POST",json:{name:n}});return this.onRequest!=null&&(s=await this.onRequest(r,s)),(await this.asyncCaller.fetch(r,s)).text()})}}Object.defineProperty(zt,"promiseCache",{enumerable:!0,configurable:!0,writable:!0,value:{}});class Gd{constructor(e){Object.defineProperty(this,"assistants",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"threads",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"crons",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"~ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"~configHash",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this["~configHash"]=(()=>{var n,r,s,i;return JSON.stringify({apiUrl:e==null?void 0:e.apiUrl,apiKey:e==null?void 0:e.apiKey,timeoutMs:e==null?void 0:e.timeoutMs,defaultHeaders:e==null?void 0:e.defaultHeaders,maxConcurrency:(n=e==null?void 0:e.callerOptions)==null?void 0:n.maxConcurrency,maxRetries:(r=e==null?void 0:e.callerOptions)==null?void 0:r.maxRetries,callbacks:{onFailedResponseHook:((s=e==null?void 0:e.callerOptions)==null?void 0:s.onFailedResponseHook)!=null,onRequest:(e==null?void 0:e.onRequest)!=null,fetch:((i=e==null?void 0:e.callerOptions)==null?void 0:i.fetch)!=null}})})(),this.assistants=new Yv(e),this.threads=new qv(e),this.runs=new Zv(e),this.crons=new Xv(e),this.store=new Jv(e),this["~ui"]=new zt(e)}}function Qv(t){return t["~configHash"]}const Ud=t=>{const[e,n]=v.useState((t==null?void 0:t.threadId)??null),r=v.useRef(t==null?void 0:t.onThreadId);r.current=t==null?void 0:t.onThreadId;const s=v.useCallback(i=>{var o;n(i),(o=r.current)==null||o.call(r,i)},[]);return!t||!("threadId"in t)?[e,s]:[t.threadId??null,s]};function ex(t,e,n){return[Qv(t),e,n].join(":")}function tx(t,e,n){if((n==null?void 0:n.limit)===!1)return t.threads.getState(e).then(s=>s.checkpoint==null?[]:[s]);const r=typeof(n==null?void 0:n.limit)=="number"?n.limit:10;return t.threads.getHistory(e,{limit:r})}function nx(t,e,n,r){const s=ex(t,e,n),[i,o]=v.useState(()=>({data:void 0,error:void 0,isLoading:e!=null})),a=v.useRef(t);a.current=t;const l=v.useRef(r==null?void 0:r.onError);l.current=r==null?void 0:r.onError;const c=v.useCallback((u,d)=>{if(u!=null){const f=a.current;return o(h=>({...h,isLoading:!0})),tx(f,u,{limit:d}).then(h=>(o({data:h,error:void 0,isLoading:!1}),h),h=>{var p;return o(({data:_})=>({data:_,error:h,isLoading:!1})),(p=l.current)==null||p.call(l,h),Promise.reject(h)})}return o({data:void 0,error:void 0,isLoading:!1}),Promise.resolve([])},[]);return v.useEffect(()=>{r.submittingRef.current!=null&&r.submittingRef.current===e||c(e,n)},[c,s]),{data:i.data,error:i.error,isLoading:i.isLoading,mutate:u=>c(u??e,n)}}function rx(t){var G;const e=v.useRef(t.reconnectOnMount),n=v.useMemo(()=>{if(typeof window>"u")return null;const D=e.current;return D===!0?window.sessionStorage:typeof D=="function"?D():null},[]),r=v.useMemo(()=>t.client??new Gd({apiUrl:t.apiUrl,apiKey:t.apiKey,callerOptions:t.callerOptions,defaultHeaders:t.defaultHeaders}),[t.client,t.apiKey,t.apiUrl,t.callerOptions,t.defaultHeaders]),[s]=v.useState(()=>new Fd),[i]=v.useState(()=>new Hd(s));v.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getSnapshot);const[o,a]=Ud(t),l=v.useRef([]),c=v.useCallback((...D)=>{const I=l.current;for(const K of D)I.includes(K)||I.push(K)},[]),u=t.onUpdateEvent!=null,d=t.onCustomEvent!=null,f=t.onLangChainEvent!=null,h=t.onDebugEvent!=null,p=t.onCheckpointEvent!=null,_=t.onTaskEvent!=null,g=v.useMemo(()=>{const D=[];return u&&D.push("updates"),d&&D.push("custom"),f&&D.push("events"),h&&D.push("debug"),p&&D.push("checkpoints"),_&&D.push("tasks"),D},[u,d,f,h,p,_]),x=v.useRef(null);x.current=i.clear;const y=v.useRef(o),w=v.useRef(null);v.useEffect(()=>{y.current!==o&&(y.current=o,i.clear())},[o,i]);const E=typeof t.fetchStateHistory=="object"&&t.fetchStateHistory!=null?t.fetchStateHistory.limit??!1:t.fetchStateHistory??!1,S=nx(r,o,E,{submittingRef:w,onError:t.onError}),R=D=>{const I=t.messagesKey??"messages";return Array.isArray(D[I])?D[I]:[]},k=(D,I)=>{const K=t.messagesKey??"messages";return{...D,[K]:I}},[P,L]=v.useState(""),V=Zg(P,S.data),j=((G=V.threadHead)==null?void 0:G.values)??t.initialValues??{},O=(()=>{var I,K,Z;const D=(Z=(K=(I=V.threadHead)==null?void 0:I.tasks)==null?void 0:K.at(-1))==null?void 0:Z.error;if(D!=null){try{const te=JSON.parse(D);return Oi.isStructuredError(te)?new Oi(te):te}catch{}return D}})(),z=(()=>{const D=new Set;return R(j).map((I,K)=>{var he,pe,de;const Z=I.id??K,te=Xg(S.data??[],oe=>R(oe.values).map((_e,ie)=>_e.id??ie).includes(Z)),ee=(he=te==null?void 0:te.checkpoint)==null?void 0:he.checkpoint_id;let Y=ee!=null?V.branchByCheckpoint[ee]:void 0;(pe=Y==null?void 0:Y.branch)!=null&&pe.length||(Y=void 0);const ue=(de=Y==null?void 0:Y.branchOptions)==null?void 0:de.flat(2).join(",");return ue&&(D.has(ue)&&(Y=void 0),D.add(ue)),{messageId:Z.toString(),firstSeenState:te,branch:Y==null?void 0:Y.branch,branchOptions:Y==null?void 0:Y.branchOptions}})})(),A=()=>i.stop(j,{onStop:D=>{var I;if(n&&o){const K=n.getItem(`lg:stream:${o}`);K&&r.runs.cancel(o,K),n.removeItem(`lg:stream:${o}`)}(I=t.onStop)==null||I.call(t,D)}}),N=async(D,I)=>{var ue,he;const K=(ue=I==null?void 0:I.checkpoint)==null?void 0:ue.checkpoint_id;L(K!=null?((he=V.branchByCheckpoint[K])==null?void 0:he.branch)??"":""),i.setStreamValues(()=>(I==null?void 0:I.optimisticValues)!=null?{...j,...typeof I.optimisticValues=="function"?I.optimisticValues(j):I.optimisticValues}:{...j});const Z=E===!0||typeof E=="number";let te,ee,Y=o;await i.start(async pe=>{var ie;if(Y||(Y=(await r.threads.create({threadId:I==null?void 0:I.threadId,metadata:I==null?void 0:I.metadata})).thread_id,y.current=Y,w.current=Y,a(Y)),!Y)throw new Error("Failed to obtain valid thread ID.");w.current=Y;const de=Kg([...(I==null?void 0:I.streamMode)??[],...l.current,...g]);let oe=(I==null?void 0:I.checkpoint)??(Z?(ie=V.threadHead)==null?void 0:ie.checkpoint:void 0)??void 0;(I==null?void 0:I.checkpoint)===null&&(oe=void 0),oe!=null&&delete oe.thread_id;const _e=(I==null?void 0:I.streamResumable)??!!n;return r.runs.stream(Y,t.assistantId,{input:D,config:I==null?void 0:I.config,context:I==null?void 0:I.context,command:I==null?void 0:I.command,interruptBefore:I==null?void 0:I.interruptBefore,interruptAfter:I==null?void 0:I.interruptAfter,metadata:I==null?void 0:I.metadata,multitaskStrategy:I==null?void 0:I.multitaskStrategy,onCompletion:I==null?void 0:I.onCompletion,onDisconnect:(I==null?void 0:I.onDisconnect)??(_e?"continue":"cancel"),signal:pe,checkpoint:oe,streamMode:de,streamSubgraphs:I==null?void 0:I.streamSubgraphs,streamResumable:_e,durability:I==null?void 0:I.durability,onRunCreated(J){var be;te={run_id:J.run_id,thread_id:J.thread_id??Y},n&&(ee=`lg:stream:${Y}`,n.setItem(ee,te.run_id)),(be=t.onCreated)==null||be.call(t,te)}})},{getMessages:R,setMessages:k,initialValues:j,callbacks:t,async onSuccess(){var de;if(ee&&(n==null||n.removeItem(ee)),t.onFinish!=null||Z){const _e=(await S.mutate(Y)).at(0);if(_e)return(de=t.onFinish)==null||de.call(t,_e,te),null}},onError(pe){var de;(de=t.onError)==null||de.call(t,pe,te)},onFinish(){w.current=null}})},F=async(D,I,K)=>{if(I??(I="-1"),!o)return;const Z={thread_id:o,run_id:D};await i.start(async te=>(w.current=o,r.runs.joinStream(o,D,{signal:te,lastEventId:I,streamMode:K==null?void 0:K.streamMode})),{getMessages:R,setMessages:k,initialValues:j,callbacks:t,async onSuccess(){var Y;n==null||n.removeItem(`lg:stream:${o}`);const ee=(await S.mutate(o)).at(0);ee&&((Y=t.onFinish)==null||Y.call(t,ee,Z))},onError(te){var ee;(ee=t.onError)==null||ee.call(t,te,Z)},onFinish(){w.current=null}})},$=v.useMemo(()=>{if(!n||i.isLoading||typeof window>"u")return;const D=n==null?void 0:n.getItem(`lg:stream:${o}`);if(D)return{runId:D,threadId:o}},[n,i.isLoading,o]),H=!!n,T=v.useRef({threadId:o,shouldReconnect:H}),B=v.useRef(F);B.current=F,v.useEffect(()=>{T.current.threadId!==o&&(T.current={threadId:o,shouldReconnect:H})},[o,H]),v.useEffect(()=>{var D;$&&T.current.shouldReconnect&&(T.current.shouldReconnect=!1,(D=B.current)==null||D.call(B,$.runId))},[$]);const W=i.error??O??S.error,M=i.values??j;return{get values(){return c("values"),M},client:r,assistantId:t.assistantId,error:W,isLoading:i.isLoading,stop:A,submit:N,joinStream:F,branch:P,setBranch:L,get history(){if(E===!1)throw new Error("`fetchStateHistory` must be set to `true` to use `history`");return V.flatHistory},isThreadLoading:S.isLoading&&S.data==null,get experimental_branchTree(){if(E===!1)throw new Error("`fetchStateHistory` must be set to `true` to use `experimental_branchTree`");return V.branchTree},get interrupt(){var I,K,Z,te;if(M!=null&&"__interrupt__"in M&&Array.isArray(M.__interrupt__)){const ee=M.__interrupt__;return ee.length===0?{when:"breakpoint"}:ee.length===1?ee[0]:ee}if(i.isLoading)return;const D=(Z=(K=(I=V.threadHead)==null?void 0:I.tasks)==null?void 0:K.at(-1))==null?void 0:Z.interrupts;return D==null||D.length===0?!(((te=V.threadHead)==null?void 0:te.next)??[]).length||W!=null?void 0:{when:"breakpoint"}:D.at(-1)},get messages(){return c("messages-tuple","values"),R(M)},getMessagesMetadata(D,I){var te;c("values");const K=(te=s.get(D.id))==null?void 0:te.metadata,Z=z==null?void 0:z.find(ee=>ee.messageId===(D.id??I));if(K!=null||Z!=null)return{...Z,streamMetadata:K}}}}function sx(t){const[e]=v.useState(()=>new Fd),[n]=v.useState(()=>new Hd(e));v.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot);const[r,s]=Ud(t),i=v.useRef(r);v.useEffect(()=>{i.current!==r&&(i.current=r,n.clear())},[r,n]);const o=d=>{const f=t.messagesKey??"messages";return Array.isArray(d[f])?d[f]:[]},a=(d,f)=>{const h=t.messagesKey??"messages";return{...d,[h]:f}},l=t.initialValues??{},c=()=>n.stop(l,{onStop:t.onStop}),u=async(d,f)=>{let h,p=r;n.setStreamValues(()=>(f==null?void 0:f.optimisticValues)!=null?{...l,...typeof f.optimisticValues=="function"?f.optimisticValues(l):f.optimisticValues}:{...l}),await n.start(async _=>{var g;if(p||(p=crypto.randomUUID(),i.current=p,s(p)),!p)throw new Error("Failed to obtain valid thread ID.");return t.transport.stream({input:d,context:f==null?void 0:f.context,command:f==null?void 0:f.command,signal:_,config:{...f==null?void 0:f.config,configurable:{thread_id:p,...(g=f==null?void 0:f.config)==null?void 0:g.configurable}}})},{getMessages:o,setMessages:a,initialValues:{},callbacks:t,onSuccess:()=>{},onError(_){var g;(g=t.onError)==null||g.call(t,_,h)}})};return{get values(){return n.values??{}},error:n.error,isLoading:n.isLoading,stop:c,submit:u,get interrupt(){if(n.values!=null&&"__interrupt__"in n.values&&Array.isArray(n.values.__interrupt__)){const d=n.values.__interrupt__;return d.length===0?{when:"breakpoint"}:d.length===1?d[0]:d}},get messages(){return n.values?o(n.values):[]}}}function ix(t){return"transport"in t}function zd(t){const[e]=v.useState(ix(t));return e?sx(t):rx(t)}const Fi=v.createContext(null);function ox(){const t=v.useContext(Fi);if(!t)throw new Error("useStreamContext must be used within a LoadExternalComponent");return new Proxy(t,{get(e,n){return n==="meta"?e.meta:e.stream[n]}})}class ax{constructor(){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"boundCache",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}respond(e,n,r){var s;this.cache[e]={comp:n,target:r},(s=this.callbacks[e])==null||s.forEach(i=>i(n,r))}getBoundStore(e){var n;return(n=this.boundCache)[e]??(n[e]={subscribe:r=>{var s;return(s=this.callbacks)[e]??(s[e]=[]),this.callbacks[e].push(r),()=>{this.callbacks[e]=this.callbacks[e].filter(i=>i!==r)}},getSnapshot:()=>this.cache[e]}),this.boundCache[e]}}const Wd=new ax,lx=Symbol.for("LGUI_EXT_STORE"),cx=Symbol.for("LGUI_REQUIRE"),Dr=Symbol.for("LGUI_REQUIRE_EXTRA"),ux=t=>t!=null&&typeof t=="object"&&Symbol.iterator in t,dx=t=>t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function",hx=t=>!!(v.isValidElement(t)||t==null||typeof t=="string"||typeof t=="number"||typeof t=="bigint"||typeof t=="boolean"||ux(t)||dx(t));function fx({stream:t,namespace:e,message:n,meta:r,fallback:s,components:i,...o}){const a=v.useRef(null),c=`child-shadow-${v.useId()}`,u=v.useMemo(()=>Wd.getBoundStore(c),[c]),d=v.useSyncExternalStore(u.subscribe,u.getSnapshot),f=i==null?void 0:i[n.name],h=f!=null;let p=null;hx(s)?p=s:typeof s=="object"&&s!=null&&(p=s==null?void 0:s[n.name]);const _=e??t.assistantId,g=t.client["~ui"];return v.useEffect(()=>{h||g.getComponent(_,n.name).then(x=>{const y=a.current;if(!y)return;const w=y.shadowRoot??y.attachShadow({mode:"open"}),E=document.createRange().createContextualFragment(x.replace("{{shadowRootId}}",c));w.appendChild(E)})},[g,_,n.name,c,h]),h?m.jsx(Fi.Provider,{value:{stream:t,meta:r},children:v.createElement(f,n.props)}):m.jsxs(m.Fragment,{children:[m.jsx("div",{id:c,ref:a,...o}),m.jsx(Fi.Provider,{value:{stream:t,meta:r},children:(d==null?void 0:d.target)!=null?ki.createPortal(v.createElement(d.comp,n.props),d.target):p})]})}function mx(){typeof window>"u"||(window[lx]=Wd,window[cx]=t=>{if(t==="react")return Dp;if(t==="react-dom")return Op;if(t==="react/jsx-runtime")return Mp;if(t==="@langchain/langgraph-sdk/react")return{useStream:zd};if(t==="@langchain/langgraph-sdk/react-ui")return{useStreamContext:ox,LoadExternalComponent:()=>{throw new Error("Nesting LoadExternalComponent is not supported")}};if(window[Dr]!=null&&typeof window[Dr]=="object"&&t in window[Dr])return window[Dr][t];throw new Error(`Unknown module...: ${t}`)})}function px(t){return typeof t!="object"||t==null||!("type"in t)?!1:t.type==="ui"}function gx(t){return typeof t!="object"||t==null||!("type"in t)?!1:t.type==="remove-ui"}function _x(t,e){const n=Array.isArray(e)?e:[e];let r=t.slice();for(const s of n){if(s.type==="remove-ui"){r=r.filter(o=>o.id!==s.id);continue}const i=t.findIndex(o=>o.id===s.id);i!==-1?r[i]=typeof s.metadata=="object"&&s.metadata!=null&&s.metadata.merge?{...s,props:{...t[i].props,...s.props}}:s:r.push(s)}return r}mx();var yx=t=>{switch(t){case"success":return wx;case"info":return Ex;case"warning":return bx;case"error":return Sx;default:return null}},vx=Array(12).fill(0),xx=({visible:t,className:e})=>C.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},C.createElement("div",{className:"sonner-spinner"},vx.map((n,r)=>C.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),wx=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),bx=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ex=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Sx=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Tx=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},C.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ax=()=>{let[t,e]=C.useState(document.hidden);return C.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Hi=1,Cx=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Hi++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async l=>{if(i=["resolve",l],C.isValidElement(l))s=!1,this.create({id:n,type:"default",message:l});else if(Px(l)&&!l.ok){s=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){s=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;s&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Hi++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},Ye=new Cx,Rx=(t,e)=>{let n=(e==null?void 0:e.id)||Hi++;return Ye.addToast({title:t,...e,id:n}),n},Px=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Nx=Rx,Ix=()=>Ye.toasts,Bt=Object.assign(Nx,{success:Ye.success,info:Ye.info,warning:Ye.warning,error:Ye.error,custom:Ye.custom,message:Ye.message,promise:Ye.promise,dismiss:Ye.dismiss,loading:Ye.loading},{getHistory:Ix});function Lx(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Lx(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Or(t){return t.label!==void 0}var kx=3,jx="32px",Hl=4e3,Dx=356,Ox=14,Mx=20,$x=200;function Vx(...t){return t.filter(Boolean).join(" ")}var Bx=t=>{var e,n,r,s,i,o,a,l,c,u,d;let{invert:f,toast:h,unstyled:p,interacting:_,setHeights:g,visibleToasts:x,heights:y,index:w,toasts:E,expanded:S,removeToast:R,defaultRichColors:k,closeButton:P,style:L,cancelButtonStyle:V,actionButtonStyle:j,className:O="",descriptionClassName:z="",duration:A,position:N,gap:F,loadingIcon:$,expandByDefault:H,classNames:T,icons:B,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:M,cn:G}=t,[D,I]=C.useState(!1),[K,Z]=C.useState(!1),[te,ee]=C.useState(!1),[Y,ue]=C.useState(!1),[he,pe]=C.useState(!1),[de,oe]=C.useState(0),[_e,ie]=C.useState(0),J=C.useRef(h.duration||A||Hl),be=C.useRef(null),je=C.useRef(null),wt=w===0,ft=w+1<=x,Ee=h.type,Re=h.dismissible!==!1,mt=h.className||"",lt=h.descriptionClassName||"",Ge=C.useMemo(()=>y.findIndex(ne=>ne.toastId===h.id)||0,[y,h.id]),ct=C.useMemo(()=>{var ne;return(ne=h.closeButton)!=null?ne:P},[h.closeButton,P]);C.useMemo(()=>h.duration||A||Hl,[h.duration,A]);let Te=C.useRef(0),Ue=C.useRef(0),X=C.useRef(0),q=C.useRef(null),[ae,Pe]=N.split("-"),Ke=C.useMemo(()=>y.reduce((ne,ce,le)=>le>=Ge?ne:ne+ce.height,0),[y,Ge]),Ve=Ax(),Be=h.invert||f,Je=Ee==="loading";Ue.current=C.useMemo(()=>Ge*F+Ke,[Ge,Ke]),C.useEffect(()=>{I(!0)},[]),C.useEffect(()=>{let ne=je.current;if(ne){let ce=ne.getBoundingClientRect().height;return ie(ce),g(le=>[{toastId:h.id,height:ce,position:h.position},...le]),()=>g(le=>le.filter(Xe=>Xe.toastId!==h.id))}},[g,h.id]),C.useLayoutEffect(()=>{if(!D)return;let ne=je.current,ce=ne.style.height;ne.style.height="auto";let le=ne.getBoundingClientRect().height;ne.style.height=ce,ie(le),g(Xe=>Xe.find(Qe=>Qe.toastId===h.id)?Xe.map(Qe=>Qe.toastId===h.id?{...Qe,height:le}:Qe):[{toastId:h.id,height:le,position:h.position},...Xe])},[D,h.title,h.description,g,h.id]);let ze=C.useCallback(()=>{Z(!0),oe(Ue.current),g(ne=>ne.filter(ce=>ce.toastId!==h.id)),setTimeout(()=>{R(h)},$x)},[h,R,g,Ue]);C.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let ne;return S||_||M&&Ve?(()=>{if(X.current<Te.current){let ce=new Date().getTime()-Te.current;J.current=J.current-ce}X.current=new Date().getTime()})():J.current!==1/0&&(Te.current=new Date().getTime(),ne=setTimeout(()=>{var ce;(ce=h.onAutoClose)==null||ce.call(h,h),ze()},J.current)),()=>clearTimeout(ne)},[S,_,h,Ee,M,Ve,ze]),C.useEffect(()=>{h.delete&&ze()},[ze,h.delete]);function bt(){var ne,ce,le;return B!=null&&B.loading?C.createElement("div",{className:G(T==null?void 0:T.loader,(ne=h==null?void 0:h.classNames)==null?void 0:ne.loader,"sonner-loader"),"data-visible":Ee==="loading"},B.loading):$?C.createElement("div",{className:G(T==null?void 0:T.loader,(ce=h==null?void 0:h.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":Ee==="loading"},$):C.createElement(xx,{className:G(T==null?void 0:T.loader,(le=h==null?void 0:h.classNames)==null?void 0:le.loader),visible:Ee==="loading"})}return C.createElement("li",{tabIndex:0,ref:je,className:G(O,mt,T==null?void 0:T.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,T==null?void 0:T.default,T==null?void 0:T[Ee],(n=h==null?void 0:h.classNames)==null?void 0:n[Ee]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":D,"data-promise":!!h.promise,"data-swiped":he,"data-removed":K,"data-visible":ft,"data-y-position":ae,"data-x-position":Pe,"data-index":w,"data-front":wt,"data-swiping":te,"data-dismissible":Re,"data-type":Ee,"data-invert":Be,"data-swipe-out":Y,"data-expanded":!!(S||H&&D),style:{"--index":w,"--toasts-before":w,"--z-index":E.length-w,"--offset":`${K?de:Ue.current}px`,"--initial-height":H?"auto":`${_e}px`,...L,...h.style},onPointerDown:ne=>{Je||!Re||(be.current=new Date,oe(Ue.current),ne.target.setPointerCapture(ne.pointerId),ne.target.tagName!=="BUTTON"&&(ee(!0),q.current={x:ne.clientX,y:ne.clientY}))},onPointerUp:()=>{var ne,ce,le,Xe;if(Y||!Re)return;q.current=null;let Qe=Number(((ne=je.current)==null?void 0:ne.style.getPropertyValue("--swipe-amount").replace("px",""))||0),tn=new Date().getTime()-((ce=be.current)==null?void 0:ce.getTime()),Hs=Math.abs(Qe)/tn;if(Math.abs(Qe)>=Mx||Hs>.11){oe(Ue.current),(le=h.onDismiss)==null||le.call(h,h),ze(),ue(!0),pe(!1);return}(Xe=je.current)==null||Xe.style.setProperty("--swipe-amount","0px"),ee(!1)},onPointerMove:ne=>{var ce,le;if(!q.current||!Re)return;let Xe=ne.clientY-q.current.y,Qe=((ce=window.getSelection())==null?void 0:ce.toString().length)>0,tn=ae==="top"?Math.min(0,Xe):Math.max(0,Xe);Math.abs(tn)>0&&pe(!0),!Qe&&((le=je.current)==null||le.style.setProperty("--swipe-amount",`${tn}px`))}},ct&&!h.jsx?C.createElement("button",{"aria-label":W,"data-disabled":Je,"data-close-button":!0,onClick:Je||!Re?()=>{}:()=>{var ne;ze(),(ne=h.onDismiss)==null||ne.call(h,h)},className:G(T==null?void 0:T.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},(i=B==null?void 0:B.close)!=null?i:Tx):null,h.jsx||C.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:C.createElement(C.Fragment,null,Ee||h.icon||h.promise?C.createElement("div",{"data-icon":"",className:G(T==null?void 0:T.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||bt():null,h.type!=="loading"?h.icon||(B==null?void 0:B[Ee])||yx(Ee):null):null,C.createElement("div",{"data-content":"",className:G(T==null?void 0:T.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},C.createElement("div",{"data-title":"",className:G(T==null?void 0:T.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?C.createElement("div",{"data-description":"",className:G(z,lt,T==null?void 0:T.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),C.isValidElement(h.cancel)?h.cancel:h.cancel&&Or(h.cancel)?C.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||V,onClick:ne=>{var ce,le;Or(h.cancel)&&Re&&((le=(ce=h.cancel).onClick)==null||le.call(ce,ne),ze())},className:G(T==null?void 0:T.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,C.isValidElement(h.action)?h.action:h.action&&Or(h.action)?C.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||j,onClick:ne=>{var ce,le;Or(h.action)&&((le=(ce=h.action).onClick)==null||le.call(ce,ne),!ne.defaultPrevented&&ze())},className:G(T==null?void 0:T.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function Gl(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var Fx=v.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:h=kx,toastOptions:p,dir:_=Gl(),gap:g=Ox,loadingIcon:x,icons:y,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:E,cn:S=Vx}=t,[R,k]=C.useState([]),P=C.useMemo(()=>Array.from(new Set([r].concat(R.filter(M=>M.position).map(M=>M.position)))),[R,r]),[L,V]=C.useState([]),[j,O]=C.useState(!1),[z,A]=C.useState(!1),[N,F]=C.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=C.useRef(null),H=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=C.useRef(null),B=C.useRef(!1),W=C.useCallback(M=>{k(G=>{var D;return(D=G.find(I=>I.id===M.id))!=null&&D.delete||Ye.dismiss(M.id),G.filter(({id:I})=>I!==M.id)})},[]);return C.useEffect(()=>Ye.subscribe(M=>{if(M.dismiss){k(G=>G.map(D=>D.id===M.id?{...D,delete:!0}:D));return}setTimeout(()=>{$p.flushSync(()=>{k(G=>{let D=G.findIndex(I=>I.id===M.id);return D!==-1?[...G.slice(0,D),{...G[D],...M},...G.slice(D+1)]:[M,...G]})})})}),[]),C.useEffect(()=>{if(c!=="system"){F(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:G})=>{F(G?"dark":"light")})}catch{M.addListener(({matches:D})=>{try{F(D?"dark":"light")}catch(I){console.error(I)}})}},[c]),C.useEffect(()=>{R.length<=1&&O(!1)},[R]),C.useEffect(()=>{let M=G=>{var D,I;s.every(K=>G[K]||G.code===K)&&(O(!0),(D=$.current)==null||D.focus()),G.code==="Escape"&&(document.activeElement===$.current||(I=$.current)!=null&&I.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[s]),C.useEffect(()=>{if($.current)return()=>{T.current&&(T.current.focus({preventScroll:!0}),T.current=null,B.current=!1)}},[$.current]),C.createElement("section",{"aria-label":`${w} ${H}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},P.map((M,G)=>{var D;let[I,K]=M.split("-");return R.length?C.createElement("ol",{key:M,dir:_==="auto"?Gl():_,tabIndex:-1,ref:$,className:a,"data-sonner-toaster":!0,"data-theme":N,"data-y-position":I,"data-lifted":j&&R.length>1&&!i,"data-x-position":K,style:{"--front-toast-height":`${((D=L[0])==null?void 0:D.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||jx,"--width":`${Dx}px`,"--gap":`${g}px`,...f},onBlur:Z=>{B.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(B.current=!1,T.current&&(T.current.focus({preventScroll:!0}),T.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||B.current||(B.current=!0,T.current=Z.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{z||O(!1)},onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},R.filter(Z=>!Z.position&&G===0||Z.position===M).map((Z,te)=>{var ee,Y;return C.createElement(Bx,{key:Z.id,icons:y,index:te,toast:Z,defaultRichColors:u,duration:(ee=p==null?void 0:p.duration)!=null?ee:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:h,closeButton:(Y=p==null?void 0:p.closeButton)!=null?Y:o,interacting:z,position:M,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:W,toasts:R.filter(ue=>ue.position==Z.position),heights:L.filter(ue=>ue.position==Z.position),setHeights:V,expandByDefault:i,gap:g,loadingIcon:x,expanded:j,pauseWhenPageIsHidden:E,cn:S})})):null}))});function Hx(t,e){return new Gd({apiUrl:t,...e})}const Kd=Vp("/qagent"),Gx="agent",Xd=v.createContext(void 0);function Ux(t){return Fg(t)?{assistant_id:t}:{graph_id:t}}function zx({children:t}){const[e]=bn("apiUrl",{defaultValue:Kd}),[n]=bn("assistantId",{defaultValue:"agent"}),[r,s]=v.useState([]),[i,o]=v.useState(!1),l={getThreads:v.useCallback(async()=>!e||!n?[]:await Hx(e,void 0).threads.search({metadata:{...Ux(n)},limit:100}),[e,n]),threads:r,setThreads:s,threadsLoading:i,setThreadsLoading:o};return m.jsx(Xd.Provider,{value:l,children:t})}function Wx(){const t=v.useContext(Xd);if(t===void 0)throw new Error("useThreads must be used within a ThreadProvider");return t}const Kx=zd,Yd=v.createContext(void 0);async function Xx(t=4e3){return new Promise(e=>setTimeout(e,t))}async function Yx(t,e){try{return(await fetch(`${t}/info`,{...e&&{headers:{"X-Api-Key":e}}})).ok}catch(n){return console.error(n),!1}}const qx=({children:t,apiKey:e,apiUrl:n,assistantId:r})=>{const[s,i]=bn("threadId"),{getThreads:o,setThreads:a}=Wx(),l=Kx({apiUrl:n,apiKey:e??void 0,assistantId:r,threadId:s??null,fetchStateHistory:!0,onCustomEvent:(c,u)=>{(px(c)||gx(c))&&u.mutate(d=>{const f=_x(d.ui??[],c);return{...d,ui:f}})},onThreadId:c=>{i(c),Xx().then(()=>o().then(a).catch(console.error))}});return v.useEffect(()=>{Yx(n,e).then(c=>{c||Bt.error("Failed to connect to LangGraph server",{description:`Please ensure your graph is running at ${n}`,duration:1e4})})},[e,n]),m.jsx(Yd.Provider,{value:l,children:t})},Zx=({children:t})=>{const e=Kd,n=Gx;return m.jsx(qx,{apiKey:null,apiUrl:e,assistantId:n,children:t})},Ps=()=>{const t=v.useContext(Yd);if(t===void 0)throw new Error("useStreamContext must be used within a StreamProvider");return t};function zo(t){return typeof t=="string"?t:t.filter(n=>n.type==="text").map(n=>n.text).join(" ")}const dn=v.forwardRef(({children:t,tooltip:e,side:n="bottom",className:r,...s},i)=>m.jsx(nd,{children:m.jsxs(rd,{children:[m.jsx(sd,{asChild:!0,children:m.jsxs(fe,{variant:"ghost",size:"icon",...s,className:ge("size-6 p-1",r),ref:i,children:[t,m.jsx("span",{className:"sr-only",children:e})]})}),m.jsx(id,{side:n,children:e})]})}));dn.displayName="TooltipIconButton";function Jx(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}function Ns(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Gi=t=>Array.isArray(t);function qd(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function lr(t){return typeof t=="string"||Array.isArray(t)}function Ul(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Wo(t,e,n,r){if(typeof e=="function"){const[s,i]=Ul(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Ul(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Is(t,e,n){const r=t.getProps();return Wo(r,e,n!==void 0?n:r.custom,t)}const Ko=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xo=["initial",...Ko],br=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qt=new Set(br),At=t=>t*1e3,Ct=t=>t/1e3,Qx={type:"spring",stiffness:500,damping:25,restSpeed:10},ew=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tw={type:"keyframes",duration:.8},nw={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rw=(t,{keyframes:e})=>e.length>2?tw:Qt.has(t)?t.startsWith("scale")?ew(e[1]):Qx:nw;function Yo(t,e){return t?t[e]||t.default||t:void 0}const sw={skipAnimations:!1,useManualTiming:!1},iw=t=>t!==null;function Ls(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(iw),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const qe=t=>t;let Ui=qe;function ow(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const h=d&&r?e:n;return u&&i.add(c),h.has(c)||h.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const Mr=["read","resolveKeyframes","update","preRender","render","postRender"],aw=40;function Zd(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Mr.reduce((x,y)=>(x[y]=ow(i),x),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=o,h=()=>{const x=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,aw),1),s.timestamp=x,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),f.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(h))},p=()=>{n=!0,r=!0,s.isProcessing||t(h)};return{schedule:Mr.reduce((x,y)=>{const w=o[y];return x[y]=(E,S=!1,R=!1)=>(n||p(),w.schedule(E,S,R)),x},{}),cancel:x=>{for(let y=0;y<Mr.length;y++)o[Mr[y]].cancel(x)},state:s,steps:o}}const{schedule:me,cancel:Ot,state:ke,steps:si}=Zd(typeof requestAnimationFrame<"u"?requestAnimationFrame:qe,!0),Jd=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,lw=1e-7,cw=12;function uw(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=Jd(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>lw&&++a<cw);return o}function Er(t,e,n,r){if(t===e&&n===r)return qe;const s=i=>uw(i,0,1,t,n);return i=>i===0||i===1?i:Jd(s(i),e,r)}const Qd=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,eh=t=>e=>1-t(1-e),th=Er(.33,1.53,.69,.99),qo=eh(th),nh=Qd(qo),rh=t=>(t*=2)<1?.5*qo(t):.5*(2-Math.pow(2,-10*(t-1))),Zo=t=>1-Math.sin(Math.acos(t)),sh=eh(Zo),ih=Qd(Zo),oh=t=>/^0[^.\s]+$/u.test(t);function dw(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||oh(t):!0}const ah=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),lh=t=>e=>typeof e=="string"&&e.startsWith(t),ch=lh("--"),hw=lh("var(--"),Jo=t=>hw(t)?fw.test(t.split("/*")[0].trim()):!1,fw=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,mw=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pw(t){const e=mw.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function uh(t,e,n=1){const[r,s]=pw(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return ah(o)?parseFloat(o):o}return Jo(s)?uh(s,e,n+1):s}const Pt=(t,e,n)=>n>e?e:n<t?t:n,kn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},cr={...kn,transform:t=>Pt(0,1,t)},$r={...kn,default:1},Sr=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Lt=Sr("deg"),vt=Sr("%"),re=Sr("px"),gw=Sr("vh"),_w=Sr("vw"),zl={...vt,parse:t=>vt.parse(t)/100,transform:t=>vt.transform(t*100)},yw=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Wl=t=>t===kn||t===re,Kl=(t,e)=>parseFloat(t.split(", ")[e]),Xl=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Kl(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?Kl(i[1],t):0}},vw=new Set(["x","y","z"]),xw=br.filter(t=>!vw.has(t));function ww(t){const e=[];return xw.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Sn={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Xl(4,13),y:Xl(5,14)};Sn.translateX=Sn.x;Sn.translateY=Sn.y;const dh=t=>e=>e.test(t),bw={test:t=>t==="auto",parse:t=>t},hh=[kn,re,vt,Lt,_w,gw,bw],Yl=t=>hh.find(dh(t)),qt=new Set;let zi=!1,Wi=!1;function fh(){if(Wi){const t=Array.from(qt).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=ww(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Wi=!1,zi=!1,qt.forEach(t=>t.complete()),qt.clear()}function mh(){qt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Wi=!0)})}function Ew(){mh(),fh()}class Qo{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(qt.add(this),zi||(zi=!0,me.read(mh),me.resolveKeyframes(fh))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),qt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,qt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Zn=t=>Math.round(t*1e5)/1e5,ea=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Sw(t){return t==null}const Tw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ta=(t,e)=>n=>!!(typeof n=="string"&&Tw.test(n)&&n.startsWith(t)||e&&!Sw(n)&&Object.prototype.hasOwnProperty.call(n,e)),ph=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(ea);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Aw=t=>Pt(0,255,t),ii={...kn,transform:t=>Math.round(Aw(t))},Wt={test:ta("rgb","red"),parse:ph("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ii.transform(t)+", "+ii.transform(e)+", "+ii.transform(n)+", "+Zn(cr.transform(r))+")"};function Cw(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ki={test:ta("#"),parse:Cw,transform:Wt.transform},hn={test:ta("hsl","hue"),parse:ph("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vt.transform(Zn(e))+", "+vt.transform(Zn(n))+", "+Zn(cr.transform(r))+")"},Oe={test:t=>Wt.test(t)||Ki.test(t)||hn.test(t),parse:t=>Wt.test(t)?Wt.parse(t):hn.test(t)?hn.parse(t):Ki.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Wt.transform(t):hn.transform(t)},Rw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Pw(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ea))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Rw))===null||n===void 0?void 0:n.length)||0)>0}const gh="number",_h="color",Nw="var",Iw="var(",ql="${}",Lw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ur(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Lw,l=>(Oe.test(l)?(r.color.push(i),s.push(_h),n.push(Oe.parse(l))):l.startsWith(Iw)?(r.var.push(i),s.push(Nw),n.push(l)):(r.number.push(i),s.push(gh),n.push(parseFloat(l))),++i,ql)).split(ql);return{values:n,split:a,indexes:r,types:s}}function yh(t){return ur(t).values}function vh(t){const{split:e,types:n}=ur(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===gh?i+=Zn(s[o]):a===_h?i+=Oe.transform(s[o]):i+=s[o]}return i}}const kw=t=>typeof t=="number"?0:t;function jw(t){const e=yh(t);return vh(t)(e.map(kw))}const Mt={test:Pw,parse:yh,createTransformer:vh,getAnimatableNone:jw},Dw=new Set(["brightness","contrast","saturate","opacity"]);function Ow(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ea)||[];if(!r)return t;const s=n.replace(r,"");let i=Dw.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Mw=/\b([a-z-]*)\(.*?\)/gu,Xi={...Mt,getAnimatableNone:t=>{const e=t.match(Mw);return e?e.map(Ow).join(" "):t}},$w={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},Vw={rotate:Lt,rotateX:Lt,rotateY:Lt,rotateZ:Lt,scale:$r,scaleX:$r,scaleY:$r,scaleZ:$r,skew:Lt,skewX:Lt,skewY:Lt,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:cr,originX:zl,originY:zl,originZ:re},Zl={...kn,transform:Math.round},na={...$w,...Vw,zIndex:Zl,size:re,fillOpacity:cr,strokeOpacity:cr,numOctaves:Zl},Bw={...na,color:Oe,backgroundColor:Oe,outlineColor:Oe,fill:Oe,stroke:Oe,borderColor:Oe,borderTopColor:Oe,borderRightColor:Oe,borderBottomColor:Oe,borderLeftColor:Oe,filter:Xi,WebkitFilter:Xi},ra=t=>Bw[t];function xh(t,e){let n=ra(t);return n!==Xi&&(n=Mt),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Fw=new Set(["auto","none","0"]);function Hw(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!Fw.has(i)&&ur(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=xh(n,s)}class wh extends Qo{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Jo(c))){const u=uh(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!yw.has(r)||e.length!==2)return;const[s,i]=e,o=Yl(s),a=Yl(i);if(o!==a)if(Wl(o)&&Wl(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)dw(e[s])&&r.push(s);r.length&&Hw(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sn[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Sn[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function sa(t){return typeof t=="function"}let qr;function Gw(){qr=void 0}const xt={now:()=>(qr===void 0&&xt.set(ke.isProcessing||sw.useManualTiming?ke.timestamp:performance.now()),qr),set:t=>{qr=t,queueMicrotask(Gw)}},Jl=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Mt.test(t)||t==="0")&&!t.startsWith("url("));function Uw(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function zw(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Jl(s,e),a=Jl(i,e);return!o||!a?!1:Uw(t)||(n==="spring"||sa(n))&&r}const Ww=40;class bh{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=xt.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Ww?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ew(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=xt.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!zw(e,r,s,i))if(o)this.options.duration=0;else{l==null||l(Ls(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Tn=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Eh=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(Tn(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function Sh(t,e){return e?t*(1e3/e):0}const Kw=5;function Th(t,e,n){const r=Math.max(e-Kw,0);return Sh(n-t(r),e-r)}const xe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oi=.001;function Xw({duration:t=xe.duration,bounce:e=xe.bounce,velocity:n=xe.velocity,mass:r=xe.mass}){let s,i,o=1-e;o=Pt(xe.minDamping,xe.maxDamping,o),t=Pt(xe.minDuration,xe.maxDuration,Ct(t)),o<1?(s=c=>{const u=c*o,d=u*t,f=u-n,h=Yi(c,o),p=Math.exp(-d);return oi-f/h*p},i=c=>{const d=c*o*t,f=d*n+n,h=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-d),_=Yi(Math.pow(c,2),o);return(-s(c)+oi>0?-1:1)*((f-h)*p)/_}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-oi+u*d},i=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=qw(s,i,a);if(t=At(t),isNaN(l))return{stiffness:xe.stiffness,damping:xe.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Yw=12;function qw(t,e,n){let r=n;for(let s=1;s<Yw;s++)r=r-t(r)/e(r);return r}function Yi(t,e){return t*Math.sqrt(1-e*e)}const qi=2e4;function Ah(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<qi;)e+=n,r=t.next(e);return e>=qi?1/0:e}const Zw=["duration","bounce"],Jw=["stiffness","damping","mass"];function Ql(t,e){return e.some(n=>t[n]!==void 0)}function Qw(t){let e={velocity:xe.velocity,stiffness:xe.stiffness,damping:xe.damping,mass:xe.mass,isResolvedFromDuration:!1,...t};if(!Ql(t,Jw)&&Ql(t,Zw))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Pt(.05,1,1-t.bounce)*Math.sqrt(s);e={...e,mass:xe.mass,stiffness:s,damping:i}}else{const n=Xw(t);e={...e,...n,mass:xe.mass},e.isResolvedFromDuration=!0}return e}function Ch(t=xe.visualDuration,e=xe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=Qw({...n,velocity:-Ct(n.velocity||0)}),p=f||0,_=c/(2*Math.sqrt(l*u)),g=o-i,x=Ct(Math.sqrt(l/u)),y=Math.abs(g)<5;r||(r=y?xe.restSpeed.granular:xe.restSpeed.default),s||(s=y?xe.restDelta.granular:xe.restDelta.default);let w;if(_<1){const S=Yi(x,_);w=R=>{const k=Math.exp(-_*x*R);return o-k*((p+_*x*g)/S*Math.sin(S*R)+g*Math.cos(S*R))}}else if(_===1)w=S=>o-Math.exp(-x*S)*(g+(p+x*g)*S);else{const S=x*Math.sqrt(_*_-1);w=R=>{const k=Math.exp(-_*x*R),P=Math.min(S*R,300);return o-k*((p+_*x*g)*Math.sinh(P)+S*g*Math.cosh(P))/S}}const E={calculatedDuration:h&&d||null,next:S=>{const R=w(S);if(h)a.done=S>=d;else{let k=0;_<1&&(k=S===0?At(p):Th(w,S,R));const P=Math.abs(k)<=r,L=Math.abs(o-R)<=s;a.done=P&&L}return a.value=a.done?o:R,a},toString:()=>{const S=Math.min(Ah(E),qi),R=Eh(k=>E.next(S*k).value,S,30);return S+"ms "+R}};return E}function ec({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},h=P=>a!==void 0&&P<a||l!==void 0&&P>l,p=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let _=n*e;const g=d+_,x=o===void 0?g:o(g);x!==g&&(_=x-d);const y=P=>-_*Math.exp(-P/r),w=P=>x+y(P),E=P=>{const L=y(P),V=w(P);f.done=Math.abs(L)<=c,f.value=f.done?x:V};let S,R;const k=P=>{h(f.value)&&(S=P,R=Ch({keyframes:[f.value,p(f.value)],velocity:Th(w,P,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:P=>{let L=!1;return!R&&S===void 0&&(L=!0,E(P),k(P)),S!==void 0&&P>=S?R.next(P-S):(!L&&E(P),f)}}}const eb=Er(.42,0,1,1),tb=Er(0,0,.58,1),Rh=Er(.42,0,.58,1),nb=t=>Array.isArray(t)&&typeof t[0]!="number",ia=t=>Array.isArray(t)&&typeof t[0]=="number",tc={linear:qe,easeIn:eb,easeInOut:Rh,easeOut:tb,circIn:Zo,circInOut:ih,circOut:sh,backIn:qo,backInOut:nh,backOut:th,anticipate:rh},nc=t=>{if(ia(t)){Ui(t.length===4);const[e,n,r,s]=t;return Er(e,n,r,s)}else if(typeof t=="string")return Ui(tc[t]!==void 0),tc[t];return t},rb=(t,e)=>n=>e(t(n)),Tr=(...t)=>t.reduce(rb),ye=(t,e,n)=>t+(e-t)*n;function ai(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function sb({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=ai(l,a,t+1/3),i=ai(l,a,t),o=ai(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function ns(t,e){return n=>n>0?e:t}const li=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},ib=[Ki,Wt,hn],ob=t=>ib.find(e=>e.test(t));function rc(t){const e=ob(t);if(!e)return!1;let n=e.parse(t);return e===hn&&(n=sb(n)),n}const sc=(t,e)=>{const n=rc(t),r=rc(e);if(!n||!r)return ns(t,e);const s={...n};return i=>(s.red=li(n.red,r.red,i),s.green=li(n.green,r.green,i),s.blue=li(n.blue,r.blue,i),s.alpha=ye(n.alpha,r.alpha,i),Wt.transform(s))},Zi=new Set(["none","hidden"]);function ab(t,e){return Zi.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function lb(t,e){return n=>ye(t,e,n)}function oa(t){return typeof t=="number"?lb:typeof t=="string"?Jo(t)?ns:Oe.test(t)?sc:db:Array.isArray(t)?Ph:typeof t=="object"?Oe.test(t)?sc:cb:ns}function Ph(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>oa(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function cb(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=oa(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function ub(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const db=(t,e)=>{const n=Mt.createTransformer(e),r=ur(t),s=ur(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Zi.has(t)&&!s.values.length||Zi.has(e)&&!r.values.length?ab(t,e):Tr(Ph(ub(r,s),s.values),n):ns(t,e)};function Nh(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ye(t,e,n):oa(t)(t,e)}function hb(t,e,n){const r=[],s=n||Nh,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||qe:e;a=Tr(l,a)}r.push(a)}return r}function fb(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Ui(i===e.length),i===1)return()=>e[0];if(i===2&&t[0]===t[1])return()=>e[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=hb(e,r,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=Tn(t[u],t[u+1],c);return o[u](d)};return n?c=>l(Pt(t[0],t[i-1],c)):l}function mb(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Tn(0,e,r);t.push(ye(n,1,s))}}function pb(t){const e=[0];return mb(e,t.length-1),e}function gb(t,e){return t.map(n=>n*e)}function _b(t,e){return t.map(()=>e||Rh).splice(0,t.length-1)}function rs({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=nb(r)?r.map(nc):nc(r),i={done:!1,value:e[0]},o=gb(n&&n.length===e.length?n:pb(e),t),a=fb(o,e,{ease:Array.isArray(s)?s:_b(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const yb=t=>{const e=({timestamp:n})=>t(n);return{start:()=>me.update(e,!0),stop:()=>Ot(e),now:()=>ke.isProcessing?ke.timestamp:xt.now()}},vb={decay:ec,inertia:ec,tween:rs,keyframes:rs,spring:Ch},xb=t=>t/100;class aa extends bh{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||Qo,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=sa(n)?n:vb[n]||rs;let l,c;a!==rs&&typeof e[0]!="number"&&(l=Tr(xb,Nh(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Ah(u));const{calculatedDuration:d}=u,f=d+s,h=f*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:h,repeatType:p,repeatDelay:_,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?x<0:x>u;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let w=this.currentTime,E=i;if(h){const P=Math.min(this.currentTime,u)/d;let L=Math.floor(P),V=P%1;!V&&P>=1&&(V=1),V===1&&L--,L=Math.min(L,h+1),!!(L%2)&&(p==="reverse"?(V=1-V,_&&(V-=_/d)):p==="mirror"&&(E=o)),w=Pt(0,1,V)*d}const S=y?{done:!1,value:l[0]}:E.next(w);a&&(S.value=a(S.value));let{done:R}=S;!y&&c!==null&&(R=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return k&&s!==void 0&&(S.value=Ls(l,this.options,s)),g&&g(S.value),k&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Ct(e.calculatedDuration):0}get time(){return Ct(this.currentTime)}set time(e){e=At(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ct(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=yb,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const wb=new Set(["opacity","clipPath","filter","transform"]);function la(t){let e;return()=>(e===void 0&&(e=t()),e)}const bb={linearEasing:void 0};function Eb(t,e){const n=la(t);return()=>{var r;return(r=bb[e])!==null&&r!==void 0?r:n()}}const ss=Eb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function Ih(t){return!!(typeof t=="function"&&ss()||!t||typeof t=="string"&&(t in Ji||ss())||ia(t)||Array.isArray(t)&&t.every(Ih))}const zn=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ji={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zn([0,.65,.55,1]),circOut:zn([.55,0,1,.45]),backIn:zn([.31,.01,.66,-.59]),backOut:zn([.33,1.53,.69,.99])};function Lh(t,e){if(t)return typeof t=="function"&&ss()?Eh(t,e):ia(t)?zn(t):Array.isArray(t)?t.map(n=>Lh(n,e)||Ji.easeOut):Ji[t]}function Sb(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Lh(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function ic(t,e){t.timeline=e,t.onfinish=null}const Tb=la(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),is=10,Ab=2e4;function Cb(t){return sa(t.type)||t.type==="spring"||!Ih(t.ease)}function Rb(t,e){const n=new aa({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<Ab;)r=n.sample(i),s.push(r.value),i+=is;return{times:void 0,keyframes:s,duration:i-is,ease:"linear"}}const kh={anticipate:rh,backInOut:nh,circInOut:ih};function Pb(t){return t in kh}class oc extends bh{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new wh(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:s=300,times:i,ease:o,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&ss()&&Pb(o)&&(o=kh[o]),Cb(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:_,...g}=this.options,x=Rb(e,g);e=x.keyframes,e.length===1&&(e[1]=e[0]),s=x.duration,i=x.times,o=x.ease,a="keyframes"}const d=Sb(l.owner.current,c,e,{...this.options,duration:s,times:i,ease:o});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(ic(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(Ls(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:s,times:i,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ct(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ct(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=At(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return qe;const{animation:r}=n;ic(r,e)}return qe}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...h}=this.options,p=new aa({...h,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),_=At(this.time);c.setWithVelocity(p.sample(_-is).value,p.sample(_).value,is)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;return Tb()&&r&&wb.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const Nb=la(()=>window.ScrollTimeline!==void 0);class Ib{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>Nb()&&s.attachTimeline?s.attachTimeline(e):n(s));return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Lb({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const ca=(t,e,n,r={},s,i)=>o=>{const a=Yo(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-At(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};Lb(a)||(u={...u,...rw(t,u)}),u.duration&&(u.duration=At(u.duration)),u.repeatDelay&&(u.repeatDelay=At(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const f=Ls(u.keyframes,a);if(f!==void 0)return me.update(()=>{u.onUpdate(f),u.onComplete()}),new Ib([])}return!i&&oc.supports(u)?new oc(u):new aa(u)},kb=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),jb=t=>Gi(t)?t[t.length-1]||0:t;function ua(t,e){t.indexOf(e)===-1&&t.push(e)}function da(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ha{constructor(){this.subscriptions=[]}add(e){return ua(this.subscriptions,e),()=>da(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ac=30,Db=t=>!isNaN(parseFloat(t));class Ob{constructor(e,n={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=xt.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=xt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Db(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ha);const r=this.events[e].add(n);return e==="change"?()=>{r(),me.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=xt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ac)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ac);return Sh(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dr(t,e){return new Ob(t,e)}function Mb(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,dr(n))}function $b(t,e){const n=Is(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=jb(i[o]);Mb(t,o,a)}}const fa=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Vb="framerAppearId",jh="data-"+fa(Vb);function Dh(t){return t.props[jh]}const Me=t=>!!(t&&t.getVelocity);function Bb(t){return!!(Me(t)&&t.add)}function Qi(t,e){const n=t.getValue("willChange");if(Bb(n))return n.add(e)}function Fb({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Oh(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const f=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),h=l[d];if(h===void 0||u&&Fb(u,d))continue;const p={delay:n,...Yo(o||{},d)};let _=!1;if(window.MotionHandoffAnimation){const x=Dh(t);if(x){const y=window.MotionHandoffAnimation(x,d,me);y!==null&&(p.startTime=y,_=!0)}}Qi(t,d),f.start(ca(d,f,h,t.shouldReduceMotion&&Qt.has(d)?{type:!1}:p,t,_));const g=f.animation;g&&c.push(g)}return a&&Promise.all(c).then(()=>{me.update(()=>{a&&$b(t,a)})}),c}function eo(t,e,n={}){var r;const s=Is(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(Oh(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=i;return Hb(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function Hb(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Gb).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(eo(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Gb(t,e){return t.sortNodePosition(e)}function Ub(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>eo(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=eo(t,e,n);else{const s=typeof e=="function"?Is(t,e,n.custom):e;r=Promise.all(Oh(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const zb=Xo.length;function Mh(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Mh(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<zb;n++){const r=Xo[n],s=t.props[r];(lr(s)||s===!1)&&(e[r]=s)}return e}const Wb=[...Ko].reverse(),Kb=Ko.length;function Xb(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Ub(t,n,r)))}function Yb(t){let e=Xb(t),n=lc(),r=!0;const s=l=>(c,u)=>{var d;const f=Is(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,..._}=f;c={...c,..._,...p}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=Mh(t.parent)||{},d=[],f=new Set;let h={},p=1/0;for(let g=0;g<Kb;g++){const x=Wb[g],y=n[x],w=c[x]!==void 0?c[x]:u[x],E=lr(w),S=x===l?y.isActive:null;S===!1&&(p=g);let R=w===u[x]&&w!==c[x]&&E;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),y.protectedKeys={...h},!y.isActive&&S===null||!w&&!y.prevProp||Ns(w)||typeof w=="boolean")continue;const k=qb(y.prevProp,w);let P=k||x===l&&y.isActive&&!R&&E||g>p&&E,L=!1;const V=Array.isArray(w)?w:[w];let j=V.reduce(s(x),{});S===!1&&(j={});const{prevResolvedValues:O={}}=y,z={...O,...j},A=$=>{P=!0,f.has($)&&(L=!0,f.delete($)),y.needsAnimating[$]=!0;const H=t.getValue($);H&&(H.liveStyle=!1)};for(const $ in z){const H=j[$],T=O[$];if(h.hasOwnProperty($))continue;let B=!1;Gi(H)&&Gi(T)?B=!qd(H,T):B=H!==T,B?H!=null?A($):f.add($):H!==void 0&&f.has($)?A($):y.protectedKeys[$]=!0}y.prevProp=w,y.prevResolvedValues=j,y.isActive&&(h={...h,...j}),r&&t.blockInitialAnimation&&(P=!1),P&&(!(R&&k)||L)&&d.push(...V.map($=>({animation:$,options:{type:x}})))}if(f.size){const g={};f.forEach(x=>{const y=t.getBaseTarget(x),w=t.getValue(x);w&&(w.liveStyle=!0),g[x]=y??null}),d.push({animation:g})}let _=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=lc(),r=!0}}}function qb(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!qd(e,t):!1}function Vt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lc(){return{animate:Vt(!0),whileInView:Vt(),whileHover:Vt(),whileTap:Vt(),whileDrag:Vt(),whileFocus:Vt(),exit:Vt()}}class $t{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Zb extends $t{constructor(e){super(e),e.animationState||(e.animationState=Yb(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ns(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Jb=0;class Qb extends $t{constructor(){super(...arguments),this.id=Jb++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const eE={animation:{Feature:Zb},exit:{Feature:Qb}},ut={x:!1,y:!1};function $h(){return ut.x||ut.y}function tE(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Vh(t,e){const n=tE(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function cc(t){return e=>{e.pointerType==="touch"||$h()||t(e)}}function nE(t,e,n={}){const[r,s,i]=Vh(t,n),o=cc(a=>{const{target:l}=a,c=e(a);if(!c||!l)return;const u=cc(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const ma=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Wn=new WeakSet;function uc(t){return e=>{e.key==="Enter"&&t(e)}}function ci(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const rE=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=uc(()=>{if(Wn.has(n))return;ci(n,"down");const s=uc(()=>{ci(n,"up")}),i=()=>ci(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)},sE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iE(t){return sE.has(t.tagName)||t.tabIndex!==-1}const Bh=(t,e)=>e?t===e?!0:Bh(t,e.parentElement):!1;function dc(t){return ma(t)&&!$h()}function oE(t,e,n={}){const[r,s,i]=Vh(t,n),o=a=>{const l=a.currentTarget;if(!dc(a)||Wn.has(l))return;Wn.add(l);const c=e(a),u=(h,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!dc(h)||!Wn.has(l))&&(Wn.delete(l),c&&c(h,{success:p}))},d=h=>{u(h,n.useGlobalTarget||Bh(l,h.target))},f=h=>{u(h,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{iE(a)||(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>rE(c,s),s)}),i}function aE(t){return t==="x"||t==="y"?ut[t]?null:(ut[t]=!0,()=>{ut[t]=!1}):ut.x||ut.y?null:(ut.x=ut.y=!0,()=>{ut.x=ut.y=!1})}function Ar(t){return{point:{x:t.pageX,y:t.pageY}}}const lE=t=>e=>ma(e)&&t(e,Ar(e));function hr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Jn(t,e,n,r){return hr(t,e,lE(n),r)}const hc=(t,e)=>Math.abs(t-e);function cE(t,e){const n=hc(t.x,e.x),r=hc(t.y,e.y);return Math.sqrt(n**2+r**2)}class Fh{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=di(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=cE(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:_}=ke;this.history.push({...p,timestamp:_});const{onStart:g,onMove:x}=this.handlers;f||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ui(f,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=di(d.type==="pointercancel"?this.lastMoveEventInfo:ui(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,g),p&&p(d,g)},!ma(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Ar(e),a=ui(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ke;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,di(a,this.history)),this.removeListeners=Tr(Jn(this.contextWindow,"pointermove",this.handlePointerMove),Jn(this.contextWindow,"pointerup",this.handlePointerUp),Jn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ot(this.updatePoint)}}function ui(t,e){return e?{point:e(t.point)}:t}function fc(t,e){return{x:t.x-e.x,y:t.y-e.y}}function di({point:t},e){return{point:t,delta:fc(t,Hh(e)),offset:fc(t,uE(e)),velocity:dE(e,.1)}}function uE(t){return t[0]}function Hh(t){return t[t.length-1]}function dE(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Hh(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>At(e)));)n--;if(!r)return{x:0,y:0};const i=Ct(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function fn(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const Gh=1e-4,hE=1-Gh,fE=1+Gh,Uh=.01,mE=0-Uh,pE=0+Uh;function Ze(t){return t.max-t.min}function gE(t,e,n){return Math.abs(t-e)<=n}function mc(t,e,n,r=.5){t.origin=r,t.originPoint=ye(e.min,e.max,t.origin),t.scale=Ze(n)/Ze(e),t.translate=ye(n.min,n.max,t.origin)-t.originPoint,(t.scale>=hE&&t.scale<=fE||isNaN(t.scale))&&(t.scale=1),(t.translate>=mE&&t.translate<=pE||isNaN(t.translate))&&(t.translate=0)}function Qn(t,e,n,r){mc(t.x,e.x,n.x,r?r.originX:void 0),mc(t.y,e.y,n.y,r?r.originY:void 0)}function pc(t,e,n){t.min=n.min+e.min,t.max=t.min+Ze(e)}function _E(t,e,n){pc(t.x,e.x,n.x),pc(t.y,e.y,n.y)}function gc(t,e,n){t.min=e.min-n.min,t.max=t.min+Ze(e)}function er(t,e,n){gc(t.x,e.x,n.x),gc(t.y,e.y,n.y)}function yE(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ye(n,t,r.max):Math.min(t,n)),t}function _c(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vE(t,{top:e,left:n,bottom:r,right:s}){return{x:_c(t.x,n,s),y:_c(t.y,e,r)}}function yc(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xE(t,e){return{x:yc(t.x,e.x),y:yc(t.y,e.y)}}function wE(t,e){let n=.5;const r=Ze(t),s=Ze(e);return s>r?n=Tn(e.min,e.max-r,t.min):r>s&&(n=Tn(t.min,t.max-s,e.min)),Pt(0,1,n)}function bE(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const to=.35;function EE(t=to){return t===!1?t=0:t===!0&&(t=to),{x:vc(t,"left","right"),y:vc(t,"top","bottom")}}function vc(t,e,n){return{min:xc(t,e),max:xc(t,n)}}function xc(t,e){return typeof t=="number"?t:t[e]||0}const wc=()=>({translate:0,scale:1,origin:0,originPoint:0}),mn=()=>({x:wc(),y:wc()}),bc=()=>({min:0,max:0}),Se=()=>({x:bc(),y:bc()});function nt(t){return[t("x"),t("y")]}function zh({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function SE({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function TE(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hi(t){return t===void 0||t===1}function no({scale:t,scaleX:e,scaleY:n}){return!hi(t)||!hi(e)||!hi(n)}function Ft(t){return no(t)||Wh(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Wh(t){return Ec(t.x)||Ec(t.y)}function Ec(t){return t&&t!=="0%"}function os(t,e,n){const r=t-n,s=e*r;return n+s}function Sc(t,e,n,r,s){return s!==void 0&&(t=os(t,s,r)),os(t,n,r)+e}function ro(t,e=0,n=1,r,s){t.min=Sc(t.min,e,n,r,s),t.max=Sc(t.max,e,n,r,s)}function Kh(t,{x:e,y:n}){ro(t.x,e.translate,e.scale,e.originPoint),ro(t.y,n.translate,n.scale,n.originPoint)}const Tc=.999999999999,Ac=1.0000000000001;function AE(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&gn(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Kh(t,o)),r&&Ft(i.latestValues)&&gn(t,i.latestValues))}e.x<Ac&&e.x>Tc&&(e.x=1),e.y<Ac&&e.y>Tc&&(e.y=1)}function pn(t,e){t.min=t.min+e,t.max=t.max+e}function Cc(t,e,n,r,s=.5){const i=ye(t.min,t.max,s);ro(t,e,n,i,r)}function gn(t,e){Cc(t.x,e.x,e.scaleX,e.scale,e.originX),Cc(t.y,e.y,e.scaleY,e.scale,e.originY)}function Xh(t,e){return zh(TE(t.getBoundingClientRect(),e))}function CE(t,e,n){const r=Xh(t,n),{scroll:s}=e;return s&&(pn(r.x,s.offset.x),pn(r.y,s.offset.y)),r}const Yh=({current:t})=>t?t.ownerDocument.defaultView:null,RE=new WeakMap;class PE{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Se(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ar(u).point)},i=(u,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aE(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nt(g=>{let x=this.getAxisMotionValue(g).get()||0;if(vt.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[g];w&&(x=Ze(w)*(parseFloat(x)/100))}}this.originPoint[g]=x}),p&&me.postRender(()=>p(u,d)),Qi(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:_}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:g}=d;if(h&&this.currentDirection===null){this.currentDirection=NE(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),_&&_(u,d)},a=(u,d)=>this.stop(u,d),l=()=>nt(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Fh(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Yh(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&me.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Vr(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=yE(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&fn(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=vE(s.layoutBox,n):this.constraints=!1,this.elastic=EE(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&nt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=bE(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!fn(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=CE(r,s.root,this.visualElement.getTransformPagePoint());let o=xE(s.layout.layoutBox,i);if(n){const a=n(SE(o));this.hasMutatedConstraints=!!a,a&&(o=zh(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=nt(u=>{if(!Vr(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=s?200:1e6,h=s?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Qi(this.visualElement,e),r.start(ca(e,r,0,n,this.visualElement,!1))}stopAnimation(){nt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nt(n=>{const{drag:r}=this.getProps();if(!Vr(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ye(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!fn(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};nt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=wE({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nt(o=>{if(!Vr(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ye(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;RE.set(this.visualElement,this);const e=this.visualElement.current,n=Jn(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();fn(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),me.read(r);const o=hr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(nt(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=to,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Vr(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function NE(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class IE extends $t{constructor(e){super(e),this.removeGroupControls=qe,this.removeListeners=qe,this.controls=new PE(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rc=t=>(e,n)=>{t&&me.postRender(()=>t(e,n))};class LE extends $t{constructor(){super(...arguments),this.removePointerDownListener=qe}onPointerDown(e){this.session=new Fh(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yh(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Rc(e),onStart:Rc(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&me.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Jn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ks=v.createContext(null);function kE(){const t=v.useContext(ks);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=v.useId();v.useEffect(()=>r(s),[]);const i=v.useCallback(()=>n&&n(s),[s,n]);return!e&&n?[!1,i]:[!0]}const pa=v.createContext({}),qh=v.createContext({}),Zr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pc(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=Pc(t,e.target.x),r=Pc(t,e.target.y);return`${n}% ${r}%`}},jE={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Mt.parse(t);if(s.length>5)return r;const i=Mt.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=ye(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}},as={};function DE(t){Object.assign(as,t)}const{schedule:ga,cancel:ZN}=Zd(queueMicrotask,!1);class OE extends v.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;DE(ME),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Zr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||me.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ga.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zh(t){const[e,n]=kE(),r=v.useContext(pa);return m.jsx(OE,{...t,layoutGroup:r,switchLayoutGroup:v.useContext(qh),isPresent:e,safeToRemove:n})}const ME={borderRadius:{...Vn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vn,borderTopRightRadius:Vn,borderBottomLeftRadius:Vn,borderBottomRightRadius:Vn,boxShadow:jE},Jh=["TopLeft","TopRight","BottomLeft","BottomRight"],$E=Jh.length,Nc=t=>typeof t=="string"?parseFloat(t):t,Ic=t=>typeof t=="number"||re.test(t);function VE(t,e,n,r,s,i){s?(t.opacity=ye(0,n.opacity!==void 0?n.opacity:1,BE(r)),t.opacityExit=ye(e.opacity!==void 0?e.opacity:1,0,FE(r))):i&&(t.opacity=ye(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<$E;o++){const a=`border${Jh[o]}Radius`;let l=Lc(e,a),c=Lc(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Ic(l)===Ic(c)?(t[a]=Math.max(ye(Nc(l),Nc(c),r),0),(vt.test(c)||vt.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ye(e.rotate||0,n.rotate||0,r))}function Lc(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BE=Qh(0,.5,sh),FE=Qh(.5,.95,qe);function Qh(t,e,n){return r=>r<t?0:r>e?1:n(Tn(t,e,r))}function kc(t,e){t.min=e.min,t.max=e.max}function et(t,e){kc(t.x,e.x),kc(t.y,e.y)}function jc(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Dc(t,e,n,r,s){return t-=e,t=os(t,1/n,r),s!==void 0&&(t=os(t,1/s,r)),t}function HE(t,e=0,n=1,r=.5,s,i=t,o=t){if(vt.test(e)&&(e=parseFloat(e),e=ye(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ye(i.min,i.max,r);t===i&&(a-=e),t.min=Dc(t.min,e,n,a,s),t.max=Dc(t.max,e,n,a,s)}function Oc(t,e,[n,r,s],i,o){HE(t,e[n],e[r],e[s],e.scale,i,o)}const GE=["x","scaleX","originX"],UE=["y","scaleY","originY"];function Mc(t,e,n,r){Oc(t.x,e,GE,n?n.x:void 0,r?r.x:void 0),Oc(t.y,e,UE,n?n.y:void 0,r?r.y:void 0)}function $c(t){return t.translate===0&&t.scale===1}function ef(t){return $c(t.x)&&$c(t.y)}function Vc(t,e){return t.min===e.min&&t.max===e.max}function zE(t,e){return Vc(t.x,e.x)&&Vc(t.y,e.y)}function Bc(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function tf(t,e){return Bc(t.x,e.x)&&Bc(t.y,e.y)}function Fc(t){return Ze(t.x)/Ze(t.y)}function Hc(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class WE{constructor(){this.members=[]}add(e){ua(this.members,e),e.scheduleRender()}remove(e){if(da(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function KE(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:h,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const XE=(t,e)=>t.depth-e.depth;class YE{constructor(){this.children=[],this.isDirty=!1}add(e){ua(this.children,e),this.isDirty=!0}remove(e){da(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XE),this.isDirty=!1,this.children.forEach(e)}}function Jr(t){const e=Me(t)?t.get():t;return kb(e)?e.toValue():e}function qE(t,e){const n=xt.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Ot(r),t(i-e))};return me.read(r,!0),()=>Ot(r)}function ZE(t){return t instanceof SVGElement&&t.tagName!=="svg"}function JE(t,e,n){const r=Me(t)?t:dr(t);return r.start(ca("",r,e,n)),r.animation}const Ht={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Kn=typeof window<"u"&&window.MotionDebug!==void 0,fi=["","X","Y","Z"],QE={visibility:"hidden"},Gc=1e3;let eS=0;function mi(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function nf(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Dh(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",me,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&nf(r)}function rf({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=eS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Kn&&(Ht.totalNodes=Ht.resolvedTargetDeltas=Ht.recalculatedProjection=0),this.nodes.forEach(rS),this.nodes.forEach(lS),this.nodes.forEach(cS),this.nodes.forEach(sS),Kn&&window.MotionDebug.record(Ht)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new YE)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ha),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ZE(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=qE(f,250),Zr.hasAnimatedSinceResize&&(Zr.hasAnimatedSinceResize=!1,this.nodes.forEach(zc))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||mS,{onLayoutAnimationStart:g,onLayoutAnimationComplete:x}=u.getProps(),y=!this.targetLayout||!tf(this.targetLayout,p)||h,w=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const E={...Yo(_,"layout"),onPlay:g,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||zc(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ot(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uS),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nf(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Uc);return}this.isUpdating||this.nodes.forEach(oS),this.isUpdating=!1,this.nodes.forEach(aS),this.nodes.forEach(tS),this.nodes.forEach(nS),this.clearAllSnapshots();const a=xt.now();ke.delta=Pt(0,1e3/60,a-ke.timestamp),ke.timestamp=a,ke.isProcessing=!0,si.update.process(ke),si.preRender.process(ke),si.render.process(ke),ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ga.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(iS),this.sharedNodes.forEach(dS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Se(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!ef(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Ft(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),pS(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Se();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(gS))){const{scroll:u}=this.root;u&&(pn(l.x,u.offset.x),pn(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Se();if(et(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&et(l,o),pn(l.x,d.offset.x),pn(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Se();et(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&gn(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ft(u.latestValues)&&gn(l,u.latestValues)}return Ft(this.latestValues)&&gn(l,this.latestValues),l}removeTransform(o){const a=Se();et(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ft(c.latestValues))continue;no(c.latestValues)&&c.updateSnapshot();const u=Se(),d=c.measurePageBox();et(u,d),Mc(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ft(this.latestValues)&&Mc(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=ke.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),er(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),et(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Se(),this.targetWithTransforms=Se()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_E(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):et(this.target,this.layout.layoutBox),Kh(this.target,this.targetDelta)):et(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),er(this.relativeTargetOrigin,this.target,h.target),et(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kn&&Ht.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||no(this.parent.latestValues)||Wh(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ke.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;et(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;AE(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Se());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jc(this.prevProjectionDelta.x,this.projectionDelta.x),jc(this.prevProjectionDelta.y,this.projectionDelta.y)),Qn(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!Hc(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hc(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Kn&&Ht.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mn(),this.projectionDelta=mn(),this.projectionDeltaWithTransform=mn()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=mn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Se(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,_=h!==p,g=this.getStack(),x=!g||g.members.length<=1,y=!!(_&&!x&&this.options.crossfade===!0&&!this.path.some(fS));this.animationProgress=0;let w;this.mixTargetDelta=E=>{const S=E/1e3;Wc(d.x,o.x,S),Wc(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(er(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hS(this.relativeTarget,this.relativeTargetOrigin,f,S),w&&zE(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Se()),et(w,this.relativeTarget)),_&&(this.animationValues=u,VE(u,c,this.latestValues,S,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ot(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{Zr.hasAnimatedSinceResize=!0,this.currentAnimation=JE(0,Gc,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gc),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&sf(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Se();const d=Ze(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Ze(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}et(a,l),gn(a,u),Qn(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new WE),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&mi("z",o,c,this.animationValues);for(let u=0;u<fi.length;u++)mi(`rotate${fi[u]}`,o,c,this.animationValues),mi(`skew${fi[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return QE;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Jr(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Jr(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ft(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=KE(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:h,y:p}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in as){if(f[_]===void 0)continue;const{correct:g,applyTo:x}=as[_],y=c.transform==="none"?f[_]:g(f[_],d);if(x){const w=x.length;for(let E=0;E<w;E++)c[x[E]]=y}else c[_]=y}return this.options.layoutId&&(c.pointerEvents=d===this?Jr(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Uc),this.root.sharedNodes.clear()}}}function tS(t){t.updateLayout()}function nS(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?nt(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=Ze(f);f.min=r[d].min,f.max=f.min+h}):sf(i,n.layoutBox,r)&&nt(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=Ze(r[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const a=mn();Qn(a,r,n.layoutBox);const l=mn();o?Qn(l,t.applyTransform(s,!0),n.measuredBox):Qn(l,r,n.layoutBox);const c=!ef(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=Se();er(p,n.layoutBox,f.layoutBox);const _=Se();er(_,r,h.layoutBox),tf(p,_)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function rS(t){Kn&&Ht.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function sS(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function iS(t){t.clearSnapshot()}function Uc(t){t.clearMeasurements()}function oS(t){t.isLayoutDirty=!1}function aS(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zc(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lS(t){t.resolveTargetDelta()}function cS(t){t.calcProjection()}function uS(t){t.resetSkewAndRotation()}function dS(t){t.removeLeadSnapshot()}function Wc(t,e,n){t.translate=ye(e.translate,0,n),t.scale=ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Kc(t,e,n,r){t.min=ye(e.min,n.min,r),t.max=ye(e.max,n.max,r)}function hS(t,e,n,r){Kc(t.x,e.x,n.x,r),Kc(t.y,e.y,n.y,r)}function fS(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const mS={duration:.45,ease:[.4,0,.1,1]},Xc=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Yc=Xc("applewebkit/")&&!Xc("chrome/")?Math.round:qe;function qc(t){t.min=Yc(t.min),t.max=Yc(t.max)}function pS(t){qc(t.x),qc(t.y)}function sf(t,e,n){return t==="position"||t==="preserve-aspect"&&!gE(Fc(e),Fc(n),.2)}function gS(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const _S=rf({attachResizeListener:(t,e)=>hr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pi={current:void 0},of=rf({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!pi.current){const t=new _S({});t.mount(window),t.setOptions({layoutScroll:!0}),pi.current=t}return pi.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yS={pan:{Feature:LE},drag:{Feature:IE,ProjectionNode:of,MeasureLayout:Zh}};function Zc(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&me.postRender(()=>i(e,Ar(e)))}class vS extends $t{mount(){const{current:e}=this.node;e&&(this.unmount=nE(e,n=>(Zc(this.node,n,"Start"),r=>Zc(this.node,r,"End"))))}unmount(){}}class xS extends $t{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tr(hr(this.node.current,"focus",()=>this.onFocus()),hr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Jc(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&me.postRender(()=>i(e,Ar(e)))}class wS extends $t{mount(){const{current:e}=this.node;e&&(this.unmount=oE(e,n=>(Jc(this.node,n,"Start"),(r,{success:s})=>Jc(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const so=new WeakMap,gi=new WeakMap,bS=t=>{const e=so.get(t.target);e&&e(t)},ES=t=>{t.forEach(bS)};function SS({root:t,...e}){const n=t||document;gi.has(n)||gi.set(n,{});const r=gi.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(ES,{root:t,...e})),r[s]}function TS(t,e,n){const r=SS(e);return so.set(t,n),r.observe(t),()=>{so.delete(t),r.unobserve(t)}}const AS={some:0,all:1};class CS extends $t{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:AS[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return TS(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(RS(e,n))&&this.startObserver()}unmount(){}}function RS({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const PS={inView:{Feature:CS},tap:{Feature:wS},focus:{Feature:xS},hover:{Feature:vS}},NS={layout:{ProjectionNode:of,MeasureLayout:Zh}},_a=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),js=v.createContext({}),ya=typeof window<"u",af=ya?v.useLayoutEffect:v.useEffect,lf=v.createContext({strict:!1});function IS(t,e,n,r,s){var i,o;const{visualElement:a}=v.useContext(js),l=v.useContext(lf),c=v.useContext(ks),u=v.useContext(_a).reducedMotion,d=v.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,h=v.useContext(qh);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&LS(d.current,n,s,h);const p=v.useRef(!1);v.useInsertionEffect(()=>{f&&p.current&&f.update(n,c)});const _=n[jh],g=v.useRef(!!_&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return af(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),ga.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),v.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,_)}),g.current=!1))}),f}function LS(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:cf(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&fn(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function cf(t){if(t)return t.options.allowProjection!==!1?t.projection:cf(t.parent)}function kS(t,e,n){return v.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):fn(n)&&(n.current=r))},[e])}function Ds(t){return Ns(t.animate)||Xo.some(e=>lr(t[e]))}function uf(t){return!!(Ds(t)||t.variants)}function jS(t,e){if(Ds(t)){const{initial:n,animate:r}=t;return{initial:n===!1||lr(n)?n:void 0,animate:lr(r)?r:void 0}}return t.inherit!==!1?e:{}}function DS(t){const{initial:e,animate:n}=jS(t,v.useContext(js));return v.useMemo(()=>({initial:e,animate:n}),[Qc(e),Qc(n)])}function Qc(t){return Array.isArray(t)?t.join(" "):t}const eu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},An={};for(const t in eu)An[t]={isEnabled:e=>eu[t].some(n=>!!e[n])};function OS(t){for(const e in t)An[e]={...An[e],...t[e]}}const MS=Symbol.for("motionComponentSymbol");function $S({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&OS(t);function i(a,l){let c;const u={...v.useContext(_a),...a,layoutId:VS(a)},{isStatic:d}=u,f=DS(a),h=r(a,d);if(!d&&ya){BS();const p=FS(u);c=p.MeasureLayout,f.visualElement=IS(s,h,u,e,p.ProjectionNode)}return m.jsxs(js.Provider,{value:f,children:[c&&f.visualElement?m.jsx(c,{visualElement:f.visualElement,...u}):null,n(s,a,kS(h,f.visualElement,l),h,d,f.visualElement)]})}const o=v.forwardRef(i);return o[MS]=s,o}function VS({layoutId:t}){const e=v.useContext(pa).id;return e&&t!==void 0?e+"-"+t:t}function BS(t,e){v.useContext(lf).strict}function FS(t){const{drag:e,layout:n}=An;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const HS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function va(t){return typeof t!="string"||t.includes("-")?!1:!!(HS.indexOf(t)>-1||/[A-Z]/u.test(t))}function df(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const hf=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ff(t,e,n,r){df(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(hf.has(s)?s:fa(s),e.attrs[s])}function mf(t,{layout:e,layoutId:n}){return Qt.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!as[t]||t==="opacity")}function xa(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(Me(s[o])||e.style&&Me(e.style[o])||mf(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function pf(t,e,n){const r=xa(t,e,n);for(const s in t)if(Me(t[s])||Me(e[s])){const i=br.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function wa(t){const e=v.useRef(null);return e.current===null&&(e.current=t()),e.current}function GS({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:US(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const gf=t=>(e,n)=>{const r=v.useContext(js),s=v.useContext(ks),i=()=>GS(t,e,r,s);return n?i():wa(i)};function US(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=Jr(i[f]);let{initial:o,animate:a}=t;const l=Ds(t),c=uf(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Ns(d)){const f=Array.isArray(d)?d:[d];for(let h=0;h<f.length;h++){const p=Wo(t,f[h]);if(p){const{transitionEnd:_,transition:g,...x}=p;for(const y in x){let w=x[y];if(Array.isArray(w)){const E=u?w.length-1:0;w=w[E]}w!==null&&(s[y]=w)}for(const y in _)s[y]=_[y]}}}return s}const ba=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),_f=()=>({...ba(),attrs:{}}),yf=(t,e)=>e&&typeof t=="number"?e.transform(t):t,zS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WS=br.length;function KS(t,e,n){let r="",s=!0;for(let i=0;i<WS;i++){const o=br[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=yf(a,na[o]);if(!l){s=!1;const u=zS[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Ea(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Qt.has(l)){o=!0;continue}else if(ch(l)){s[l]=c;continue}else{const u=yf(c,na[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=KS(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}function tu(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function XS(t,e,n){const r=tu(e,t.x,t.width),s=tu(n,t.y,t.height);return`${r} ${s}`}const YS={offset:"stroke-dashoffset",array:"stroke-dasharray"},qS={offset:"strokeDashoffset",array:"strokeDasharray"};function ZS(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?YS:qS;t[i.offset]=re.transform(-r);const o=re.transform(e),a=re.transform(n);t[i.array]=`${o} ${a}`}function Sa(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(Ea(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h,dimensions:p}=t;f.transform&&(p&&(h.transform=f.transform),delete f.transform),p&&(s!==void 0||i!==void 0||h.transform)&&(h.transformOrigin=XS(p,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&ZS(f,o,a,l,!1)}const Ta=t=>typeof t=="string"&&t.toLowerCase()==="svg",JS={useVisualState:gf({scrapeMotionValuesFromProps:pf,createRenderState:_f,onMount:(t,e,{renderState:n,latestValues:r})=>{me.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),me.render(()=>{Sa(n,r,Ta(e.tagName),t.transformTemplate),ff(e,n)})}})},QS={useVisualState:gf({scrapeMotionValuesFromProps:xa,createRenderState:ba})};function vf(t,e,n){for(const r in e)!Me(e[r])&&!mf(r,n)&&(t[r]=e[r])}function eT({transformTemplate:t},e){return v.useMemo(()=>{const n=ba();return Ea(n,e,t),Object.assign({},n.vars,n.style)},[e])}function tT(t,e){const n=t.style||{},r={};return vf(r,n,t),Object.assign(r,eT(t,e)),r}function nT(t,e){const n={},r=tT(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const rT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ls(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rT.has(t)}let xf=t=>!ls(t);function sT(t){t&&(xf=e=>e.startsWith("on")?!ls(e):t(e))}try{sT(require("@emotion/is-prop-valid").default)}catch{}function iT(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(xf(s)||n===!0&&ls(s)||!e&&!ls(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function oT(t,e,n,r){const s=v.useMemo(()=>{const i=_f();return Sa(i,e,Ta(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};vf(i,t.style,t),s.style={...i,...s.style}}return s}function aT(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(va(n)?oT:nT)(r,i,o,n),c=iT(r,typeof n=="string",t),u=n!==v.Fragment?{...c,...l,ref:s}:{},{children:d}=r,f=v.useMemo(()=>Me(d)?d.get():d,[d]);return v.createElement(n,{...u,children:f})}}function lT(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...va(r)?JS:QS,preloadedFeatures:t,useRender:aT(s),createVisualElement:e,Component:r};return $S(o)}}const io={current:null},wf={current:!1};function cT(){if(wf.current=!0,!!ya)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>io.current=t.matches;t.addListener(e),e()}else io.current=!1}function uT(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Me(s))t.addValue(r,s);else if(Me(i))t.addValue(r,dr(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,dr(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const nu=new WeakMap,dT=[...hh,Oe,Mt],hT=t=>dT.find(dh(t)),ru=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fT{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qo,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=xt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,me.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Ds(n),this.isVariantNode=uf(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const h=d[f];l[f]!==void 0&&Me(h)&&h.set(l[f],!1)}}mount(e){this.current=e,nu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),wf.current||cT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:io.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){nu.delete(this.current),this.projection&&this.projection.unmount(),Ot(this.notifyUpdate),Ot(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Qt.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&me.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in An){const n=An[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Se()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ru.length;r++){const s=ru[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=uT(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=dr(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(ah(s)||oh(s))?s=parseFloat(s):!hT(s)&&Mt.test(n)&&(s=xh(e,n)),this.setBaseTarget(e,Me(s)?s.get():s)),Me(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=Wo(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Me(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ha),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class bf extends fT{constructor(){super(...arguments),this.KeyframeResolver=wh}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Me(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function mT(t){return window.getComputedStyle(t)}class pT extends bf{constructor(){super(...arguments),this.type="html",this.renderInstance=df}readValueFromInstance(e,n){if(Qt.has(n)){const r=ra(n);return r&&r.default||0}else{const r=mT(e),s=(ch(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Xh(e,n)}build(e,n,r){Ea(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return xa(e,n,r)}}class gT extends bf{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Se}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qt.has(n)){const r=ra(n);return r&&r.default||0}return n=hf.has(n)?n:fa(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return pf(e,n,r)}build(e,n,r){Sa(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){ff(e,n,r,s)}mount(e){this.isSVGTag=Ta(e.tagName),super.mount(e)}}const _T=(t,e)=>va(t)?new gT(e):new pT(e,{allowProjection:t!==v.Fragment}),yT=lT({...eE,...PS,...yS,...NS},_T),su=Jx(yT);class vT extends v.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function xT({children:t,isPresent:e}){const n=v.useId(),r=v.useRef(null),s=v.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=v.useContext(_a);return v.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),m.jsx(vT,{isPresent:e,childRef:r,sizeRef:s,children:v.cloneElement(t,{ref:r})})}const wT=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=wa(bT),l=v.useId(),c=v.useCallback(d=>{a.set(d,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),u=v.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),i?[Math.random(),c]:[n,c]);return v.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[n]),v.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=m.jsx(xT,{isPresent:n,children:t})),m.jsx(ks.Provider,{value:u,children:t})};function bT(){return new Map}const Br=t=>t.key||"";function iu(t){const e=[];return v.Children.forEach(t,n=>{v.isValidElement(n)&&e.push(n)}),e}const ET=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=v.useMemo(()=>iu(t),[t]),l=a.map(Br),c=v.useRef(!0),u=v.useRef(a),d=wa(()=>new Map),[f,h]=v.useState(a),[p,_]=v.useState(a);af(()=>{c.current=!1,u.current=a;for(let y=0;y<p.length;y++){const w=Br(p[y]);l.includes(w)?d.delete(w):d.get(w)!==!0&&d.set(w,!1)}},[p,l.length,l.join("-")]);const g=[];if(a!==f){let y=[...a];for(let w=0;w<p.length;w++){const E=p[w],S=Br(E);l.includes(S)||(y.splice(w,0,E),g.push(E))}o==="wait"&&g.length&&(y=g),_(iu(y)),h(a);return}const{forceRender:x}=v.useContext(pa);return m.jsx(m.Fragment,{children:p.map(y=>{const w=Br(y),E=a===p||l.includes(w),S=()=>{if(d.has(w))d.set(w,!0);else return;let R=!0;d.forEach(k=>{k||(R=!1)}),R&&(x==null||x(),_(u.current),s&&s())};return m.jsx(wT,{isPresent:E,initial:!c.current||r?void 0:!1,custom:E?void 0:n,presenceAffectsLayout:i,mode:o,onExitComplete:E?void 0:S,children:y},w)})})};function ST({content:t,disabled:e}){const[n,r]=v.useState(!1),s=i=>{i.stopPropagation(),navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)};return m.jsx(dn,{onClick:i=>s(i),variant:"ghost",tooltip:"Copy content",disabled:e,children:m.jsx(ET,{mode:"wait",initial:!1,children:n?m.jsx(su.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:m.jsx(Mg,{className:"text-green-500"})},"check"):m.jsx(su.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:m.jsx(vg,{})},"copy")})})}function Ef({branch:t,branchOptions:e,onSelect:n,isLoading:r}){if(!e||!t)return null;const s=e.indexOf(t);return m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(fe,{variant:"ghost",size:"icon",className:"size-6 p-1",onClick:()=>{const i=e[s-1];i&&n(i)},disabled:r,children:m.jsx(gg,{})}),m.jsxs("span",{className:"text-sm",children:[s+1," / ",e.length]}),m.jsx(fe,{variant:"ghost",size:"icon",className:"size-6 p-1",onClick:()=>{const i=e[s+1];i&&n(i)},disabled:r,children:m.jsx(Bp,{})})]})}function Sf({content:t,isHumanMessage:e,isAiMessage:n,isEditing:r,setIsEditing:s,handleSubmitEdit:i,handleRegenerate:o,isLoading:a}){if(e&&n)throw new Error("Can only set one of isHumanMessage or isAiMessage to true, not both.");if(!e&&!n)throw new Error("One of isHumanMessage or isAiMessage must be set to true.");if(e&&(r===void 0||s===void 0||i===void 0))throw new Error("If isHumanMessage is true, all of isEditing, setIsEditing, and handleSubmitEdit must be set.");const l=e&&r!==void 0&&!!s&&!!i;return e&&r&&s&&i?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(dn,{disabled:a,tooltip:"Cancel edit",variant:"ghost",onClick:()=>{s(!1)},children:m.jsx(jt,{})}),m.jsx(dn,{disabled:a,tooltip:"Submit",variant:"secondary",onClick:i,children:m.jsx(Vg,{})})]}):m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ST,{content:t,disabled:a}),n&&!!o&&m.jsx(dn,{disabled:a,tooltip:"Refresh",variant:"ghost",onClick:o,children:m.jsx($g,{})}),l&&m.jsx(dn,{disabled:a,tooltip:"Edit",variant:"ghost",onClick:()=>{s==null||s(!0)},children:m.jsx(_g,{})})]})}const Tf=[{id:"abap",name:"ABAP",import:()=>b(()=>import("./abap-DdY7uXr-.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>b(()=>import("./actionscript-3-Ci-La1BS.js"),[])},{id:"ada",name:"Ada",import:()=>b(()=>import("./ada-BuBMJB-y.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>b(()=>import("./angular-html-GqBVQ6Dm.js").then(t=>t.f),__vite__mapDeps([0,1,2,3]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>b(()=>import("./angular-ts-MKs4dlu_.js"),__vite__mapDeps([4,0,1,2,3,5]))},{id:"apache",name:"Apache Conf",import:()=>b(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>b(()=>import("./apex-BzwtH5UL.js"),[])},{id:"apl",name:"APL",import:()=>b(()=>import("./apl-C6GBNg32.js"),__vite__mapDeps([6,1,2,3,7,8,9]))},{id:"applescript",name:"AppleScript",import:()=>b(()=>import("./applescript-DIt9OTko.js"),[])},{id:"ara",name:"Ara",import:()=>b(()=>import("./ara-CJxt7p29.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>b(()=>import("./asciidoc-CcSEeikT.js"),[])},{id:"asm",name:"Assembly",import:()=>b(()=>import("./asm-DPTZissz.js"),[])},{id:"astro",name:"Astro",import:()=>b(()=>import("./astro-DTSlZd1t.js"),__vite__mapDeps([10,9,2,11,3,12]))},{id:"awk",name:"AWK",import:()=>b(()=>import("./awk-BINKOAKH.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>b(()=>import("./ballerina-DCcCncrU.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>b(()=>import("./bat-B9Vj0mJK.js"),[])},{id:"beancount",name:"Beancount",import:()=>b(()=>import("./beancount-DDUKAZWS.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>b(()=>import("./berry-DnyWjya5.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>b(()=>import("./bibtex-CpWBKVjh.js"),[])},{id:"bicep",name:"Bicep",import:()=>b(()=>import("./bicep-BWkuYGGO.js"),[])},{id:"blade",name:"Blade",import:()=>b(()=>import("./blade-CPEzV-UE.js"),__vite__mapDeps([13,1,2,3,7,8,14,9]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>b(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([15,16]))},{id:"c",name:"C",import:()=>b(()=>import("./c-BhsLqr-4.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>b(()=>import("./cadence-CEjiMJLT.js"),[])},{id:"cairo",name:"Cairo",import:()=>b(()=>import("./cairo-BM1Freo3.js"),__vite__mapDeps([17,18]))},{id:"clarity",name:"Clarity",import:()=>b(()=>import("./clarity-CXmV_HiI.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>b(()=>import("./clojure-mLcCfA0-.js"),[])},{id:"cmake",name:"CMake",import:()=>b(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>b(()=>import("./cobol-NX_YbRMJ.js"),__vite__mapDeps([19,1,2,3,8]))},{id:"codeowners",name:"CODEOWNERS",import:()=>b(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>b(()=>import("./codeql-Bdprqoiu.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>b(()=>import("./coffee-CXcjgkhu.js"),__vite__mapDeps([20,2]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>b(()=>import("./common-lisp-CQO4gZEw.js"),[])},{id:"coq",name:"Coq",import:()=>b(()=>import("./coq-BCzYJAay.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>b(()=>import("./cpp-IRqjNdQP.js"),__vite__mapDeps([21,22,23,24,14]))},{id:"crystal",name:"Crystal",import:()=>b(()=>import("./crystal-DFEzbmK1.js"),__vite__mapDeps([25,1,2,3,14,24,26]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>b(()=>import("./csharp-D7v6OrNy.js"),[])},{id:"css",name:"CSS",import:()=>b(()=>import("./css-u4bm_LMz.js"),[])},{id:"csv",name:"CSV",import:()=>b(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>b(()=>import("./cue-DmZ-uG0V.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>b(()=>import("./cypher-DfpIq38s.js"),[])},{id:"d",name:"D",import:()=>b(()=>import("./d-B5L7zzq-.js"),[])},{id:"dart",name:"Dart",import:()=>b(()=>import("./dart-C4Ro8ZjH.js"),[])},{id:"dax",name:"DAX",import:()=>b(()=>import("./dax-yA8e6OR-.js"),[])},{id:"desktop",name:"Desktop",import:()=>b(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>b(()=>import("./diff-Dnfm4U7b.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>b(()=>import("./docker-COcR7UxN.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>b(()=>import("./dotenv-DQxx3LPD.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>b(()=>import("./dream-maker-BMwgFBEQ.js"),[])},{id:"edge",name:"Edge",import:()=>b(()=>import("./edge-Cq_6DOij.js"),__vite__mapDeps([27,11,1,2,3,28]))},{id:"elixir",name:"Elixir",import:()=>b(()=>import("./elixir-BoNJ9vXU.js"),__vite__mapDeps([29,1,2,3]))},{id:"elm",name:"Elm",import:()=>b(()=>import("./elm-CTr_twwF.js"),__vite__mapDeps([30,23,24]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>b(()=>import("./emacs-lisp-CMz7PuSU.js"),[])},{id:"erb",name:"ERB",import:()=>b(()=>import("./erb-BgreK6rt.js"),__vite__mapDeps([31,1,2,3,32,33,7,8,14,34,11,35,36,21,22,23,24,26,37,38]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>b(()=>import("./erlang-CMOi41r9.js"),[])},{id:"fennel",name:"Fennel",import:()=>b(()=>import("./fennel-dZn0vQkf.js"),[])},{id:"fish",name:"Fish",import:()=>b(()=>import("./fish-CQzXS8_C.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>b(()=>import("./fluent-CNRQ974Q.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>b(()=>import("./fortran-fixed-form-C9lV_GL-.js"),__vite__mapDeps([39,40]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>b(()=>import("./fortran-free-form-B3Z_eaxm.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>b(()=>import("./fsharp-Vw5t3P44.js"),__vite__mapDeps([41,42]))},{id:"gdresource",name:"GDResource",import:()=>b(()=>import("./gdresource-NFcQ0Q3Z.js"),__vite__mapDeps([43,44,45]))},{id:"gdscript",name:"GDScript",import:()=>b(()=>import("./gdscript-BVlVXSjx.js"),[])},{id:"gdshader",name:"GDShader",import:()=>b(()=>import("./gdshader-BSHf-0eb.js"),[])},{id:"genie",name:"Genie",import:()=>b(()=>import("./genie-DJEtsjbi.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>b(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>b(()=>import("./git-commit-C0WNX4K0.js"),__vite__mapDeps([46,47]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>b(()=>import("./git-rebase-3YLVFLpI.js"),__vite__mapDeps([48,26]))},{id:"gleam",name:"Gleam",import:()=>b(()=>import("./gleam-C30t_gpS.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>b(()=>import("./glimmer-js-D4fdoRWd.js"),__vite__mapDeps([49,2,11,3,1]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>b(()=>import("./glimmer-ts-DFoQQgBS.js"),__vite__mapDeps([50,11,3,2,1]))},{id:"glsl",name:"GLSL",import:()=>b(()=>import("./glsl-bwZ1_LLM.js"),__vite__mapDeps([23,24]))},{id:"gnuplot",name:"Gnuplot",import:()=>b(()=>import("./gnuplot-CmWLV2bY.js"),[])},{id:"go",name:"Go",import:()=>b(()=>import("./go-C5-9kuJc.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>b(()=>import("./graphql-DqgCZ2sd.js"),__vite__mapDeps([34,2,11,35,36]))},{id:"groovy",name:"Groovy",import:()=>b(()=>import("./groovy-BWslPs4p.js"),[])},{id:"hack",name:"Hack",import:()=>b(()=>import("./hack-BV5LM4CS.js"),__vite__mapDeps([51,1,2,3,14]))},{id:"haml",name:"Ruby Haml",import:()=>b(()=>import("./haml-B1jT_oKV.js"),__vite__mapDeps([33,2,3]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>b(()=>import("./handlebars-HtVeTy3a.js"),__vite__mapDeps([52,1,2,3,38]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>b(()=>import("./haskell-ChDww4um.js"),[])},{id:"haxe",name:"Haxe",import:()=>b(()=>import("./haxe-BgqZeg96.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>b(()=>import("./hcl-_Zu0RE-q.js"),[])},{id:"hjson",name:"Hjson",import:()=>b(()=>import("./hjson-D9Bn7OQI.js"),[])},{id:"hlsl",name:"HLSL",import:()=>b(()=>import("./hlsl-DkpUthgY.js"),[])},{id:"html",name:"HTML",import:()=>b(()=>import("./html-DG1TtFnM.js"),__vite__mapDeps([1,2,3]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>b(()=>import("./html-derivative-CDVwFiY1.js"),__vite__mapDeps([28,1,2,3]))},{id:"http",name:"HTTP",import:()=>b(()=>import("./http-CYnz8shJ.js"),__vite__mapDeps([53,26,9,7,8,34,2,11,35,36]))},{id:"hxml",name:"HXML",import:()=>b(()=>import("./hxml-BfFmssGd.js"),__vite__mapDeps([54,55]))},{id:"hy",name:"Hy",import:()=>b(()=>import("./hy-YurBl9Qv.js"),[])},{id:"imba",name:"Imba",import:()=>b(()=>import("./imba-C6vdFTm2.js"),__vite__mapDeps([56,11]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>b(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>b(()=>import("./java-BN40hmum.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>b(()=>import("./javascript-DNgb01dh.js"),[])},{id:"jinja",name:"Jinja",import:()=>b(()=>import("./jinja-BORjBBXU.js"),__vite__mapDeps([57,1,2,3]))},{id:"jison",name:"Jison",import:()=>b(()=>import("./jison-Ct8rtT8R.js"),__vite__mapDeps([58,2]))},{id:"json",name:"JSON",import:()=>b(()=>import("./json-DWmkr0yC.js"),[])},{id:"json5",name:"JSON5",import:()=>b(()=>import("./json5-BDjtpMT8.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>b(()=>import("./jsonc-B8E-_56i.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>b(()=>import("./jsonl-NKd-Y1zG.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>b(()=>import("./jsonnet-CpRrwcwt.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>b(()=>import("./jssm-DlYXzDlu.js"),[])},{id:"jsx",name:"JSX",import:()=>b(()=>import("./jsx-CM4fc1WH.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>b(()=>import("./julia-Czdw582_.js"),__vite__mapDeps([59,21,22,23,24,14,18,2,60]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>b(()=>import("./kotlin-BZRbnyjI.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>b(()=>import("./kusto-0oeOWFlz.js"),[])},{id:"latex",name:"LaTeX",import:()=>b(()=>import("./latex-BpoAco4y.js"),__vite__mapDeps([61,62,60]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>b(()=>import("./lean-yLioyJ2E.js"),[])},{id:"less",name:"Less",import:()=>b(()=>import("./less-Dk1rBueR.js"),[])},{id:"liquid",name:"Liquid",import:()=>b(()=>import("./liquid-DlGqZaOj.js"),__vite__mapDeps([63,1,2,3,9]))},{id:"log",name:"Log file",import:()=>b(()=>import("./log-DhjS0j1J.js"),[])},{id:"logo",name:"Logo",import:()=>b(()=>import("./logo-Dtn98rcr.js"),[])},{id:"lua",name:"Lua",import:()=>b(()=>import("./lua-B2--UKVN.js"),__vite__mapDeps([37,24]))},{id:"luau",name:"Luau",import:()=>b(()=>import("./luau-DepYB8Ml.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>b(()=>import("./make-DNDvMORL.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>b(()=>import("./markdown-CNXuF1yM.js"),[])},{id:"marko",name:"Marko",import:()=>b(()=>import("./marko-BxSrAFJn.js"),__vite__mapDeps([64,3,65,5,2]))},{id:"matlab",name:"MATLAB",import:()=>b(()=>import("./matlab-Kxp7UmFj.js"),[])},{id:"mdc",name:"MDC",import:()=>b(()=>import("./mdc-DfEMzj3F.js"),__vite__mapDeps([66,42,38,28,1,2,3]))},{id:"mdx",name:"MDX",import:()=>b(()=>import("./mdx-Bcw97oti.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>b(()=>import("./mermaid-BZ3P6AVf.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>b(()=>import("./mipsasm-BzaEo2Du.js"),[])},{id:"mojo",name:"Mojo",import:()=>b(()=>import("./mojo-B2bjgU-v.js"),[])},{id:"move",name:"Move",import:()=>b(()=>import("./move-EZUUsui8.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>b(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>b(()=>import("./nextflow-B2uSYIFn.js"),[])},{id:"nginx",name:"Nginx",import:()=>b(()=>import("./nginx-Dw0nYz9L.js"),__vite__mapDeps([67,37,24]))},{id:"nim",name:"Nim",import:()=>b(()=>import("./nim-NHYZZDnF.js"),__vite__mapDeps([68,24,1,2,3,7,8,23,42]))},{id:"nix",name:"Nix",import:()=>b(()=>import("./nix-DVWcdiGS.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>b(()=>import("./nushell-ZJvK9Z2N.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>b(()=>import("./objective-c-B6NdQBKR.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>b(()=>import("./objective-cpp-BkG9CdHo.js"),[])},{id:"ocaml",name:"OCaml",import:()=>b(()=>import("./ocaml-CLmbwNS9.js"),[])},{id:"pascal",name:"Pascal",import:()=>b(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>b(()=>import("./perl-DLffUHFU.js"),__vite__mapDeps([69,1,2,3,7,8,14]))},{id:"php",name:"PHP",import:()=>b(()=>import("./php-D3VTUn6x.js"),__vite__mapDeps([70,1,2,3,7,8,14,9]))},{id:"plsql",name:"PL/SQL",import:()=>b(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>b(()=>import("./po-BFLt1xDp.js"),[])},{id:"polar",name:"Polar",import:()=>b(()=>import("./polar-CFFzfAWz.js"),[])},{id:"postcss",name:"PostCSS",import:()=>b(()=>import("./postcss-DmF4-xLG.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>b(()=>import("./powerquery-ByY1Guvr.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>b(()=>import("./powershell-DES0gjzB.js"),[])},{id:"prisma",name:"Prisma",import:()=>b(()=>import("./prisma-CZzQMiei.js"),[])},{id:"prolog",name:"Prolog",import:()=>b(()=>import("./prolog-BNxDCkIA.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>b(()=>import("./proto-hdsyEllQ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>b(()=>import("./pug-BbGfWiEl.js"),__vite__mapDeps([71,2,3,1]))},{id:"puppet",name:"Puppet",import:()=>b(()=>import("./puppet-DWMP3yrW.js"),[])},{id:"purescript",name:"PureScript",import:()=>b(()=>import("./purescript-DvQyZZSe.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>b(()=>import("./python-CK56Z9cH.js"),[])},{id:"qml",name:"QML",import:()=>b(()=>import("./qml-Dhho_E4W.js"),__vite__mapDeps([72,2]))},{id:"qmldir",name:"QML Directory",import:()=>b(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>b(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>b(()=>import("./r-Cqv5JV-q.js"),[])},{id:"racket",name:"Racket",import:()=>b(()=>import("./racket-CwIbMU3B.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>b(()=>import("./raku-DZ4hUExO.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>b(()=>import("./razor-CDyaIOPG.js"),__vite__mapDeps([73,1,2,3,74]))},{id:"reg",name:"Windows Registry Script",import:()=>b(()=>import("./reg-CrOfvjVs.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>b(()=>import("./regexp-DoiKbUTj.js"),[])},{id:"rel",name:"Rel",import:()=>b(()=>import("./rel-Dzwn3p-3.js"),[])},{id:"riscv",name:"RISC-V",import:()=>b(()=>import("./riscv-BGct0Hx7.js"),[])},{id:"rst",name:"reStructuredText",import:()=>b(()=>import("./rst-BCmapc_q.js"),__vite__mapDeps([75,28,1,2,3,21,22,23,24,14,18,26,38,76,32,33,7,8,34,11,35,36,37]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>b(()=>import("./ruby-DsC6krmi.js"),__vite__mapDeps([32,1,2,3,33,7,8,14,34,11,35,36,21,22,23,24,26,37,38]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>b(()=>import("./rust-Bjs2cL5p.js"),[])},{id:"sas",name:"SAS",import:()=>b(()=>import("./sas-K_Wwm3IX.js"),__vite__mapDeps([77,14]))},{id:"sass",name:"Sass",import:()=>b(()=>import("./sass-BrbOHqWv.js"),[])},{id:"scala",name:"Scala",import:()=>b(()=>import("./scala-Lp17StYA.js"),[])},{id:"scheme",name:"Scheme",import:()=>b(()=>import("./scheme-BbccZ3y2.js"),[])},{id:"scss",name:"SCSS",import:()=>b(()=>import("./scss-BfMQ58X7.js"),__vite__mapDeps([5,3]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>b(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>b(()=>import("./shaderlab-CsYUIUcf.js"),__vite__mapDeps([78,79]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>b(()=>import("./shellscript-HNM5thJl.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>b(()=>import("./shellsession-DU_2P5ZA.js"),__vite__mapDeps([80,26]))},{id:"smalltalk",name:"Smalltalk",import:()=>b(()=>import("./smalltalk-DsCg8CPl.js"),[])},{id:"solidity",name:"Solidity",import:()=>b(()=>import("./solidity-DymQr0nX.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>b(()=>import("./soy-aWhPD8Nq.js"),__vite__mapDeps([81,1,2,3]))},{id:"sparql",name:"SPARQL",import:()=>b(()=>import("./sparql-B5YtT9lV.js"),__vite__mapDeps([82,83]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>b(()=>import("./splunk-j_FrBdja.js"),[])},{id:"sql",name:"SQL",import:()=>b(()=>import("./sql-D8nBeWSR.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>b(()=>import("./ssh-config-D-RymO5g.js"),[])},{id:"stata",name:"Stata",import:()=>b(()=>import("./stata-bRt97scT.js"),__vite__mapDeps([84,14]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>b(()=>import("./stylus-DwU8c_yx.js"),[])},{id:"svelte",name:"Svelte",import:()=>b(()=>import("./svelte-B94b8dMa.js"),__vite__mapDeps([85,2,11,3,12]))},{id:"swift",name:"Swift",import:()=>b(()=>import("./swift-D2TqM893.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>b(()=>import("./system-verilog-DFQ4Xr-4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>b(()=>import("./systemd-DA0ESIWO.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>b(()=>import("./talonscript-CGXjegLJ.js"),[])},{id:"tasl",name:"Tasl",import:()=>b(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>b(()=>import("./tcl-NUI3YrRW.js"),[])},{id:"templ",name:"Templ",import:()=>b(()=>import("./templ-MrK5mfgg.js"),__vite__mapDeps([86,87,2,3]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>b(()=>import("./terraform-rf8nNrOk.js"),[])},{id:"tex",name:"TeX",import:()=>b(()=>import("./tex-Dej6pUpk.js"),__vite__mapDeps([62,60]))},{id:"toml",name:"TOML",import:()=>b(()=>import("./toml-Dwo6uFCY.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>b(()=>import("./ts-tags-CiO5kd_m.js"),__vite__mapDeps([88,11,3,2,23,24,1,14,7,8]))},{id:"tsv",name:"TSV",import:()=>b(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>b(()=>import("./tsx-DqpEK-75.js"),[])},{id:"turtle",name:"Turtle",import:()=>b(()=>import("./turtle-C0hdQUNN.js"),[])},{id:"twig",name:"Twig",import:()=>b(()=>import("./twig-CvAdjvFj.js"),__vite__mapDeps([89,3,2,5,70,1,7,8,14,9,18,32,33,34,11,35,36,21,22,23,24,26,37,38]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>b(()=>import("./typescript-CVESyXxo.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>b(()=>import("./typespec-B_R80ZlN.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>b(()=>import("./typst-F89DG-fP.js"),[])},{id:"v",name:"V",import:()=>b(()=>import("./v-DH4N8IuU.js"),[])},{id:"vala",name:"Vala",import:()=>b(()=>import("./vala-C8pgRvQH.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>b(()=>import("./vb-Bv-mwDEg.js"),[])},{id:"verilog",name:"Verilog",import:()=>b(()=>import("./verilog-6RUVFG9U.js"),[])},{id:"vhdl",name:"VHDL",import:()=>b(()=>import("./vhdl-IBB5Tl9j.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>b(()=>import("./viml-CIxipgmy.js"),[])},{id:"vue",name:"Vue",import:()=>b(()=>import("./vue-srE0XGv_.js"),__vite__mapDeps([90,1,2,3,11,9,28]))},{id:"vue-html",name:"Vue HTML",import:()=>b(()=>import("./vue-html-59TQSa_j.js"),__vite__mapDeps([91,90,1,2,3,11,9,28]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>b(()=>import("./vyper-DzaHHFTY.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>b(()=>import("./wasm-sH2JAGjN.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>b(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>b(()=>import("./wgsl-CSoQzgif.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>b(()=>import("./wikitext-BqtQrzRp.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>b(()=>import("./wolfram-aeT0-ak7.js"),[])},{id:"xml",name:"XML",import:()=>b(()=>import("./xml-BOQ9RtXF.js"),__vite__mapDeps([7,8]))},{id:"xsl",name:"XSL",import:()=>b(()=>import("./xsl-BqG2VzO2.js"),__vite__mapDeps([92,7,8]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>b(()=>import("./yaml-CIiI48o2.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>b(()=>import("./zenscript-NgWrSVUg.js"),[])},{id:"zig",name:"Zig",import:()=>b(()=>import("./zig-D44NvAEk.js"),[])}],TT=Object.fromEntries(Tf.map(t=>[t.id,t.import])),AT=Object.fromEntries(Tf.flatMap(t=>{var e;return((e=t.aliases)==null?void 0:e.map(n=>[n,t.import]))||[]})),CT={...TT,...AT},RT=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>b(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>b(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>b(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>b(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>b(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>b(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>b(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>b(()=>import("./dark-plus-C3mMm8J8.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>b(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>b(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>b(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>b(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>b(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>b(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>b(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>b(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>b(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>b(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>b(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>b(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>b(()=>import("./kanagawa-dragon-RXHOmnpW.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>b(()=>import("./kanagawa-lotus-zchoCBdH.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>b(()=>import("./kanagawa-wave-2aygx1xg.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>b(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>b(()=>import("./light-plus-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>b(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>b(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>b(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>b(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>b(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>b(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>b(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>b(()=>import("./monokai-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>b(()=>import("./night-owl-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>b(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>b(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>b(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>b(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>b(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>b(()=>import("./red-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>b(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>b(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>b(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>b(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>b(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>b(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>b(()=>import("./solarized-dark-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>b(()=>import("./solarized-light-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>b(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>b(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>b(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>b(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>b(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>b(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],PT=Object.fromEntries(RT.map(t=>[t.id,t.import]));let Rt=class extends Error{constructor(e){super(e),this.name="ShikiError"}},Aa=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function NT(){return 2147483648}function IT(){return typeof performance<"u"?performance.now():Date.now()}const LT=(t,e)=>t+(e-t%e)%e;async function kT(t){let e,n;const r={};function s(h){n=h,r.HEAPU8=new Uint8Array(h),r.HEAPU32=new Uint32Array(h)}function i(h,p,_){r.HEAPU8.copyWithin(h,p,p+_)}function o(h){try{return e.grow(h-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function a(h){const p=r.HEAPU8.length;h=h>>>0;const _=NT();if(h>_)return!1;for(let g=1;g<=4;g*=2){let x=p*(1+.2/g);x=Math.min(x,h+100663296);const y=Math.min(_,LT(Math.max(h,x),65536));if(o(y))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(h,p,_=1024){const g=p+_;let x=p;for(;h[x]&&!(x>=g);)++x;if(x-p>16&&h.buffer&&l)return l.decode(h.subarray(p,x));let y="";for(;p<x;){let w=h[p++];if(!(w&128)){y+=String.fromCharCode(w);continue}const E=h[p++]&63;if((w&224)===192){y+=String.fromCharCode((w&31)<<6|E);continue}const S=h[p++]&63;if((w&240)===224?w=(w&15)<<12|E<<6|S:w=(w&7)<<18|E<<12|S<<6|h[p++]&63,w<65536)y+=String.fromCharCode(w);else{const R=w-65536;y+=String.fromCharCode(55296|R>>10,56320|R&1023)}}return y}function u(h,p){return h?c(r.HEAPU8,h,p):""}const d={emscripten_get_now:IT,emscripten_memcpy_big:i,emscripten_resize_heap:a,fd_write:()=>0};async function f(){const p=await t({env:d,wasi_snapshot_preview1:d});e=p.memory,s(e.buffer),Object.assign(r,p),r.UTF8ToString=u}return await f(),r}var jT=Object.defineProperty,DT=(t,e,n)=>e in t?jT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ae=(t,e,n)=>(DT(t,typeof e!="symbol"?e+"":e,n),n);let Ne=null;function OT(t){throw new Aa(t.UTF8ToString(t.getLastOnigError()))}class Os{constructor(e){Ae(this,"utf16Length"),Ae(this,"utf8Length"),Ae(this,"utf16Value"),Ae(this,"utf8Value"),Ae(this,"utf16OffsetToUtf8"),Ae(this,"utf8OffsetToUtf16");const n=e.length,r=Os._utf8ByteLength(e),s=r!==n,i=s?new Uint32Array(n+1):null;s&&(i[n]=r);const o=s?new Uint32Array(r+1):null;s&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=e.charCodeAt(c);let d=u,f=!1;if(u>=55296&&u<=56319&&c+1<n){const h=e.charCodeAt(c+1);h>=56320&&h<=57343&&(d=(u-55296<<10)+65536|h-56320,f=!0)}s&&(i[c]=l,f&&(i[c+1]=l),d<=127?o[l+0]=c:d<=2047?(o[l+0]=c,o[l+1]=c):d<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),d<=127?a[l++]=d:d<=2047?(a[l++]=192|(d&1984)>>>6,a[l++]=128|(d&63)>>>0):d<=65535?(a[l++]=224|(d&61440)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0):(a[l++]=240|(d&1835008)>>>18,a[l++]=128|(d&258048)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0),f&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const i=e.charCodeAt(r);let o=i,a=!1;if(i>=55296&&i<=56319&&r+1<s){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(i-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const gt=class{constructor(t){if(Ae(this,"id",++gt.LAST_ID),Ae(this,"_onigBinding"),Ae(this,"content"),Ae(this,"utf16Length"),Ae(this,"utf8Length"),Ae(this,"utf16OffsetToUtf8"),Ae(this,"utf8OffsetToUtf16"),Ae(this,"ptr"),!Ne)throw new Aa("Must invoke loadWasm first.");this._onigBinding=Ne,this.content=t;const e=new Os(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!gt._sharedPtrInUse?(gt._sharedPtr||(gt._sharedPtr=Ne.omalloc(1e4)),gt._sharedPtrInUse=!0,Ne.HEAPU8.set(e.utf8Value,gt._sharedPtr),this.ptr=gt._sharedPtr):this.ptr=e.createString(Ne)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===gt._sharedPtr?gt._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let Cr=gt;Ae(Cr,"LAST_ID",0);Ae(Cr,"_sharedPtr",0);Ae(Cr,"_sharedPtrInUse",!1);class MT{constructor(e){if(Ae(this,"_onigBinding"),Ae(this,"_ptr"),!Ne)throw new Aa("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new Os(e[a]);n[a]=c.createString(Ne),r[a]=c.utf8Length}const s=Ne.omalloc(4*e.length);Ne.HEAPU32.set(n,s/4);const i=Ne.omalloc(4*e.length);Ne.HEAPU32.set(r,i/4);const o=Ne.createOnigScanner(s,i,e.length);for(let a=0,l=e.length;a<l;a++)Ne.ofree(n[a]);Ne.ofree(i),Ne.ofree(s),o===0&&OT(Ne),this._onigBinding=Ne,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new Cr(e);const i=this._findNextMatchSync(e,n,!1,s);return e.dispose(),i}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const i=this._onigBinding,o=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(o===0)return null;const a=i.HEAPU32;let l=o/4;const c=a[l++],u=a[l++],d=[];for(let f=0;f<u;f++){const h=e.convertUtf8OffsetToUtf16(a[l++]),p=e.convertUtf8OffsetToUtf16(a[l++]);d[f]={start:h,end:p,length:p-h}}return{index:c,captureIndices:d}}}function $T(t){return typeof t.instantiator=="function"}function VT(t){return typeof t.default=="function"}function BT(t){return typeof t.data<"u"}function FT(t){return typeof Response<"u"&&t instanceof Response}function HT(t){var e;return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&((e=Buffer.isBuffer)==null?void 0:e.call(Buffer,t))||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Fr;function GT(t){if(Fr)return Fr;async function e(){Ne=await kT(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),$T(r)?r=await r.instantiator(n):VT(r)?r=await r.default(n):(BT(r)&&(r=r.data),FT(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await UT(r)(n):r=await zT(r)(n):HT(r)?r=await _i(r)(n):r instanceof WebAssembly.Module?r=await _i(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await _i(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Fr=e(),Fr}function _i(t){return e=>WebAssembly.instantiate(t,e)}function UT(t){return e=>WebAssembly.instantiateStreaming(t,e)}function zT(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let WT;function KT(){return WT}async function Af(t){return t&&await GT(t),{createScanner(e){return new MT(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new Cr(e)}}}function XT(t){return Ca(t)}function Ca(t){return Array.isArray(t)?YT(t):t instanceof RegExp?t:typeof t=="object"?qT(t):t}function YT(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=Ca(t[n]);return e}function qT(t){let e={};for(let n in t)e[n]=Ca(t[n]);return e}function Cf(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Rf(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Rf(t.substring(0,t.length-1)):t.substr(~e+1)}var yi=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Hr=class{static hasCaptures(t){return t===null?!1:(yi.lastIndex=0,yi.test(t))}static replaceCaptures(t,e,n){return t.replace(yi,(r,s,i,o)=>{let a=n[parseInt(s||i,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Pf(t,e){return t<e?-1:t>e?1:0}function Nf(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let i=Pf(t[s],e[s]);if(i!==0)return i}return 0}return n-r}function ou(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function If(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Lf=class{constructor(t){U(this,"cache",new Map);this.fn=t}get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},cs=class{constructor(t,e,n){U(this,"_cachedMatchRoot",new Lf(t=>this._root.match(t)));this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(QT(t),e)}static createFromParsedTheme(t,e){return t1(t,e)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>ZT(t.parent,s.parentScopes));return r?new kf(r.fontStyle,r.foreground,r.background):null}},vi=class Qr{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Qr(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Qr(n,e[r]);return n}push(e){return new Qr(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function ZT(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!JT(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function JT(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var kf=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function QT(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,i=e.length;s<i;s++){let o=e[s];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),a=d.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let d=o.settings.fontStyle.split(" ");for(let f=0,h=d.length;f<h;f++)switch(d[f]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&ou(o.settings.foreground)&&(c=o.settings.foreground);let u=null;typeof o.settings.background=="string"&&ou(o.settings.background)&&(u=o.settings.background);for(let d=0,f=a.length;d<f;d++){let p=a[d].trim().split(" "),_=p[p.length-1],g=null;p.length>1&&(g=p.slice(0,p.length-1),g.reverse()),n[r++]=new e1(_,g,s,l,c,u)}}return n}var e1=class{constructor(t,e,n,r,s,i){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=i}},Tt=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Tt||{});function t1(t,e){t.sort((l,c)=>{let u=Pf(l.scope,c.scope);return u!==0||(u=Nf(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(s=l.background)}let i=new n1(e),o=new kf(n,i.getId(r),i.getId(s)),a=new s1(new oo(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,i.getId(u.foreground),i.getId(u.background))}return new cs(i,o,a)}var n1=class{constructor(t){U(this,"_isFrozen");U(this,"_lastColorId");U(this,"_id2color");U(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},r1=Object.freeze([]),oo=class jf{constructor(e,n,r,s,i){U(this,"scopeDepth");U(this,"parentScopes");U(this,"fontStyle");U(this,"foreground");U(this,"background");this.scopeDepth=e,this.parentScopes=n||r1,this.fontStyle=r,this.foreground=s,this.background=i}clone(){return new jf(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},s1=class ao{constructor(e,n=[],r={}){U(this,"_rulesWithParentScopes");this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const i=n.parentScopes[s].length-e.parentScopes[r].length;if(i!==0)return i;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,i;if(r===-1?(s=e,i=""):(s=e.substring(0,r),i=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(i)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(ao._cmpBySpecificity),n}insert(e,n,r,s,i,o){if(n===""){this._doInsertHere(e,r,s,i,o);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new ao(this._mainRule.clone(),oo.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,r,s,i,o)}_doInsertHere(e,n,r,s,i){if(n===null){this._mainRule.acceptOverwrite(e,r,s,i);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(Nf(l.parentScopes,n)===0){l.acceptOverwrite(e,r,s,i);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new oo(e,n,r,s,i))}},Cn=class tt{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=tt.getLanguageId(e),r=tt.getTokenType(e),s=tt.getFontStyle(e),i=tt.getForeground(e),o=tt.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:i,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,i,o,a){let l=tt.getLanguageId(e),c=tt.getTokenType(e),u=tt.containsBalancedBrackets(e)?1:0,d=tt.getFontStyle(e),f=tt.getForeground(e),h=tt.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),s!==null&&(u=s?1:0),i!==-1&&(d=i),o!==0&&(f=o),a!==0&&(h=a),(l<<0|c<<8|u<<10|d<<11|f<<15|h<<24)>>>0}};function us(t,e){const n=[],r=i1(t);let s=r.next();for(;s!==null;){let l=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let c=o();if(n.push({matcher:c,priority:l}),s!==",")break;s=r.next()}return n;function i(){if(s==="-"){s=r.next();const l=i();return c=>!!l&&!l(c)}if(s==="("){s=r.next();const l=a();return s===")"&&(s=r.next()),l}if(au(s)){const l=[];do l.push(s),s=r.next();while(au(s));return c=>e(l,c)}return null}function o(){const l=[];let c=i();for(;c;)l.push(c),c=i();return u=>l.every(d=>d(u))}function a(){const l=[];let c=o();for(;c&&(l.push(c),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");c=o()}return u=>l.some(d=>d(u))}}function au(t){return!!t&&!!t.match(/[\w\.:]+/)}function i1(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Df(t){typeof t.dispose=="function"&&t.dispose()}var fr=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},o1=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},a1=class{constructor(){U(this,"_references",[]);U(this,"_seenReferenceKeys",new Set);U(this,"visitedRule",new Set)}get references(){return this._references}add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},l1=class{constructor(t,e){U(this,"seenFullScopeRequests",new Set);U(this,"seenPartialScopeRequests",new Set);U(this,"Q");this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new fr(this.initialScopeName)]}processQueue(){const t=this.Q;this.Q=[];const e=new a1;for(const n of t)c1(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof fr){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function c1(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const i=n.lookup(e);t instanceof fr?es({baseGrammar:i,selfGrammar:s},r):lo(t.ruleName,{baseGrammar:i,selfGrammar:s,repository:s.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new fr(a))}function lo(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];ds([r],e,n)}}function es(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&ds(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&ds(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function ds(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?Cf({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&ds(r.patterns,{...e,repository:s},n);const i=r.include;if(!i)continue;const o=Of(i);switch(o.kind){case 0:es({...e,selfGrammar:e.baseGrammar},n);break;case 1:es(e,n);break;case 2:lo(o.ruleName,{...e,repository:s},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:s};o.kind===4?lo(o.ruleName,l,n):es(l,n)}else o.kind===4?n.add(new o1(o.scopeName,o.ruleName)):n.add(new fr(o.scopeName));break}}}var u1=class{constructor(){U(this,"kind",0)}},d1=class{constructor(){U(this,"kind",1)}},h1=class{constructor(t){U(this,"kind",2);this.ruleName=t}},f1=class{constructor(t){U(this,"kind",3);this.scopeName=t}},m1=class{constructor(t,e){U(this,"kind",4);this.scopeName=t,this.ruleName=e}};function Of(t){if(t==="$base")return new u1;if(t==="$self")return new d1;const e=t.indexOf("#");if(e===-1)return new f1(t);if(e===0)return new h1(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new m1(n,r)}}var p1=/\\(\d+)/,lu=/\\(\d+)/g,g1=-1,Mf=-2;var Rr=class{constructor(t,e,n,r){U(this,"$location");U(this,"id");U(this,"_nameIsCapturing");U(this,"_name");U(this,"_contentNameIsCapturing");U(this,"_contentName");this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Hr.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Hr.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Rf(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Hr.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Hr.replaceCaptures(this._contentName,t,e)}},_1=class extends Rr{constructor(e,n,r,s,i){super(e,n,r,s);U(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(e,n){throw new Error("Not supported!")}compile(e,n){throw new Error("Not supported!")}compileAG(e,n,r,s){throw new Error("Not supported!")}},y1=class extends Rr{constructor(e,n,r,s,i){super(e,n,r,null);U(this,"_match");U(this,"captures");U(this,"_cachedCompiledPatterns");this._match=new mr(s,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,n){n.push(this._match)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,s){return this._getCachedCompiledPatterns(e).compileAG(e,r,s)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new pr,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},cu=class extends Rr{constructor(e,n,r,s,i){super(e,n,r,s);U(this,"hasMissingPatterns");U(this,"patterns");U(this,"_cachedCompiledPatterns");this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,n){for(const r of this.patterns)e.getRule(r).collectPatterns(e,n)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,s){return this._getCachedCompiledPatterns(e).compileAG(e,r,s)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new pr,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},co=class extends Rr{constructor(e,n,r,s,i,o,a,l,c,u){super(e,n,r,s);U(this,"_begin");U(this,"beginCaptures");U(this,"_end");U(this,"endHasBackReferences");U(this,"endCaptures");U(this,"applyEndPatternLast");U(this,"hasMissingPatterns");U(this,"patterns");U(this,"_cachedCompiledPatterns");this._begin=new mr(i,this.id),this.beginCaptures=o,this._end=new mr(a||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,n){return this._end.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e,n).compile(e)}compileAG(e,n,r,s){return this._getCachedCompiledPatterns(e,n).compileAG(e,r,s)}_getCachedCompiledPatterns(e,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new pr;for(const r of this.patterns)e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}},hs=class extends Rr{constructor(e,n,r,s,i,o,a,l,c){super(e,n,r,s);U(this,"_begin");U(this,"beginCaptures");U(this,"whileCaptures");U(this,"_while");U(this,"whileHasBackReferences");U(this,"hasMissingPatterns");U(this,"patterns");U(this,"_cachedCompiledPatterns");U(this,"_cachedCompiledWhilePatterns");this._begin=new mr(i,this.id),this.beginCaptures=o,this.whileCaptures=l,this._while=new mr(a,Mf),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,n){return this._while.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,s){return this._getCachedCompiledPatterns(e).compileAG(e,r,s)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new pr;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,n){return this._getCachedCompiledWhilePatterns(e,n).compile(e)}compileWhileAG(e,n,r,s){return this._getCachedCompiledWhilePatterns(e,n).compileAG(e,r,s)}_getCachedCompiledWhilePatterns(e,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new pr,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||""),this._cachedCompiledWhilePatterns}},$f=class De{static createCaptureRule(e,n,r,s,i){return e.registerRule(o=>new _1(n,o,r,s,i))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new y1(e.$vscodeTextmateLocation,e.id,e.name,e.match,De._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Cf({},r,e.repository));let i=e.patterns;return typeof i>"u"&&e.include&&(i=[{include:e.include}]),new cu(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,De._compilePatterns(i,n,r))}return e.while?new hs(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,De._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,De._compileCaptures(e.whileCaptures||e.captures,n,r),De._compilePatterns(e.patterns,n,r)):new co(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,De._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,De._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,De._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let i=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>i&&(i=a)}for(let o=0;o<=i;o++)s[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=De.getCompiledRuleId(e[o],n,r)),s[a]=De.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let i=0,o=e.length;i<o;i++){const a=e[i];let l=-1;if(a.include){const c=Of(a.include);switch(c.kind){case 0:case 1:l=De.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=De.getCompiledRuleId(u,n,r));break;case 3:case 4:const d=c.scopeName,f=c.kind===4?c.ruleName:null,h=n.getExternalGrammar(d,r);if(h)if(f){let p=h.repository[f];p&&(l=De.getCompiledRuleId(p,n,h.repository))}else l=De.getCompiledRuleId(h.repository.$self,n,h.repository);break}}else l=De.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof cu||c instanceof co||c instanceof hs)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;s.push(l)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},mr=class Vf{constructor(e,n){U(this,"source");U(this,"ruleId");U(this,"hasAnchor");U(this,"hasBackReferences");U(this,"_anchorCache");if(e&&typeof e=="string"){const r=e.length;let s=0,i=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(i.push(e.substring(s,a)),i.push("$(?!\\n)(?<!\\n)"),s=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,s===0?this.source=e:(i.push(e.substring(s,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=p1.test(this.source):this.hasBackReferences=!1}clone(){return new Vf(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return lu.lastIndex=0,this.source.replace(lu,(s,i)=>If(r[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],i,o,a,l;for(i=0,o=this.source.length;i<o;i++)a=this.source.charAt(i),e[i]=a,n[i]=a,r[i]=a,s[i]=a,a==="\\"&&i+1<o&&(l=this.source.charAt(i+1),l==="A"?(e[i+1]="",n[i+1]="",r[i+1]="A",s[i+1]="A"):l==="G"?(e[i+1]="",n[i+1]="G",r[i+1]="",s[i+1]="G"):(e[i+1]=l,n[i+1]=l,r[i+1]=l,s[i+1]=l),i++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},pr=class{constructor(){U(this,"_items");U(this,"_hasAnchors");U(this,"_cached");U(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new uu(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new uu(t,r,this._items.map(s=>s.ruleId))}},uu=class{constructor(t,e,n){U(this,"scanner");this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},xi=class{constructor(t,e){this.languageId=t,this.tokenType=e}},St,v1=(St=class{constructor(e,n){U(this,"_defaultAttributes");U(this,"_embeddedLanguagesMatcher");U(this,"_getBasicScopeAttributes",new Lf(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new xi(n,r)}));this._defaultAttributes=new xi(e,8),this._embeddedLanguagesMatcher=new x1(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?St._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(St.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},U(St,"_NULL_SCOPE_METADATA",new xi(0,0)),U(St,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),St),x1=class{constructor(t){U(this,"values");U(this,"scopesRegExp");if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>If(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},du=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Bf(t,e,n,r,s,i,o,a){const l=e.content.length;let c=!1,u=-1;if(o){const h=w1(t,e,n,r,s,i);s=h.stack,r=h.linePos,n=h.isFirstLine,u=h.anchorPosition}const d=Date.now();for(;!c;){if(a!==0&&Date.now()-d>a)return new du(s,!0);f()}return new du(s,!1);function f(){const h=b1(t,e,n,r,s,u);if(!h){i.produce(s,l),c=!0;return}const p=h.captureIndices,_=h.matchedRuleId,g=p&&p.length>0?p[0].end>r:!1;if(_===g1){const x=s.getRule(t);i.produce(s,p[0].start),s=s.withContentNameScopesList(s.nameScopesList),Xn(t,e,n,s,i,x.endCaptures,p),i.produce(s,p[0].end);const y=s;if(s=s.parent,u=y.getAnchorPos(),!g&&y.getEnterPos()===r){s=y,i.produce(s,l),c=!0;return}}else{const x=t.getRule(_);i.produce(s,p[0].start);const y=s,w=x.getName(e.content,p),E=s.contentNameScopesList.pushAttributed(w,t);if(s=s.push(_,r,u,p[0].end===l,null,E,E),x instanceof co){const S=x;Xn(t,e,n,s,i,S.beginCaptures,p),i.produce(s,p[0].end),u=p[0].end;const R=S.getContentName(e.content,p),k=E.pushAttributed(R,t);if(s=s.withContentNameScopesList(k),S.endHasBackReferences&&(s=s.withEndRule(S.getEndWithResolvedBackReferences(e.content,p))),!g&&y.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(x instanceof hs){const S=x;Xn(t,e,n,s,i,S.beginCaptures,p),i.produce(s,p[0].end),u=p[0].end;const R=S.getContentName(e.content,p),k=E.pushAttributed(R,t);if(s=s.withContentNameScopesList(k),S.whileHasBackReferences&&(s=s.withEndRule(S.getWhileWithResolvedBackReferences(e.content,p))),!g&&y.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(Xn(t,e,n,s,i,x.captures,p),i.produce(s,p[0].end),s=s.pop(),!g){s=s.safePop(),i.produce(s,l),c=!0;return}}p[0].end>r&&(r=p[0].end,n=!1)}}function w1(t,e,n,r,s,i){let o=s.beginRuleCapturedEOL?0:-1;const a=[];for(let l=s;l;l=l.pop()){const c=l.getRule(t);c instanceof hs&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=T1(l.rule,t,l.stack.endRule,n,r===o),d=c.findNextMatchSync(e,r,u);if(d){if(d.ruleId!==Mf){s=l.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(i.produce(l.stack,d.captureIndices[0].start),Xn(t,e,n,l.stack,i,l.rule.whileCaptures,d.captureIndices),i.produce(l.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>r&&(r=d.captureIndices[0].end,n=!1))}else{s=l.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:o,isFirstLine:n}}function b1(t,e,n,r,s,i){const o=E1(t,e,n,r,s,i),a=t.getInjections();if(a.length===0)return o;const l=S1(a,t,e,n,r,s,i);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:o}function E1(t,e,n,r,s,i){const o=s.getRule(t),{ruleScanner:a,findOptions:l}=Ff(o,t,s.endRule,n,r===i),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function S1(t,e,n,r,s,i,o){let a=Number.MAX_VALUE,l=null,c,u=0;const d=i.contentNameScopesList.getScopeNames();for(let f=0,h=t.length;f<h;f++){const p=t[f];if(!p.matcher(d))continue;const _=e.getRule(p.ruleId),{ruleScanner:g,findOptions:x}=Ff(_,e,null,r,s===o),y=g.findNextMatchSync(n,s,x);if(!y)continue;const w=y.captureIndices[0].start;if(!(w>=a)&&(a=w,l=y.captureIndices,c=y.ruleId,u=p.priority,a===s))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function Ff(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function T1(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function Xn(t,e,n,r,s,i,o){if(i.length===0)return;const a=e.content,l=Math.min(i.length,o.length),c=[],u=o[0].end;for(let d=0;d<l;d++){const f=i[d];if(f===null)continue;const h=o[d];if(h.length===0)continue;if(h.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=h.start;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?s.produceFromScopes(c[c.length-1].scopes,h.start):s.produce(r,h.start),f.retokenizeCapturedWithRuleId){const _=f.getName(a,o),g=r.contentNameScopesList.pushAttributed(_,t),x=f.getContentName(a,o),y=g.pushAttributed(x,t),w=r.push(f.retokenizeCapturedWithRuleId,h.start,-1,!1,null,g,y),E=t.createOnigString(a.substring(0,h.end));Bf(t,E,n&&h.start===0,h.start,w,s,!1,0),Df(E);continue}const p=f.getName(a,o);if(p!==null){const g=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(p,t);c.push(new A1(g,h.end))}}for(;c.length>0;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var A1=class{constructor(t,e){U(this,"scopes");U(this,"endPos");this.scopes=t,this.endPos=e}};function C1(t,e,n,r,s,i,o,a){return new P1(t,e,n,r,s,i,o,a)}function hu(t,e,n,r,s){const i=us(e,fs),o=$f.getCompiledRuleId(n,r,s.repository);for(const a of i)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:s,priority:a.priority})}function fs(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(R1(e[s],r))return n=s+1,!0;return!1})}function R1(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var P1=class{constructor(t,e,n,r,s,i,o,a){U(this,"_rootId");U(this,"_lastRuleId");U(this,"_ruleId2desc");U(this,"_includedGrammars");U(this,"_grammarRepository");U(this,"_grammar");U(this,"_injections");U(this,"_basicScopeAttributesProvider");U(this,"_tokenTypeMatchers");if(this._rootScopeName=t,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new v1(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=fu(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const l of Object.keys(s)){const c=us(l,fs);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:s[l]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let o in s)hu(e,o,s[o],this,r);const i=this._grammarRepository.injections(n);i&&i.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&hu(e,l,a,this,a)}})}return e.sort((s,i)=>s.priority-i.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=fu(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=$f.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===uo.NULL){s=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),d=Cn.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),f=this.getRule(this._rootId).getName(null,null);let h;f?h=tr.createRootAndLookUpScopeName(f,d,this):h=tr.createRoot("unknown",d),e=new uo(null,this._rootId,-1,-1,!1,null,h,h)}else s=!1,e.reset();t=t+`
`;const i=this.createOnigString(t),o=i.content.length,a=new I1(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Bf(this,i,s,0,e,a,!0,r);return Df(i),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function fu(t,e){return t=XT(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var tr=class _t{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=(e==null?void 0:e.scopePath)??null;for(const i of n)s=vi.push(s,i.scopeNames),r=new _t(r,s,i.encodedTokenAttributes);return r}static createRoot(e,n){return new _t(null,new vi(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),i=new vi(null,e),o=r.themeProvider.themeMatch(i),a=_t.mergeAttributes(n,s,o);return new _t(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return _t.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,i=0,o=0;return r!==null&&(s=r.fontStyle,i=r.foregroundId,o=r.backgroundId),Cn.set(e,n.languageId,n.tokenType,null,s,i,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return _t._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const i of r)s=_t._pushAttributed(s,i,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),i=e.scopePath.push(n),o=r.themeProvider.themeMatch(i),a=_t.mergeAttributes(e.tokenAttributes,s,o);return new _t(e,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){var s;const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(((s=r.parent)==null?void 0:s.scopePath)??null)}),r=r.parent;return r===e?n.reverse():void 0}},rt,uo=(rt=class{constructor(e,n,r,s,i,o,a,l){U(this,"_stackElementBrand");U(this,"_enterPos");U(this,"_anchorPos");U(this,"depth");this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}equals(e){return e===null?!1:rt._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?tr.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){rt._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,i,o,a){return new rt(this,e,n,r,s,i,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){var r,s;return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${(r=this.nameScopesList)==null?void 0:r.toString()}, ${(s=this.contentNameScopesList)==null?void 0:s.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new rt(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){var e,n,r;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((n=this.nameScopesList)==null?void 0:n.getExtensionIfDefined(((e=this.parent)==null?void 0:e.nameScopesList)??null))??[],contentNameScopesList:((r=this.contentNameScopesList)==null?void 0:r.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(e,n){const r=tr.fromExtension((e==null?void 0:e.nameScopesList)??null,n.nameScopesList);return new rt(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,tr.fromExtension(r,n.contentNameScopesList))}},U(rt,"NULL",new rt(null,0,0,0,!1,null,null,null)),rt),N1=class{constructor(t,e){U(this,"balancedBracketScopes");U(this,"unbalancedBracketScopes");U(this,"allowAny",!1);this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):us(n,fs).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>us(n,fs).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},I1=class{constructor(t,e,n,r){U(this,"_emitBinaryTokens");U(this,"_lineText");U(this,"_tokens");U(this,"_binaryTokens");U(this,"_lastTokenEndIndex");U(this,"_tokenTypeOverrides");this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){var r;if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let s=(t==null?void 0:t.tokenAttributes)??0,i=!1;if((r=this.balancedBracketSelectors)!=null&&r.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const o=(t==null?void 0:t.getScopeNames())??[];for(const a of this._tokenTypeOverrides)a.matcher(o)&&(s=Cn.set(s,0,a.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(o))}if(i&&(s=Cn.set(s,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),this._lastTokenEndIndex=e;return}const n=(t==null?void 0:t.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},L1=class{constructor(t,e){U(this,"_grammars",new Map);U(this,"_rawGrammars",new Map);U(this,"_injectionGrammars",new Map);U(this,"_theme");this._onigLib=e,this._theme=t}dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let i=this._rawGrammars.get(t);if(!i)return null;this._grammars.set(t,C1(t,i,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},k1=class{constructor(e){U(this,"_options");U(this,"_syncRegistry");U(this,"_ensureGrammarCache");this._options=e,this._syncRegistry=new L1(cs.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(cs.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new N1(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,i){const o=new l1(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,s,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,i=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,i)}},ho=uo.NULL;const j1=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],D1=/["&'<>`]/g,O1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M1=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,$1=/[|\\{}()[\]^$+*?.]/g,mu=new WeakMap;function V1(t,e){if(t=t.replace(e.subset?B1(e.subset):D1,r),e.subset||e.escapeOnly)return t;return t.replace(O1,n).replace(M1,r);function n(s,i,o){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,o.charCodeAt(i+2),e)}function r(s,i,o){return e.format(s.charCodeAt(0),o.charCodeAt(i+1),e)}}function B1(t){let e=mu.get(t);return e||(e=F1(t),mu.set(t,e)),e}function F1(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace($1,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const H1=/[\dA-Fa-f]/;function G1(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!H1.test(String.fromCharCode(e))?r:r+";"}const U1=/\d/;function z1(t,e,n){const r="&#"+String(t);return n&&e&&!U1.test(String.fromCharCode(e))?r:r+";"}const W1=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],wi={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},K1=["cent","copy","divide","gt","lt","not","para","times"],Hf={}.hasOwnProperty,fo={};let Gr;for(Gr in wi)Hf.call(wi,Gr)&&(fo[wi[Gr]]=Gr);const X1=/[^\dA-Za-z]/;function Y1(t,e,n,r){const s=String.fromCharCode(t);if(Hf.call(fo,s)){const i=fo[s],o="&"+i;return n&&W1.includes(i)&&!K1.includes(i)&&(!r||e&&e!==61&&X1.test(String.fromCharCode(e)))?o:o+";"}return""}function q1(t,e,n){let r=G1(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=Y1(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const i=z1(t,e,n.omitOptionalSemicolons);i.length<r.length&&(r=i)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function vn(t,e){return V1(t,Object.assign({format:q1},e))}const Z1=/^>|^->|<!--|-->|--!>|<!-$/g,J1=[">"],Q1=["<",">"];function eA(t,e,n,r){return r.settings.bogusComments?"<?"+vn(t.value,Object.assign({},r.settings.characterReferences,{subset:J1}))+">":"<!--"+t.value.replace(Z1,s)+"-->";function s(i){return vn(i,Object.assign({},r.settings.characterReferences,{subset:Q1}))}}function tA(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const Ce=Uf(1),Gf=Uf(-1),nA=[];function Uf(t){return e;function e(n,r,s){const i=n?n.children:nA;let o=(r||0)+t,a=i[o];if(!s)for(;a&&To(a);)o+=t,a=i[o];return a}}const rA={}.hasOwnProperty;function zf(t){return e;function e(n,r,s){return rA.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const Ra=zf({body:iA,caption:bi,colgroup:bi,dd:cA,dt:lA,head:bi,html:sA,li:aA,optgroup:uA,option:dA,p:oA,rp:pu,rt:pu,tbody:fA,td:gu,tfoot:mA,th:gu,thead:hA,tr:pA});function bi(t,e,n){const r=Ce(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&To(r.value.charAt(0)))}function sA(t,e,n){const r=Ce(n,e);return!r||r.type!=="comment"}function iA(t,e,n){const r=Ce(n,e);return!r||r.type!=="comment"}function oA(t,e,n){const r=Ce(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function aA(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&r.tagName==="li"}function lA(t,e,n){const r=Ce(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function cA(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function pu(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function uA(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function dA(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function hA(t,e,n){const r=Ce(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function fA(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function mA(t,e,n){return!Ce(n,e)}function pA(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function gu(t,e,n){const r=Ce(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const gA=zf({body:vA,colgroup:xA,head:yA,html:_A,tbody:wA});function _A(t){const e=Ce(t,-1);return!e||e.type!=="comment"}function yA(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function vA(t){const e=Ce(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&To(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function xA(t,e,n){const r=Gf(n,e),s=Ce(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Ra(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function wA(t,e,n){const r=Gf(n,e),s=Ce(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Ra(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Ur={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function bA(t,e,n,r){const s=r.schema,i=s.space==="svg"?!1:r.settings.omitOptionalTags;let o=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;s.space==="html"&&t.tagName==="svg"&&(r.schema=md);const c=EA(r,t.properties),u=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,u&&(o=!1),(c||!i||!gA(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(s.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!i||!Ra(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function EA(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const i=SA(t,s,e[s]);i&&n.push(i)}}for(;++r<n.length;){const i=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&i!=='"'&&i!=="'"&&(n[r]+=" ")}return n.join("")}function SA(t,e,n){const r=xg(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,i=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=vn(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Ur.name[s][i]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?wg:bg)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=vn(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Ur.unquoted[s][i]}))),a!==n&&(t.settings.quoteSmart&&el(n,o)>el(n,t.alternative)&&(o=t.alternative),a=o+vn(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?Ur.single:Ur.double)[s][i],attribute:!0}))+o),l+(a&&"="+a))}const TA=["<","&"];function Wf(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:vn(t.value,Object.assign({},r.settings.characterReferences,{subset:TA}))}function AA(t,e,n,r){return r.settings.allowDangerousHtml?t.value:Wf(t,e,n,r)}function CA(t,e,n,r){return r.all(t)}const RA=yg("type",{invalid:PA,unknown:NA,handlers:{comment:eA,doctype:tA,element:bA,raw:AA,root:CA,text:Wf}});function PA(t){throw new Error("Expected node, not `"+t+"`")}function NA(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const IA={},LA={},kA=[];function jA(t,e){const n=IA,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:DA,all:OA,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||j1,characterReferences:n.characterReferences||LA,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?md:Eg,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function DA(t,e,n){return RA(t,e,n,this)}function OA(t){const e=[],n=t&&t.children||kA;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function MA(t){return Array.isArray(t)?t:[t]}function Ms(t,e=!1){var i;const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let o=0;o<n.length;o+=2){const a=e?n[o]+(n[o+1]||""):n[o];s.push([a,r]),r+=n[o].length,r+=((i=n[o+1])==null?void 0:i.length)||0}return s}function Pa(t){return!t||["plaintext","txt","text","plain"].includes(t)}function Kf(t){return t==="ansi"||Pa(t)}function Na(t){return t==="none"}function Xf(t){return Na(t)}function Yf(t,e){var r;if(!e)return t;t.properties||(t.properties={}),(r=t.properties).class||(r.class=[]),typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const s of n)s&&!t.properties.class.includes(s)&&t.properties.class.push(s);return t}function $A(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function VA(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const i=n.filter(o=>s.offset<o&&o<s.offset+s.content.length).map(o=>o-s.offset).sort((o,a)=>o-a);return i.length?$A(s,i):s})):t}async function qf(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function ms(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,i]of Object.entries((e==null?void 0:e.colorReplacements)||{}))typeof i=="string"?n[s]=i:s===r&&Object.assign(n,i);return n}function Kt(t,e){return t&&((e==null?void 0:e[t==null?void 0:t.toLowerCase()])||t)}function Zf(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&Tt.Italic&&(e["font-style"]="italic"),t.fontStyle&Tt.Bold&&(e["font-weight"]="bold"),t.fontStyle&Tt.Underline&&(e["text-decoration"]="underline")),e}function BA(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function FA(t){const e=Ms(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let i=s,o=0;for(const a of e){if(i<a.length)break;i-=a.length,o++}return{line:o,character:i}}function r(s,i){let o=0;for(let a=0;a<s;a++)o+=e[a].length;return o+=i,o}return{lines:e,indexToPos:n,posToIndex:r}}class Fe extends Error{constructor(e){super(e),this.name="ShikiError"}}const Jf=new WeakMap;function $s(t,e){Jf.set(t,e)}function gr(t){return Jf.get(t)}class jn{constructor(...e){U(this,"_stacks",{});U(this,"lang");if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new jn(Object.fromEntries(MA(n).map(r=>[r,ho])),e)}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return _u(this._stacks[this.theme])}getScopes(e=this.theme){return _u(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function _u(t){const e=[],n=new Set;function r(s){var o;if(n.has(s))return;n.add(s);const i=(o=s==null?void 0:s.nameScopesList)==null?void 0:o.scopeName;i&&e.push(i),s.parent&&r(s.parent)}return r(t),e}function HA(t,e){if(!(t instanceof jn))throw new Fe("Invalid grammar state");return t.getInternalStack(e)}function GA(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new Fe(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...s.indexToPos(o),offset:o}}else{const a=s.lines[o.line];if(a===void 0)throw new Fe(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${s.lines.length}`);if(o.character<0||o.character>a.length)throw new Fe(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:s.posToIndex(o.line,o.character)}}};const s=FA(n.source),i=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));UA(i),t.set(n.meta,{decorations:i,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){var o;if(!((o=this.options.decorations)!=null&&o.length))return;const s=e(this).decorations.flatMap(a=>[a.start.offset,a.end.offset]);return VA(n,s)},code(n){var u;if(!((u=this.options.decorations)!=null&&u.length))return;const r=e(this),s=Array.from(n.children).filter(d=>d.type==="element"&&d.tagName==="span");if(s.length!==r.converter.lines.length)throw new Fe(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(d,f,h,p){const _=s[d];let g="",x=-1,y=-1;if(f===0&&(x=0),h===0&&(y=0),h===Number.POSITIVE_INFINITY&&(y=_.children.length),x===-1||y===-1)for(let E=0;E<_.children.length;E++)g+=Qf(_.children[E]),x===-1&&g.length===f&&(x=E+1),y===-1&&g.length===h&&(y=E+1);if(x===-1)throw new Fe(`Failed to find start index for decoration ${JSON.stringify(p.start)}`);if(y===-1)throw new Fe(`Failed to find end index for decoration ${JSON.stringify(p.end)}`);const w=_.children.slice(x,y);if(!p.alwaysWrap&&w.length===_.children.length)a(_,p,"line");else if(!p.alwaysWrap&&w.length===1&&w[0].type==="element")a(w[0],p,"token");else{const E={type:"element",tagName:"span",properties:{},children:w};a(E,p,"wrapper"),_.children.splice(x,w.length,E)}}function o(d,f){s[d]=a(s[d],f,"line")}function a(d,f,h){var g;const p=f.properties||{},_=f.transform||(x=>x);return d.tagName=f.tagName||"span",d.properties={...d.properties,...p,class:d.properties.class},(g=f.properties)!=null&&g.class&&Yf(d,f.properties.class),d=_(d,h)||d,d}const l=[],c=r.decorations.sort((d,f)=>f.start.offset-d.start.offset);for(const d of c){const{start:f,end:h}=d;if(f.line===h.line)i(f.line,f.character,h.character,d);else if(f.line<h.line){i(f.line,f.character,Number.POSITIVE_INFINITY,d);for(let p=f.line+1;p<h.line;p++)l.unshift(()=>o(p,d));i(h.line,0,h.character,d)}}l.forEach(d=>d())}}}function UA(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new Fe(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],i=n.start.offset<s.start.offset&&s.start.offset<n.end.offset,o=n.start.offset<s.end.offset&&s.end.offset<n.end.offset,a=s.start.offset<n.start.offset&&n.start.offset<s.end.offset,l=s.start.offset<n.end.offset&&n.end.offset<s.end.offset;if(i||o||a||l){if(o&&o||a&&l)continue;throw new Fe(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function Qf(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(Qf).join(""):""}const zA=[GA()];function ps(t){return[...t.transformers||[],...zA]}var Xt=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Ei={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function WA(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function yu(t,e){let n=1;const r=t[e+n++];let s;if(r==="2"){const i=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));i.length===3&&!i.some(o=>Number.isNaN(o))&&(s={type:"rgb",rgb:i})}else if(r==="5"){const i=Number.parseInt(t[e+n]);Number.isNaN(i)||(s={type:"table",index:Number(i)})}return[n,s]}function KA(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],s=Number.parseInt(r);if(!Number.isNaN(s))if(s===0)e.push({type:"resetAll"});else if(s<=9)Ei[s]&&e.push({type:"setDecoration",value:Ei[s]});else if(s<=29){const i=Ei[s-20];i&&e.push({type:"resetDecoration",value:i})}else if(s<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Xt[s-30]}});else if(s===38){const[i,o]=yu(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=i}else if(s===39)e.push({type:"resetForegroundColor"});else if(s<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Xt[s-40]}});else if(s===48){const[i,o]=yu(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=i}else s===49?e.push({type:"resetBackgroundColor"}):s>=90&&s<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Xt[s-90+8]}}):s>=100&&s<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Xt[s-100+8]}})}return e}function XA(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let i=0;do{const o=WA(r,i),a=o.sequence?r.substring(i,o.startPosition):r.substring(i);if(a.length>0&&s.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=KA(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}i=o.position}while(i<r.length);return s}}}var YA={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function qA(t=YA){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let c=0;c<Xt.length;c++)r.push(e(Xt[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let d=0;d<6;d++)r.push(n([a[c],a[u],a[d]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function i(a){return s()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return i(a.index)}}return{value:o}}function ZA(t,e,n){const r=ms(t,n),s=Ms(e),i=qA(Object.fromEntries(Xt.map(a=>{var l;return[a,(l=t.colors)==null?void 0:l[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]}))),o=XA();return s.map(a=>o.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?i.value(l.background):t.bg,u=l.foreground?i.value(l.foreground):t.fg):(c=l.foreground?i.value(l.foreground):t.fg,u=l.background?i.value(l.background):void 0),c=Kt(c,r),u=Kt(u,r),l.decorations.has("dim")&&(c=JA(c));let d=Tt.None;return l.decorations.has("bold")&&(d|=Tt.Bold),l.decorations.has("italic")&&(d|=Tt.Italic),l.decorations.has("underline")&&(d|=Tt.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:d}}))}function JA(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Ia(t,e,n={}){const{lang:r="text",theme:s=t.getLoadedThemes()[0]}=n;if(Pa(r)||Na(s))return Ms(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:i,colorMap:o}=t.setTheme(s);if(r==="ansi")return ZA(i,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new Rt(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(i.name))throw new Rt(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return eC(e,a,i,o,n)}function QA(...t){if(t.length===2)return gr(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:i=e.getLoadedThemes()[0]}=r;if(Pa(s)||Na(i))throw new Rt("Plain language does not have grammar state");if(s==="ansi")throw new Rt("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(i),l=e.getLanguage(s);return new jn(gs(n,l,o,a,r).stateStack,l.name,o.name)}function eC(t,e,n,r,s){const i=gs(t,e,n,r,s),o=new jn(gs(t,e,n,r,s).stateStack,e.name,n.name);return $s(i.tokens,o),i.tokens}function gs(t,e,n,r,s){const i=ms(n,s),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=s,l=Ms(t);let c=s.grammarState?HA(s.grammarState,n.name)??ho:s.grammarContextCode!=null?gs(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:ho,u=[];const d=[];for(let f=0,h=l.length;f<h;f++){const[p,_]=l[f];if(p===""){u=[],d.push([]);continue}if(o>0&&p.length>=o){u=[],d.push([{content:p,offset:_,color:"",fontStyle:0}]);continue}let g,x,y;s.includeExplanation&&(g=e.tokenizeLine(p,c),x=g.tokens,y=0);const w=e.tokenizeLine2(p,c,a),E=w.tokens.length/2;for(let S=0;S<E;S++){const R=w.tokens[2*S],k=S+1<E?w.tokens[2*S+2]:p.length;if(R===k)continue;const P=w.tokens[2*S+1],L=Kt(r[Cn.getForeground(P)],i),V=Cn.getFontStyle(P),j={content:p.substring(R,k),offset:_+R,color:L,fontStyle:V};if(s.includeExplanation){const O=[];if(s.includeExplanation!=="scopeName")for(const A of n.settings){let N;switch(typeof A.scope){case"string":N=A.scope.split(/,/).map(F=>F.trim());break;case"object":N=A.scope;break;default:continue}O.push({settings:A,selectors:N.map(F=>F.split(/ /))})}j.explanation=[];let z=0;for(;R+z<k;){const A=x[y],N=p.substring(A.startIndex,A.endIndex);z+=N.length,j.explanation.push({content:N,scopes:s.includeExplanation==="scopeName"?tC(A.scopes):nC(O,A.scopes)}),y+=1}}u.push(j)}d.push(u),u=[],c=w.ruleStack}return{tokens:d,stateStack:c}}function tC(t){return t.map(e=>({scopeName:e}))}function nC(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const i=e[r];n[r]={scopeName:i,themeMatches:sC(t,i,e.slice(0,r))}}return n}function vu(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function rC(t,e,n){if(!vu(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)vu(t[r],n[s])&&(r-=1),s-=1;return r===-1}function sC(t,e,n){const r=[];for(const{selectors:s,settings:i}of t)for(const o of s)if(rC(o,e,n)){r.push(i);break}return r}function em(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),s=r.map(l=>{const c=Ia(t,e,{...n,theme:l.theme}),u=gr(c),d=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:d}}),i=iC(...s.map(l=>l.tokens)),o=i[0].map((l,c)=>l.map((u,d)=>{const f={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(f.explanation=u.explanation),i.forEach((h,p)=>{const{content:_,explanation:g,offset:x,...y}=h[c][d];f.variants[r[p].color]=y}),f})),a=s[0].state?new jn(Object.fromEntries(s.map(l=>{var c;return[l.theme,(c=l.state)==null?void 0:c.getInternalStack(l.theme)]})),s[0].state.lang):void 0;return a&&$s(o,a),o}function iC(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(l=>l[r]),i=e.map(()=>[]);e.forEach((l,c)=>l.push(i[c]));const o=s.map(()=>0),a=s.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(i[c].push(u),o[c]+=1,a[c]=s[c][o[c]]):(i[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}function _s(t,e,n){let r,s,i,o,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=n,d=Object.entries(n.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})).sort((g,x)=>g.color===c?-1:x.color===c?1:0);if(d.length===0)throw new Rt("`themes` option must not be empty");const f=em(t,e,n);if(l=gr(f),c&&!d.find(g=>g.color===c))throw new Rt(`\`themes\` option must contain the defaultColor key \`${c}\``);const h=d.map(g=>t.getTheme(g.theme)),p=d.map(g=>g.color);i=f.map(g=>g.map(x=>oC(x,p,u,c))),l&&$s(i,l);const _=d.map(g=>ms(g.theme,n));s=d.map((g,x)=>(x===0&&c?"":`${u+g.color}:`)+(Kt(h[x].fg,_[x])||"inherit")).join(";"),r=d.map((g,x)=>(x===0&&c?"":`${u+g.color}-bg:`)+(Kt(h[x].bg,_[x])||"inherit")).join(";"),o=`shiki-themes ${h.map(g=>g.name).join(" ")}`,a=c?void 0:[s,r].join(";")}else if("theme"in n){const c=ms(n.theme,n);i=Ia(t,e,n);const u=t.getTheme(n.theme);r=Kt(u.bg,c),s=Kt(u.fg,c),o=u.name,l=gr(i)}else throw new Rt("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:s,bg:r,themeName:o,rootStyle:a,grammarState:l}}function oC(t,e,n,r){const s={content:t.content,explanation:t.explanation,offset:t.offset},i=e.map(l=>Zf(t.variants[l])),o=new Set(i.flatMap(l=>Object.keys(l))),a={};return i.forEach((l,c)=>{for(const u of o){const d=l[u]||"inherit";if(c===0&&r)a[u]=d;else{const f=u==="color"?"":u==="background-color"?"-bg":`-${u}`,h=n+e[c]+(u==="color"?"":f);a[h]=d}}}),s.htmlStyle=a,s}function ys(t,e,n,r={meta:{},options:n,codeToHast:(s,i)=>ys(t,s,i),codeToTokens:(s,i)=>_s(t,s,i)}){var h,p;let s=e;for(const _ of ps(n))s=((h=_.preprocess)==null?void 0:h.call(r,s,n))||s;let{tokens:i,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:u}=_s(t,s,n);const{mergeWhitespaces:d=!0}=n;d===!0?i=lC(i):d==="never"&&(i=cC(i));const f={...r,get source(){return s}};for(const _ of ps(n))i=((p=_.tokens)==null?void 0:p.call(f,i))||i;return aC(i,{...n,fg:o,bg:a,themeName:l,rootStyle:c},f,u)}function aC(t,e,n,r=gr(t)){var p,_,g;const s=ps(e),i=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([x])=>!x.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:i};const d=[],f={...n,structure:a,addClassToHast:Yf,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return c},get code(){return u},get lines(){return d}};if(t.forEach((x,y)=>{var S,R;y&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&i.push({type:"text",value:`
`}));let w={type:"element",tagName:"span",properties:{class:"line"},children:[]},E=0;for(const k of x){let P={type:"element",tagName:"span",properties:{...k.htmlAttrs},children:[{type:"text",value:k.content}]};k.htmlStyle;const L=BA(k.htmlStyle||Zf(k));L&&(P.properties.style=L);for(const V of s)P=((S=V==null?void 0:V.span)==null?void 0:S.call(f,P,y+1,E,w,k))||P;a==="inline"?o.children.push(P):a==="classic"&&w.children.push(P),E+=k.content.length}if(a==="classic"){for(const k of s)w=((R=k==null?void 0:k.line)==null?void 0:R.call(f,w,y+1))||w;d.push(w),i.push(w)}}),a==="classic"){for(const x of s)u=((p=x==null?void 0:x.code)==null?void 0:p.call(f,u))||u;c.children.push(u);for(const x of s)c=((_=x==null?void 0:x.pre)==null?void 0:_.call(f,c))||c;o.children.push(c)}let h=o;for(const x of s)h=((g=x==null?void 0:x.root)==null?void 0:g.call(f,h))||h;return r&&$s(h,r),h}function lC(t){return t.map(e=>{const n=[];let r="",s=0;return e.forEach((i,o)=>{const l=!(i.fontStyle&&i.fontStyle&Tt.Underline);l&&i.content.match(/^\s+$/)&&e[o+1]?(s||(s=i.offset),r+=i.content):r?(l?n.push({...i,offset:s,content:r+i.content}):n.push({content:r,offset:s},i),s=0,r=""):n.push(i)}),n})}function cC(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,i,o]=r;if(!s&&!o)return n;const a=[{...n,offset:n.offset+s.length,content:i}];return s&&a.unshift({content:s,offset:n.offset}),o&&a.push({content:o,offset:n.offset+s.length+i.length}),a}))}function uC(t,e,n){var i;const r={meta:{},options:n,codeToHast:(o,a)=>ys(t,o,a),codeToTokens:(o,a)=>_s(t,o,a)};let s=jA(ys(t,e,n,r));for(const o of ps(n))s=((i=o.postprocess)==null?void 0:i.call(r,s,n))||s;return s}const xu={light:"#333333",dark:"#bbbbbb"},wu={light:"#fffffe",dark:"#1e1e1e"},bu="__shiki_resolved";function La(t){var a,l,c,u,d;if(t!=null&&t[bu])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||(e.type="dark"),e.colorReplacements={...e.colorReplacements},e.settings||(e.settings=[]);let{bg:n,fg:r}=e;if(!n||!r){const f=e.settings?e.settings.find(h=>!h.name&&!h.scope):void 0;(a=f==null?void 0:f.settings)!=null&&a.foreground&&(r=f.settings.foreground),(l=f==null?void 0:f.settings)!=null&&l.background&&(n=f.settings.background),!r&&((c=e==null?void 0:e.colors)!=null&&c["editor.foreground"])&&(r=e.colors["editor.foreground"]),!n&&((u=e==null?void 0:e.colors)!=null&&u["editor.background"])&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?xu.light:xu.dark),n||(n=e.type==="light"?wu.light:wu.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const i=new Map;function o(f){var p;if(i.has(f))return i.get(f);s+=1;const h=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return(p=e.colorReplacements)!=null&&p[`#${h}`]?o(f):(i.set(f,h),h)}e.settings=e.settings.map(f=>{var g,x;const h=((g=f.settings)==null?void 0:g.foreground)&&!f.settings.foreground.startsWith("#"),p=((x=f.settings)==null?void 0:x.background)&&!f.settings.background.startsWith("#");if(!h&&!p)return f;const _={...f,settings:{...f.settings}};if(h){const y=o(f.settings.foreground);e.colorReplacements[y]=f.settings.foreground,_.settings.foreground=y}if(p){const y=o(f.settings.background);e.colorReplacements[y]=f.settings.background,_.settings.background=y}return _});for(const f of Object.keys(e.colors||{}))if((f==="editor.foreground"||f==="editor.background"||f.startsWith("terminal.ansi"))&&!((d=e.colors[f])!=null&&d.startsWith("#"))){const h=o(e.colors[f]);e.colorReplacements[h]=e.colors[f],e.colors[f]=h}return Object.defineProperty(e,bu,{enumerable:!1,writable:!1,value:!0}),e}async function tm(t){return Array.from(new Set((await Promise.all(t.filter(e=>!Kf(e)).map(async e=>await qf(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function nm(t){return(await Promise.all(t.map(async n=>Xf(n)?null:La(await qf(n))))).filter(n=>!!n)}class dC extends k1{constructor(n,r,s,i={}){super(n);U(this,"_resolvedThemes",new Map);U(this,"_resolvedGrammars",new Map);U(this,"_langMap",new Map);U(this,"_langGraph",new Map);U(this,"_textmateThemeCache",new WeakMap);U(this,"_loadedThemesCache",null);U(this,"_loadedLanguagesCache",null);this._resolver=n,this._themes=r,this._langs=s,this._alias=i,this._themes.map(o=>this.loadTheme(o)),this.loadLanguages(this._langs)}getTheme(n){return typeof n=="string"?this._resolvedThemes.get(n):this.loadTheme(n)}loadTheme(n){const r=La(n);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(n){let r=this._textmateThemeCache.get(n);r||(r=cs.createFromRawTheme(n),this._textmateThemeCache.set(n,r)),this._syncRegistry.setTheme(r)}getGrammar(n){if(this._alias[n]){const r=new Set([n]);for(;this._alias[n];){if(n=this._alias[n],r.has(n))throw new Fe(`Circular alias \`${Array.from(r).join(" -> ")} -> ${n}\``);r.add(n)}}return this._resolvedGrammars.get(n)}loadLanguage(n){var o,a,l,c;if(this.getGrammar(n.name))return;const r=new Set([...this._langMap.values()].filter(u=>{var d;return(d=u.embeddedLangsLazy)==null?void 0:d.includes(n.name)}));this._resolver.addLanguage(n);const s={balancedBracketSelectors:n.balancedBracketSelectors||["*"],unbalancedBracketSelectors:n.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(n.scopeName,n);const i=this.loadGrammarWithConfiguration(n.scopeName,1,s);if(i.name=n.name,this._resolvedGrammars.set(n.name,i),n.aliases&&n.aliases.forEach(u=>{this._alias[u]=n.name}),this._loadedLanguagesCache=null,r.size)for(const u of r)this._resolvedGrammars.delete(u.name),this._loadedLanguagesCache=null,(a=(o=this._syncRegistry)==null?void 0:o._injectionGrammars)==null||a.delete(u.scopeName),(c=(l=this._syncRegistry)==null?void 0:l._grammars)==null||c.delete(u.scopeName),this.loadLanguage(this._langMap.get(u.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(n){for(const i of n)this.resolveEmbeddedLanguages(i);const r=Array.from(this._langGraph.entries()),s=r.filter(([i,o])=>!o);if(s.length){const i=r.filter(([o,a])=>{var l;return a&&((l=a.embeddedLangs)==null?void 0:l.some(c=>s.map(([u])=>u).includes(c)))}).filter(o=>!s.includes(o));throw new Fe(`Missing languages ${s.map(([o])=>`\`${o}\``).join(", ")}, required by ${i.map(([o])=>`\`${o}\``).join(", ")}`)}for(const[i,o]of r)this._resolver.addLanguage(o);for(const[i,o]of r)this.loadLanguage(o)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(n){if(this._langMap.set(n.name,n),this._langGraph.set(n.name,n),n.embeddedLangs)for(const r of n.embeddedLangs)this._langGraph.set(r,this._langMap.get(r))}}class hC{constructor(e,n){U(this,"_langs",new Map);U(this,"_scopeToLang",new Map);U(this,"_injections",new Map);U(this,"_onigLib");this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const i=n.slice(0,s).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let Bn=0;function fC(t){Bn+=1,t.warnings!==!1&&Bn>=10&&Bn%10===0&&console.warn(`[Shiki] ${Bn} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Fe("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(La),s=new hC(t.engine,n),i=new dC(s,r,n,t.langAlias);let o;function a(y){g();const w=i.getGrammar(typeof y=="string"?y:y.name);if(!w)throw new Fe(`Language \`${y}\` not found, you may need to load it first`);return w}function l(y){if(y==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};g();const w=i.getTheme(y);if(!w)throw new Fe(`Theme \`${y}\` not found, you may need to load it first`);return w}function c(y){g();const w=l(y);o!==y&&(i.setTheme(w),o=y);const E=i.getColorMap();return{theme:w,colorMap:E}}function u(){return g(),i.getLoadedThemes()}function d(){return g(),i.getLoadedLanguages()}function f(...y){g(),i.loadLanguages(y.flat(1))}async function h(...y){return f(await tm(y))}function p(...y){g();for(const w of y.flat(1))i.loadTheme(w)}async function _(...y){return g(),p(await nm(y))}function g(){if(e)throw new Fe("Shiki instance has been disposed")}function x(){e||(e=!0,i.dispose(),Bn-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:d,loadLanguage:h,loadLanguageSync:f,loadTheme:_,loadThemeSync:p,dispose:x,[Symbol.dispose]:x}}async function mC(t={}){t.loadWasm;const[e,n,r]=await Promise.all([nm(t.themes||[]),tm(t.langs||[]),t.engine||Af(t.loadWasm||KT())]);return fC({...t,loadWasm:void 0,themes:e,langs:n,engine:r})}async function pC(t={}){const e=await mC(t);return{getLastGrammarState:(...n)=>QA(e,...n),codeToTokensBase:(n,r)=>Ia(e,n,r),codeToTokensWithThemes:(n,r)=>em(e,n,r),codeToTokens:(n,r)=>_s(e,n,r),codeToHast:(n,r)=>ys(e,n,r),codeToHtml:(n,r)=>uC(e,n,r),...e,getInternalContext:()=>e}}function gC(t,e,n){let r,s,i;{const a=t;r=a.langs,s=a.themes,i=a.engine}async function o(a){function l(h){if(typeof h=="string"){if(Kf(h))return[];const p=r[h];if(!p)throw new Rt(`Language \`${h}\` is not included in this bundle. You may want to load it from external source.`);return p}return h}function c(h){if(Xf(h))return"none";if(typeof h=="string"){const p=s[h];if(!p)throw new Rt(`Theme \`${h}\` is not included in this bundle. You may want to load it from external source.`);return p}return h}const u=(a.themes??[]).map(h=>c(h)),d=(a.langs??[]).map(h=>l(h)),f=await pC({engine:a.engine??i(),...a,themes:u,langs:d});return{...f,loadLanguage(...h){return f.loadLanguage(...h.map(l))},loadTheme(...h){return f.loadTheme(...h.map(c))}}}return o}function _C(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function yC(t){const e=_C(t);return{getSingletonHighlighter(n){return e(n)},async codeToHtml(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHtml(n,r)},async codeToHast(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHast(n,r)},async codeToTokens(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToTokens(n,r)},async codeToTokensBase(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).codeToTokensBase(n,r)},async codeToTokensWithThemes(n,r){return(await e({langs:[r.lang],themes:Object.values(r.themes).filter(Boolean)})).codeToTokensWithThemes(n,r)},async getLastGrammarState(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).getLastGrammarState(n,r)}}}const vC=gC({langs:CT,themes:PT,engine:()=>Af(b(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:Eu,codeToHast:nI,codeToTokens:rI,codeToTokensBase:sI,codeToTokensWithThemes:iI,getSingletonHighlighter:oI,getLastGrammarState:aI}=yC(vC),xC=v.createContext({code:""}),wC={name:"line-numbers",line(t,e){t.children.unshift({type:"element",tagName:"span",properties:{className:["inline-block","min-w-10","mr-4","text-right","select-none","text-muted-foreground"]},children:[{type:"text",value:String(e)}]})}};async function bC(t,e,n=!1){const r=n?[wC]:[];return await Promise.all([Eu(t,{lang:e,theme:"one-light",transformers:r}),Eu(t,{lang:e,theme:"one-dark-pro",transformers:r})])}const mo=({code:t,language:e,showLineNumbers:n=!1,className:r,children:s,...i})=>{const[o,a]=v.useState(""),[l,c]=v.useState(""),u=v.useRef(!1);return v.useEffect(()=>(bC(t,e,n).then(([d,f])=>{u.current||(a(d),c(f),u.current=!0)}),()=>{u.current=!1}),[t,e,n]),m.jsx(xC.Provider,{value:{code:t},children:m.jsx("div",{className:ge("group relative w-full overflow-hidden rounded-md border bg-background text-foreground",r),...i,children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"overflow-hidden dark:hidden [&>pre]:m-0 [&>pre]:bg-background! [&>pre]:p-4 [&>pre]:text-foreground! [&>pre]:text-sm [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:o}}),m.jsx("div",{className:"hidden overflow-hidden dark:block [&>pre]:m-0 [&>pre]:bg-background! [&>pre]:p-4 [&>pre]:text-foreground! [&>pre]:text-sm [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:l}}),s&&m.jsx("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:s})]})})})},rm=({className:t,...e})=>m.jsx(Fp,{className:ge("not-prose mb-4 w-full rounded-md border",t),...e}),EC=t=>{const e={"input-streaming":"Pending","input-available":"Running","approval-requested":"Awaiting Approval","approval-responded":"Responded","output-available":"Completed","output-error":"Error","output-denied":"Denied"},n={"input-streaming":m.jsx(zp,{className:"size-4"}),"input-available":m.jsx(tl,{className:"size-4 animate-pulse"}),"approval-requested":m.jsx(tl,{className:"size-4 text-yellow-600"}),"approval-responded":m.jsx(nl,{className:"size-4 text-blue-600"}),"output-available":m.jsx(nl,{className:"size-4 text-green-600"}),"output-error":m.jsx(ll,{className:"size-4 text-red-600"}),"output-denied":m.jsx(ll,{className:"size-4 text-orange-600"})};return m.jsxs(qn,{className:"gap-1.5 rounded-full text-xs",variant:"secondary",children:[n[t],e[t]]})},sm=({className:t,title:e,type:n,state:r,...s})=>m.jsxs(Hp,{className:ge("flex w-full items-center justify-between gap-4 p-3",t),...s,children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Gp,{className:"size-4 text-muted-foreground"}),m.jsx("span",{className:"font-medium text-sm",children:e??n.split("-").slice(1).join("-")}),EC(r)]}),m.jsx(Tg,{className:"size-4 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]}),im=({className:t,...e})=>m.jsx(Up,{className:ge("data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 text-popover-foreground outline-none data-[state=closed]:animate-out data-[state=open]:animate-in",t),...e}),SC=({className:t,input:e,...n})=>m.jsxs("div",{className:ge("space-y-2 overflow-hidden p-4",t),...n,children:[m.jsx("h4",{className:"font-medium text-muted-foreground text-xs uppercase tracking-wide",children:"Parameters"}),m.jsx("div",{className:"rounded-md bg-muted/50",children:m.jsx(mo,{code:JSON.stringify(e,null,2),language:"json"})})]}),TC=({className:t,output:e,errorText:n,...r})=>{if(!(e||n))return null;let s=m.jsx("div",{children:e});return typeof e=="object"&&!v.isValidElement(e)?s=m.jsx(mo,{code:JSON.stringify(e,null,2),language:"json"}):typeof e=="string"&&(s=m.jsx(mo,{code:e,language:"json"})),m.jsxs("div",{className:ge("space-y-2 p-4",t),...r,children:[m.jsx("h4",{className:"font-medium text-muted-foreground text-xs uppercase tracking-wide",children:n?"Error":"Result"}),m.jsxs("div",{className:ge("overflow-x-auto rounded-md text-xs [&_table]:w-full",n?"bg-destructive/10 text-destructive":"bg-muted/50 text-foreground"),children:[n&&m.jsx("div",{children:n}),s]})]})};function Si({toolCalls:t}){return!t||t.length===0?null:m.jsx("div",{className:"space-y-2",children:t.map((e,n)=>m.jsx(AC,{toolCall:e},e.id||n))})}function AC({toolCall:t}){const e=`tool-${t.name}`;return m.jsxs(rm,{defaultOpen:!1,className:"w-full",children:[m.jsx(sm,{type:e,state:"input-available",title:t.name}),m.jsx(im,{children:m.jsx(SC,{input:t.args})})]})}function CC({message:t}){const e=typeof t.content=="string"?t.content:Array.isArray(t.content)?t.content.map(o=>typeof o=="string"?o:o.text||"").join(""):"",n="name"in t?t.name:"Unknown Tool",r=`tool-${n}`,s="output-available",i=m.jsx("div",{className:"whitespace-pre-wrap break-words overflow-wrap-anywhere max-w-full",children:e});return m.jsxs(rm,{defaultOpen:!0,className:"w-full",children:[m.jsx(sm,{type:r,state:s,title:`${n} Result`}),m.jsx(im,{children:m.jsx(TC,{output:i,errorText:void 0})})]})}function Su(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="agent-inbox")}function RC({interrupt:t}){return m.jsxs("div",{className:"p-4 border rounded-lg bg-muted",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Agent Inbox Interrupt"}),m.jsx("pre",{className:"text-xs mt-2 overflow-auto",children:JSON.stringify(t,null,2)})]})}function PC({interrupt:t}){return m.jsxs("div",{className:"p-4 border rounded-lg bg-yellow-50",children:[m.jsx("p",{className:"text-sm text-yellow-800",children:"Generic Interrupt"}),m.jsx("pre",{className:"text-xs mt-2 overflow-auto text-yellow-700",children:JSON.stringify(t,null,2)})]})}const en=v.createContext(null),NC=t=>{const e=v.useContext(en),[n,r]=e.mounted,[s]=e.content,[i]=e.title,o=n===t.id,a=t.children==null&&t.title==null;return v.useEffect(()=>{a&&r(l=>l===t.id?null:l)},[a,r,t.id]),o?m.jsxs(m.Fragment,{children:[i!=null?ki.createPortal(m.jsx(m.Fragment,{children:t.title}),i):null,s!=null?ki.createPortal(m.jsx(m.Fragment,{children:t.children}),s):null]}):null};function IC(t){const e=v.useContext(en),[n]=e.mounted,r=v.useRef(null),[,s]=e.content;return v.useLayoutEffect(()=>s==null?void 0:s(n?r.current:null),[s,n]),n?m.jsx("div",{...t,ref:r}):null}function LC(t){const e=v.useContext(en),n=v.useRef(null),[,r]=e.title;return v.useLayoutEffect(()=>r==null?void 0:r(n.current),[r]),m.jsx("div",{...t,ref:n})}function kC(t){const e=v.useState(null),n=v.useState(null),r=v.useState(null),s=v.useState(null),i=v.useState({});return m.jsx(en.Provider,{value:{open:r,mounted:s,title:n,content:e,context:i},children:t.children})}function jC(){const t=v.useId(),e=v.useContext(en),[n,r]=e.open,[s,i]=e.context,[,o]=e.mounted,a=n===t,l=v.useCallback(u=>{r(typeof u=="boolean"?u?t:null:d=>d===t?null:t),o(t)},[r,o,t]);return[v.useCallback(u=>m.jsx(NC,{id:t,title:u.title,children:u.children}),[t]),{open:a,setOpen:l,context:s,setContext:i}]}function DC(){const t=v.useContext(en),[e,n]=t.open,r=e!==null,s=v.useCallback(()=>n(null),[n]);return[r,s]}function OC(){return v.useContext(en).context}function MC({message:t,thread:e}){var i;const n=jC(),{values:r}=Ps(),s=(i=r.ui)==null?void 0:i.filter(o=>{var a;return((a=o.metadata)==null?void 0:a.message_id)===t.id});return s!=null&&s.length?m.jsx(m.Fragment,{children:s.map(o=>m.jsx(fx,{stream:e,message:o,meta:{ui:o,artifact:n}},o.id))},t.id):null}function $C(t){return t.filter(n=>n.type==="tool_use"&&n.id).map(n=>{const r=n;let s={};if(r!=null&&r.input)try{s=yd(r.input)??{}}catch{}return{name:r.name??"",id:r.id??"",args:s,type:"tool_call"}})}function Tu({interruptValue:t,isLastMessage:e,hasNoAIOrToolMessages:n}){return m.jsxs(m.Fragment,{children:[Su(t)&&(e||n)&&m.jsx(RC,{interrupt:t}),t&&!Su(t)&&(e||n)?m.jsx(PC,{interrupt:t}):null]})}function Au({message:t,isLoading:e,handleRegenerate:n}){var x,y;const r=(t==null?void 0:t.content)??[],s=zo(r),[i]=bn("hideToolCalls",od.withDefault(!1)),o=Ps(),a=o.messages[o.messages.length-1].id===(t==null?void 0:t.id),l=!o.messages.find(w=>w.type==="ai"||w.type==="tool"),c=t?o.getMessagesMetadata(t):void 0,u=o.interrupt,d=(x=c==null?void 0:c.firstSeenState)==null?void 0:x.parent_checkpoint,f=Array.isArray(r)?$C(r):void 0,h=t&&"tool_calls"in t&&t.tool_calls&&t.tool_calls.length>0,p=h&&((y=t.tool_calls)==null?void 0:y.some(w=>w.args&&Object.keys(w.args).length>0)),_=!!(f!=null&&f.length),g=(t==null?void 0:t.type)==="tool";return g&&i?null:m.jsx("div",{className:"group mr-auto flex items-start gap-2",children:m.jsx("div",{className:"flex flex-col gap-2",children:g?m.jsxs(m.Fragment,{children:[m.jsx(CC,{message:t}),m.jsx(Tu,{interruptValue:u==null?void 0:u.value,isLastMessage:a,hasNoAIOrToolMessages:l})]}):m.jsxs(m.Fragment,{children:[s.length>0&&m.jsx("div",{className:"py-1",children:m.jsx(Sg,{children:s})}),!i&&m.jsx(m.Fragment,{children:h&&p&&m.jsx(Si,{toolCalls:t.tool_calls})||_&&m.jsx(Si,{toolCalls:f})||h&&m.jsx(Si,{toolCalls:t.tool_calls})}),t&&m.jsx(MC,{message:t,thread:o}),m.jsx(Tu,{interruptValue:u==null?void 0:u.value,isLastMessage:a,hasNoAIOrToolMessages:l}),m.jsxs("div",{className:ge("mr-auto flex items-center gap-2 transition-opacity","opacity-0 group-focus-within:opacity-100 group-hover:opacity-100"),children:[m.jsx(Ef,{branch:c==null?void 0:c.branch,branchOptions:c==null?void 0:c.branchOptions,onSelect:w=>o.setBranch(w),isLoading:e}),m.jsx(Sf,{content:s,isLoading:e,isAiMessage:!0,handleRegenerate:()=>n(d)})]})]})})})}function VC(){return m.jsx("div",{className:"mr-auto flex items-start gap-2",children:m.jsxs("div",{className:"bg-muted flex h-8 items-center gap-1 rounded-2xl px-4 py-2",children:[m.jsx("div",{className:"bg-foreground/50 h-1.5 w-1.5 animate-[pulse_1.5s_ease-in-out_infinite] rounded-full"}),m.jsx("div",{className:"bg-foreground/50 h-1.5 w-1.5 animate-[pulse_1.5s_ease-in-out_0.5s_infinite] rounded-full"}),m.jsx("div",{className:"bg-foreground/50 h-1.5 w-1.5 animate-[pulse_1.5s_ease-in-out_1s_infinite] rounded-full"})]})})}const om=({block:t,removable:e=!1,onRemove:n,className:r,size:s="md"})=>{var i,o,a;if(t.type==="image"&&typeof t.mime_type=="string"&&t.mime_type.startsWith("image/")){const l=`data:${t.mime_type};base64,${t.data}`;let c="rounded-md object-cover h-16 w-16 text-lg";return s==="sm"&&(c="rounded-md object-cover h-10 w-10 text-base"),s==="lg"&&(c="rounded-md object-cover h-24 w-24 text-xl"),m.jsxs("div",{className:ge("relative inline-block",r),children:[m.jsx("img",{src:l,alt:String(((i=t.metadata)==null?void 0:i.name)||"uploaded image"),className:c}),e&&m.jsx("button",{type:"button",className:"absolute top-1 right-1 z-10 rounded-full bg-gray-500 text-white hover:bg-gray-700",onClick:n,"aria-label":"Remove image",children:m.jsx(jt,{className:"h-4 w-4"})})]})}if(t.type==="file"&&t.mime_type==="application/pdf"){const l=((o=t.metadata)==null?void 0:o.filename)||((a=t.metadata)==null?void 0:a.name)||"PDF file";return m.jsxs("div",{className:ge("relative flex items-start gap-2 rounded-md border bg-gray-100 px-3 py-2",r),children:[m.jsx("div",{className:"flex flex-shrink-0 flex-col items-start justify-start",children:m.jsx(rl,{className:ge("text-teal-700",s==="sm"?"h-5 w-5":"h-7 w-7")})}),m.jsx("span",{className:ge("min-w-0 flex-1 text-sm break-all text-gray-800"),style:{wordBreak:"break-all",whiteSpace:"pre-wrap"},children:String(l)}),e&&m.jsx("button",{type:"button",className:"ml-2 self-start rounded-full bg-gray-200 p-1 text-teal-700 hover:bg-gray-300",onClick:n,"aria-label":"Remove PDF",children:m.jsx(jt,{className:"h-4 w-4"})})]})}return m.jsxs("div",{className:ge("flex items-center gap-2 rounded-md border bg-gray-100 px-3 py-2 text-gray-500",r),children:[m.jsx(rl,{className:"h-5 w-5 flex-shrink-0"}),m.jsx("span",{className:"truncate text-xs",children:"Unsupported file type"}),e&&m.jsx("button",{type:"button",className:"ml-2 rounded-full bg-gray-200 p-1 text-gray-500 hover:bg-gray-300",onClick:n,"aria-label":"Remove file",children:m.jsx(jt,{className:"h-4 w-4"})})]})},Gt=["image/jpeg","image/png","image/gif","image/webp","application/pdf"];function BC(t){return t&&typeof t=="object"&&(t.type==="image"||t.type==="file")&&typeof t.data=="string"&&typeof t.mime_type=="string"}async function Ti(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result.split(",")[1],o=t.type.startsWith("image/");e(o?{type:"image",source_type:"base64",data:i,mime_type:t.type,metadata:{name:t.name}}:{type:"file",source_type:"base64",data:i,mime_type:t.type,metadata:{filename:t.name}})},r.onerror=n,r.readAsDataURL(t)})}function FC({value:t,setValue:e,onSubmit:n}){const r=s=>{(s.metaKey||s.ctrlKey)&&s.key==="Enter"&&(s.preventDefault(),n())};return m.jsx(Di,{value:t,onChange:s=>e(s.target.value),onKeyDown:r,className:"focus-visible:ring-0"})}function HC({message:t,isLoading:e}){var d;const n=Ps(),r=n.getMessagesMetadata(t),s=(d=r==null?void 0:r.firstSeenState)==null?void 0:d.parent_checkpoint,[i,o]=v.useState(!1),[a,l]=v.useState(""),c=zo(t.content),u=()=>{o(!1);const f={type:"human",content:a};n.submit({messages:[f]},{checkpoint:s,streamMode:["values"],streamSubgraphs:!0,streamResumable:!0,optimisticValues:h=>{var _;const p=(_=r==null?void 0:r.firstSeenState)==null?void 0:_.values;return p?{...p,messages:[...p.messages??[],f]}:h}})};return m.jsx("div",{className:ge("group ml-auto flex items-center gap-2",i&&"w-full max-w-xl"),children:m.jsxs("div",{className:ge("flex flex-col gap-2",i&&"w-full"),children:[i?m.jsx(FC,{value:a,setValue:l,onSubmit:u}):m.jsxs("div",{className:"flex flex-col gap-2",children:[Array.isArray(t.content)&&t.content.length>0&&m.jsx("div",{className:"flex flex-wrap items-end justify-end gap-2",children:t.content.reduce((f,h,p)=>(BC(h)&&f.push(m.jsx(om,{block:h,size:"md"},p)),f),[])}),c?m.jsx("p",{className:"bg-muted ml-auto w-fit max-w-xs rounded-3xl px-4 py-2 text-right whitespace-pre-wrap text-base leading-relaxed break-words",style:{overflowWrap:"anywhere"},children:c}):null]}),m.jsxs("div",{className:ge("ml-auto flex items-center gap-2 transition-opacity","opacity-0 group-focus-within:opacity-100 group-hover:opacity-100",i&&"opacity-100"),children:[m.jsx(Ef,{branch:r==null?void 0:r.branch,branchOptions:r==null?void 0:r.branchOptions,onSelect:f=>n.setBranch(f),isLoading:e}),m.jsx(Sf,{isLoading:e,content:c,isEditing:i,setIsEditing:f=>{f&&l(c),o(f)},handleSubmitEdit:u,isHumanMessage:!0})]})]})})}const am="do-not-render-";function GC(t){const e=[];return t.forEach((n,r)=>{var i,o;if(n.type!=="ai"||((i=n.tool_calls)==null?void 0:i.length)===0)return;const s=t[r+1];s&&s.type==="tool"||e.push(...((o=n.tool_calls)==null?void 0:o.map(a=>({type:"tool",tool_call_id:a.id??"",id:`${am}${_d()}`,name:a.name,content:"Successfully handled tool call."})))??[])}),e}/*!---------------------------------------------------------------------------------------------
 *  Copyright (c) StackBlitz. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/const UC={damping:.7,stiffness:.05,mass:1.25},zC=70,WC=1e3/60,KC=350;let Vs=!1;var Ju;(Ju=globalThis.document)==null||Ju.addEventListener("mousedown",()=>{Vs=!0});var Qu;(Qu=globalThis.document)==null||Qu.addEventListener("mouseup",()=>{Vs=!1});var ed;(ed=globalThis.document)==null||ed.addEventListener("click",()=>{Vs=!1});const XC=(t={})=>{const[e,n]=v.useState(!1),[r,s]=v.useState(t.initial!==!1),[i,o]=v.useState(!1),a=v.useRef(null);a.current=t;const l=v.useCallback(()=>{var E;if(!Vs)return!1;const y=window.getSelection();if(!y||!y.rangeCount)return!1;const w=y.getRangeAt(0);return w.commonAncestorContainer.contains(g.current)||((E=g.current)==null?void 0:E.contains(w.commonAncestorContainer))},[]),c=v.useCallback(y=>{d.isAtBottom=y,s(y)},[]),u=v.useCallback(y=>{d.escapedFromLock=y,n(y)},[]),d=v.useMemo(()=>{let y;return{escapedFromLock:e,isAtBottom:r,resizeDifference:0,accumulated:0,velocity:0,listeners:new Set,get scrollTop(){var w;return((w=g.current)==null?void 0:w.scrollTop)??0},set scrollTop(w){g.current&&(g.current.scrollTop=w,d.ignoreScrollToTop=g.current.scrollTop)},get targetScrollTop(){return!g.current||!x.current?0:g.current.scrollHeight-1-g.current.clientHeight},get calculatedTargetScrollTop(){if(!g.current||!x.current)return 0;const{targetScrollTop:w}=this;if(!t.targetScrollTop)return w;if((y==null?void 0:y.targetScrollTop)===w)return y.calculatedScrollTop;const E=Math.max(Math.min(t.targetScrollTop(w,{scrollElement:g.current,contentElement:x.current}),w),0);return y={targetScrollTop:w,calculatedScrollTop:E},requestAnimationFrame(()=>{y=void 0}),E},get scrollDifference(){return this.calculatedTargetScrollTop-this.scrollTop},get isNearBottom(){return this.scrollDifference<=zC}}},[]),f=v.useCallback((y={})=>{var L;typeof y=="string"&&(y={animation:y}),y.preserveScrollPosition||c(!0);const w=Date.now()+(Number(y.wait)||0),E=Ci(a.current,y.animation),{ignoreEscapes:S=!1}=y;let R,k=d.calculatedTargetScrollTop;y.duration instanceof Promise?y.duration.finally(()=>{R=Date.now()}):R=w+(y.duration??0);const P=async()=>{const V=new Promise(requestAnimationFrame).then(()=>{var A;if(!d.isAtBottom)return d.animation=void 0,!1;const{scrollTop:j}=d,O=performance.now(),z=(O-(d.lastTick??O))/WC;if(d.animation||(d.animation={behavior:E,promise:V,ignoreEscapes:S}),d.animation.behavior===E&&(d.lastTick=O),l()||w>Date.now())return P();if(j<Math.min(k,d.calculatedTargetScrollTop)){if(((A=d.animation)==null?void 0:A.behavior)===E){if(E==="instant")return d.scrollTop=d.calculatedTargetScrollTop,P();d.velocity=(E.damping*d.velocity+E.stiffness*d.scrollDifference)/E.mass,d.accumulated+=d.velocity*z,d.scrollTop+=d.accumulated,d.scrollTop!==j&&(d.accumulated=0)}return P()}return R>Date.now()?(k=d.calculatedTargetScrollTop,P()):(d.animation=void 0,d.scrollTop<d.calculatedTargetScrollTop?f({animation:Ci(a.current,a.current.resize),ignoreEscapes:S,duration:Math.max(0,R-Date.now())||void 0}):d.isAtBottom)});return V.then(j=>(requestAnimationFrame(()=>{d.animation||(d.lastTick=void 0,d.velocity=0)}),j))};return y.wait!==!0&&(d.animation=void 0),((L=d.animation)==null?void 0:L.behavior)===E?d.animation.promise:P()},[c,l,d]),h=v.useCallback(()=>{u(!0),c(!1)},[u,c]),p=v.useCallback(({target:y})=>{if(y!==g.current)return;const{scrollTop:w,ignoreScrollToTop:E}=d;let{lastScrollTop:S=w}=d;d.lastScrollTop=w,d.ignoreScrollToTop=void 0,E&&E>w&&(S=E),o(d.isNearBottom),setTimeout(()=>{var P;if(d.resizeDifference||w===E)return;if(l()){u(!0),c(!1);return}const R=w>S,k=w<S;if((P=d.animation)!=null&&P.ignoreEscapes){d.scrollTop=S;return}k&&(u(!0),c(!1)),R&&u(!1),!d.escapedFromLock&&d.isNearBottom&&c(!0)},1)},[u,c,l,d]),_=v.useCallback(({target:y,deltaY:w})=>{var S;let E=y;for(;!["scroll","auto"].includes(getComputedStyle(E).overflow);){if(!E.parentElement)return;E=E.parentElement}E===g.current&&w<0&&g.current.scrollHeight>g.current.clientHeight&&!((S=d.animation)!=null&&S.ignoreEscapes)&&(u(!0),c(!1))},[u,c,d]),g=Cu(y=>{var w,E;(w=g.current)==null||w.removeEventListener("scroll",p),(E=g.current)==null||E.removeEventListener("wheel",_),y==null||y.addEventListener("scroll",p,{passive:!0}),y==null||y.addEventListener("wheel",_,{passive:!0})},[]),x=Cu(y=>{var E,S;if((E=d.resizeObserver)==null||E.disconnect(),!y)return;let w;d.resizeObserver=new ResizeObserver(([R])=>{const{height:k}=R.contentRect,P=k-(w??k);if(d.resizeDifference=P,d.scrollTop>d.targetScrollTop&&(d.scrollTop=d.targetScrollTop),o(d.isNearBottom),P>=0){const L=Ci(a.current,w?a.current.resize:a.current.initial);f({animation:L,wait:!0,preserveScrollPosition:!0,duration:L==="instant"?void 0:KC})}else d.isNearBottom&&(u(!1),c(!0));w=k,requestAnimationFrame(()=>{setTimeout(()=>{d.resizeDifference===P&&(d.resizeDifference=0)},1)})}),(S=d.resizeObserver)==null||S.observe(y)},[]);return{contentRef:x,scrollRef:g,scrollToBottom:f,stopScroll:h,isAtBottom:r||i,isNearBottom:i,escapedFromLock:e,state:d}};function Cu(t,e){const n=v.useCallback(r=>(n.current=r,t(r)),e);return n}const Ai=new Map;function Ci(...t){const e={...UC};let n=!1;for(const s of t){if(s==="instant"){n=!0;continue}typeof s=="object"&&(n=!1,e.damping=s.damping??e.damping,e.stiffness=s.stiffness??e.stiffness,e.mass=s.mass??e.mass)}const r=JSON.stringify(e);return Ai.has(r)||Ai.set(r,Object.freeze(e)),n?"instant":Ai.get(r)}const lm=v.createContext(null),YC=typeof window<"u"?v.useLayoutEffect:v.useEffect;function po({instance:t,children:e,resize:n,initial:r,mass:s,damping:i,stiffness:o,targetScrollTop:a,contextRef:l,...c}){const u=v.useRef(null),d=v.useCallback((S,R)=>{const k=(E==null?void 0:E.targetScrollTop)??a;return(k==null?void 0:k(S,R))??S},[a]),f=XC({mass:s,damping:i,stiffness:o,resize:n,initial:r,targetScrollTop:d}),{scrollRef:h,contentRef:p,scrollToBottom:_,stopScroll:g,isAtBottom:x,escapedFromLock:y,state:w}=t??f,E=v.useMemo(()=>({scrollToBottom:_,stopScroll:g,scrollRef:h,isAtBottom:x,escapedFromLock:y,contentRef:p,state:w,get targetScrollTop(){return u.current},set targetScrollTop(S){u.current=S}}),[_,x,p,h,g,y,w]);return v.useImperativeHandle(l,()=>E,[E]),YC(()=>{h.current&&getComputedStyle(h.current).overflow==="visible"&&(h.current.style.overflow="auto")},[]),m.jsx(lm.Provider,{value:E,children:m.jsx("div",{...c,children:typeof e=="function"?e(E):e})})}(function(t){function e({children:n,...r}){const s=ka();return m.jsx("div",{ref:s.scrollRef,style:{height:"100%",width:"100%"},children:m.jsx("div",{...r,ref:s.contentRef,children:typeof n=="function"?n(s):n})})}t.Content=e})(po||(po={}));function ka(){const t=v.useContext(lm);if(!t)throw new Error("use-stick-to-bottom component context must be used within a StickToBottom component");return t}function qC({initialBlocks:t=[]}={}){const[e,n]=v.useState(t),r=v.useRef(null),[s,i]=v.useState(!1),o=v.useRef(0),a=(f,h)=>f.type.startsWith("image/")?h.some(_=>{var g;return _.type==="image"&&((g=_.metadata)==null?void 0:g.name)===f.name&&_.mime_type===f.type}):h.some(_=>{var g;return _.type==="file"&&_.mime_type===f.type&&((g=_.metadata)==null?void 0:g.filename)===f.name}),l=async f=>{const h=f.target.files;if(!h)return;const p=Array.from(h),_=p.filter(E=>Gt.includes(E.type)),g=p.filter(E=>!Gt.includes(E.type)),x=_.filter(E=>a(E,e)),y=_.filter(E=>!a(E,e));g.length>0&&Bt.error("JPEGPNGGIFWEBPPDFWord DOCDOCX Excel XLSXLSX"),x.length>0&&Bt.error(`Duplicate file(s) detected: ${x.map(E=>E.name).join(", ")}. Each file can only be uploaded once per message.`);const w=y.length?await Promise.all(y.map(Ti)):[];n(E=>[...E,...w]),f.target.value=""},c=f=>{n(h=>h.filter((p,_)=>_!==f))},u=()=>n([]);return v.useEffect(()=>{if(!r.current)return;const f=S=>{var R,k;(k=(R=S.dataTransfer)==null?void 0:R.types)!=null&&k.includes("Files")&&(o.current+=1,i(!0))},h=S=>{var R,k;(k=(R=S.dataTransfer)==null?void 0:R.types)!=null&&k.includes("Files")&&(o.current-=1,o.current<=0&&(i(!1),o.current=0))},p=async S=>{if(S.preventDefault(),S.stopPropagation(),o.current=0,i(!1),!S.dataTransfer)return;const R=Array.from(S.dataTransfer.files),k=R.filter(O=>Gt.includes(O.type)),P=R.filter(O=>!Gt.includes(O.type)),L=k.filter(O=>a(O,e)),V=k.filter(O=>!a(O,e));P.length>0&&Bt.error("JPEGPNGGIFWEBPPDFWord DOCDOCX Excel XLSXLSX"),L.length>0&&Bt.error(`Duplicate file(s) detected: ${L.map(O=>O.name).join(", ")}. Each file can only be uploaded once per message.`);const j=V.length?await Promise.all(V.map(Ti)):[];n(O=>[...O,...j])},_=S=>{o.current=0,i(!1)};window.addEventListener("dragenter",f),window.addEventListener("dragleave",h),window.addEventListener("drop",p),window.addEventListener("dragend",_);const g=S=>{S.preventDefault(),S.stopPropagation()};window.addEventListener("dragover",g);const x=S=>{S.preventDefault(),S.stopPropagation(),i(!0)},y=S=>{S.preventDefault(),S.stopPropagation(),i(!0)},w=S=>{S.preventDefault(),S.stopPropagation(),i(!1)},E=r.current;return E.addEventListener("dragover",x),E.addEventListener("dragenter",y),E.addEventListener("dragleave",w),()=>{E.removeEventListener("dragover",x),E.removeEventListener("dragenter",y),E.removeEventListener("dragleave",w),window.removeEventListener("dragenter",f),window.removeEventListener("dragleave",h),window.removeEventListener("drop",p),window.removeEventListener("dragend",_),window.removeEventListener("dragover",g),o.current=0}},[e]),{contentBlocks:e,setContentBlocks:n,handleFileUpload:l,dropRef:r,removeBlock:c,resetBlocks:u,dragOver:s,handlePaste:async f=>{const h=f.clipboardData.items;if(!h)return;const p=[];for(let E=0;E<h.length;E+=1){const S=h[E];if(S.kind==="file"){const R=S.getAsFile();R&&p.push(R)}}if(p.length===0)return;f.preventDefault();const _=p.filter(E=>Gt.includes(E.type)),g=p.filter(E=>!Gt.includes(E.type)),x=E=>E.type.startsWith("image/")?e.some(R=>{var k;return R.type==="image"&&((k=R.metadata)==null?void 0:k.name)===E.name&&R.mime_type===E.type}):e.some(R=>{var k;return R.type==="file"&&R.mime_type===E.type&&((k=R.metadata)==null?void 0:k.filename)===E.name}),y=_.filter(x),w=_.filter(E=>!x(E));if(g.length>0&&Bt.error("JPEGPNGGIFWEBPPDFWord DOCDOCX Excel XLSXLSX"),y.length>0&&Bt.error(`Duplicate file(s) detected: ${y.map(E=>E.name).join(", ")}. Each file can only be uploaded once per message.`),w.length>0){const E=await Promise.all(w.map(Ti));n(S=>[...S,...E])}}}}const ZC=({blocks:t,onRemove:e,size:n="md",className:r})=>t.length?m.jsx("div",{className:ge("flex flex-wrap gap-2 p-3.5 pb-0",r),children:t.map((s,i)=>m.jsx(om,{block:s,removable:!0,onRemove:()=>e(i),size:n},i))}):null,cm=v.memo(({agent:t,isSelected:e,onSelect:n})=>{const r=v.useCallback(()=>{n(t)},[t,n]);return m.jsx("div",{className:`
        flex items-center py-4 cursor-pointer 
        hover:bg-accent transition-colors 
        ${e?"bg-accent/50":""}
      `,onClick:r,children:m.jsx("div",{className:"flex items-center space-x-4 w-full",children:m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex flex-col",children:[m.jsx("h3",{className:"font-semibold text-base truncate",children:t.name}),m.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.description||""})]})})})})});cm.displayName="AgentSelectionCard";function JC({onSelectAgent:t,selectedAgent:e}){const{agents:n,totalCount:r,isLoadingData:s,error:i,hasNextPage:o,isFetchingNextPage:a,searchQuery:l,setSearchQuery:c,loadMoreRef:u,fetchNextPage:d}=Cg(),f=v.useCallback(_=>{c(_.target.value)},[c]),h=v.useCallback(()=>{c("")},[c]),p=v.useCallback(()=>{d()},[d]);return i?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("p",{className:"text-destructive",children:""}),m.jsx(fe,{onClick:p,className:"mt-4",children:""})]}):m.jsx("div",{className:"h-full",children:m.jsxs(ad,{className:"h-full",children:[m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"relative",children:[m.jsx(ld,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),m.jsx(nr,{className:"pl-8 h-10 bg-transparent",placeholder:"...",value:l,onChange:f}),l&&m.jsx(fe,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 p-0 opacity-70 hover:opacity-100",onClick:h,disabled:s,children:m.jsx(jt,{className:"h-4 w-4"})})]})}),s&&n.length===0?m.jsxs("div",{className:"flex justify-center items-center py-12",children:[m.jsx(ts,{className:"h-8 w-8 animate-spin"}),m.jsx("span",{className:"ml-2",children:"..."})]}):n.length===0?m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-muted-foreground",children:l?` "${l}" `:""})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(_=>m.jsx(cm,{agent:_,isSelected:(e==null?void 0:e.uuid)===_.uuid,onSelect:t||(()=>{})},_.uuid))}),m.jsx("div",{ref:u,className:"mt-8 flex justify-center",children:a?m.jsxs("div",{className:"flex items-center gap-2 py-4",children:[m.jsx(ts,{className:"h-5 w-5 animate-spin"}),m.jsx("span",{className:"text-sm text-muted-foreground",children:"..."})]}):o?m.jsx("div",{className:"py-4",children:m.jsx(fe,{variant:"outline",onClick:p,className:"text-sm",children:l?"":""})}):n.length>0?m.jsx("div",{className:"py-4 text-center",children:m.jsx("span",{className:"text-sm text-muted-foreground",children:""})}):null})]})]})})}const QC=Wp({title:Us().min(2,{message:"2"}).max(200,{message:"200"}),prompts:Us().min(5,{message:"5"}),remark:Us().optional(),is_active:Ja().default(!0),is_public:Ja().default(!1)});function eR({initialData:t,onSubmit:e,isSubmitting:n=!1}){const[r,s]=v.useState((t==null?void 0:t.tags)||[]),[i,o]=v.useState(""),a=Kp({resolver:Xp(QC),defaultValues:{title:(t==null?void 0:t.title)||"",prompts:(t==null?void 0:t.prompts)||"",remark:(t==null?void 0:t.remark)||"",is_active:(t==null?void 0:t.is_active)!==void 0?t.is_active:!0,is_public:(t==null?void 0:t.is_public)||!1,tags:(t==null?void 0:t.tags)||[]}});v.useEffect(()=>{a.setValue("tags",r)},[r,a]);const l=()=>{const f=i.trim();f&&!r.includes(f)&&(s([...r,f]),o(""))},c=f=>{s(r.filter(h=>h!==f))},u=f=>{f.key==="Enter"&&(f.preventDefault(),l())},d=f=>{e({...f,tags:r})};return m.jsx(Yp,{...a,children:m.jsxs("form",{onSubmit:a.handleSubmit(d),className:"space-y-6",children:[m.jsx(Dn,{control:a.control,name:"title",render:({field:f})=>m.jsxs(On,{children:[m.jsx(nn,{children:""}),m.jsx(Mn,{children:m.jsx(nr,{placeholder:"",...f})}),m.jsx(rn,{children:""}),m.jsx(zs,{})]})}),m.jsx(Dn,{control:a.control,name:"prompts",render:({field:f})=>m.jsxs(On,{children:[m.jsx(nn,{children:""}),m.jsx(Mn,{children:m.jsx(Di,{placeholder:"...",className:"min-h-[500px]",...f})}),m.jsx(rn,{children:""}),m.jsx(zs,{})]})}),m.jsx(Dn,{control:a.control,name:"remark",render:({field:f})=>m.jsxs(On,{children:[m.jsx(nn,{children:""}),m.jsx(Mn,{children:m.jsx(Di,{placeholder:"...",className:"min-h-[100px]",...f})}),m.jsx(rn,{children:""}),m.jsx(zs,{})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(nn,{children:""}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(nr,{placeholder:"...",value:i,onChange:f=>o(f.target.value),onKeyDown:u,className:"flex-1"}),m.jsxs(fe,{type:"button",variant:"outline",onClick:l,disabled:!i.trim(),children:[m.jsx(cd,{className:"h-4 w-4 mr-2"}),""]})]}),m.jsx(rn,{children:""}),m.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.map(f=>m.jsxs(qn,{variant:"secondary",className:"px-3 py-1",children:[f,m.jsx(fe,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-2",onClick:()=>c(f),children:m.jsx(jt,{className:"h-3 w-3"})})]},f))})]}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx(Dn,{control:a.control,name:"is_active",render:({field:f})=>m.jsxs(On,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[m.jsxs("div",{className:"space-y-0.5",children:[m.jsx(nn,{className:"text-base",children:""}),m.jsx(rn,{children:""})]}),m.jsx(Mn,{children:m.jsx(ol,{checked:f.value,onCheckedChange:f.onChange})})]})}),m.jsx(Dn,{control:a.control,name:"is_public",render:({field:f})=>m.jsxs(On,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[m.jsxs("div",{className:"space-y-0.5",children:[m.jsx(nn,{className:"text-base",children:""}),m.jsx(rn,{children:""})]}),m.jsx(Mn,{children:m.jsx(ol,{checked:f.value,onCheckedChange:f.onChange})})]})})]}),m.jsx(fe,{type:"submit",className:"w-full",disabled:n,children:n?"...":t?"":""})]})})}function tR(){const{toast:t}=So(),[e,n]=v.useState([]),[r,s]=v.useState(0),[i,o]=v.useState(!1),[a,l]=v.useState(null),[c,u]=v.useState(1),[d,f]=v.useState(!1),[h,p]=v.useState(!1),[_,g]=v.useState(""),x=20,y=v.useCallback(async(V,j)=>{try{o(!0),l(null);const O=await yt.post("/prompts/page",{page:V,rows:x,keyword:j||void 0});if(O.data&&O.data.items!==void 0){const{items:z,pagination:A}=O.data;n(V===1?z:N=>[...N,...z]),s(A.total),f(V<A.pages)}else throw new Error("")}catch(O){l(O instanceof Error?O:new Error("")),t({title:"",description:O instanceof Error?O.message:"",variant:"destructive"})}finally{o(!1),p(!1)}},[t]);v.useEffect(()=>{u(1);const V=setTimeout(()=>{y(1,_)},300);return()=>clearTimeout(V)},[_,y]);const w=v.useCallback(()=>{if(d&&!h){p(!0);const V=c+1;u(V),y(V,_)}},[d,h,c,_,y]),E=v.useCallback(async V=>{try{const j=await yt.post("/prompts/create",V);if(j.data)return t({title:"",description:""}),y(1,_),j.data;throw new Error("")}catch(j){throw t({title:"",description:j instanceof Error?j.message:"",variant:"destructive"}),j}},[t,y,_]),S=v.useCallback(async(V,j)=>{try{const O=await yt.post(`/prompts/update/${V}`,j);if(O.data)return t({title:"",description:""}),y(1,_),O.data;throw new Error("")}catch(O){throw t({title:"",description:O instanceof Error?O.message:"",variant:"destructive"}),O}},[t,y,_]),R=v.useCallback(async V=>{try{const j=await yt.post(`/prompts/delete/${V}`);if(console.log("response.data",j),j.status===200)return t({title:"",description:""}),y(1,_),!0;throw new Error("")}catch(j){throw t({title:"",description:j instanceof Error?j.message:"",variant:"destructive"}),j}},[t,y,_]),k=v.useCallback(async V=>{try{const j=await yt.post(`/prompts/detail/${V}`);if(j.data)return j.data;throw new Error("")}catch(j){throw t({title:"",description:j instanceof Error?j.message:"",variant:"destructive"}),j}},[t]),P=v.useRef(null),{loadMoreRef:L}=Rg({hasNextPage:d,isFetchingNextPage:h,fetchNextPage:w});return v.useEffect(()=>{P.current&&L.current&&(P.current=L.current)},[L]),{prompts:e,totalCount:r,isLoadingData:i,error:a,hasNextPage:d,isFetchingNextPage:h,searchQuery:_,setSearchQuery:g,loadMoreRef:P,fetchNextPage:w,createPrompt:E,updatePrompt:S,deletePrompt:R,getPromptDetail:k}}const um=v.memo(({prompt:t,isSelected:e,onSelect:n,onEdit:r,onDelete:s})=>{const i=v.useCallback(()=>{n(t)},[t,n]),o=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return m.jsx("div",{className:`
        group flex items-center py-4 cursor-pointer 
        hover:bg-accent transition-colors 
        ${e?"bg-accent/50":""}
      `,onClick:i,children:m.jsxs("div",{className:"flex items-center space-x-4 w-full",children:[m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("h3",{className:"font-semibold text-base truncate",children:t.title}),t.is_active&&m.jsx(qn,{variant:"outline",className:"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:""}),t.is_public&&m.jsx(qn,{variant:"outline",className:"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:""})]}),m.jsx("p",{className:"text-xs text-muted-foreground break-words whitespace-pre-wrap",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.prompts||""}),t.tags&&t.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.tags.map((a,l)=>m.jsxs(qn,{variant:"secondary",className:"text-xs px-2 py-0",children:[m.jsx(Pg,{className:"h-3 w-3 mr-1"}),a]},l))}),m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[": ",o(t.updated_at)]})]})}),m.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:a=>{a.stopPropagation(),r(t)},children:m.jsx(pd,{className:"h-4 w-4"})}),m.jsx(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",onClick:a=>{a.stopPropagation(),s(t)},children:m.jsx(qp,{className:"h-4 w-4"})})]})]})})});um.displayName="PromptCard";function nR({onSelectPrompt:t,selectedPrompt:e}){const{prompts:n,totalCount:r,isLoadingData:s,error:i,hasNextPage:o,isFetchingNextPage:a,searchQuery:l,setSearchQuery:c,loadMoreRef:u,fetchNextPage:d,createPrompt:f,updatePrompt:h,deletePrompt:p}=tR(),[_,g]=v.useState(!1),[x,y]=v.useState(!1),[w,E]=v.useState(null),S=v.useCallback(O=>{c(O.target.value)},[c]),R=v.useCallback(()=>{c("")},[c]),k=v.useCallback(()=>{d()},[d]),P=v.useCallback(()=>{E(null),g(!0)},[]),L=v.useCallback(O=>{E(O),g(!0)},[]),V=v.useCallback(async O=>{if(confirm(` "${O.title}" `))try{await p(O.uuid)}catch(z){console.error(":",z)}},[p]),j=v.useCallback(async O=>{try{y(!0),w?await h(w.uuid,O):await f(O),g(!1),E(null)}catch(z){console.error(w?":":":",z)}finally{y(!1)}},[f,h,w]);return i?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("p",{className:"text-destructive",children:""}),m.jsx(fe,{onClick:k,className:"mt-4",children:""})]}):m.jsxs("div",{className:"h-full",children:[m.jsxs(ad,{className:"h-full",children:[m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(ld,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),m.jsx(nr,{className:"pl-8 h-10 bg-transparent",placeholder:"...",value:l,onChange:S}),l&&m.jsx(fe,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 p-0 opacity-70 hover:opacity-100",onClick:R,disabled:s,children:m.jsx(jt,{className:"h-4 w-4"})})]}),m.jsxs(fe,{onClick:P,size:"sm",className:"h-10 px-3",children:[m.jsx(cd,{className:"h-4 w-4 mr-1"}),""]})]})}),s&&n.length===0?m.jsxs("div",{className:"flex justify-center items-center py-12",children:[m.jsx(ts,{className:"h-8 w-8 animate-spin"}),m.jsx("span",{className:"ml-2",children:"..."})]}):n.length===0?m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-muted-foreground",children:l?` "${l}" `:""})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(O=>m.jsx(um,{prompt:O,isSelected:(e==null?void 0:e.uuid)===O.uuid,onSelect:t||(()=>{}),onEdit:L,onDelete:V},O.uuid))}),m.jsx("div",{ref:u,className:"mt-8 flex justify-center",children:a?m.jsxs("div",{className:"flex items-center gap-2 py-4",children:[m.jsx(ts,{className:"h-5 w-5 animate-spin"}),m.jsx("span",{className:"text-sm text-muted-foreground",children:"..."})]}):o?m.jsx("div",{className:"py-4",children:m.jsx(fe,{variant:"outline",onClick:k,className:"text-sm",children:l?"":""})}):n.length>0?m.jsx("div",{className:"py-4 text-center",children:m.jsx("span",{className:"text-sm text-muted-foreground",children:""})}):null})]})]}),m.jsx(rr,{open:_,onOpenChange:O=>{g(O),O||E(null)},children:m.jsxs(sr,{className:"sm:max-w-[600px] max-h-[80vh] flex flex-col",children:[m.jsx(ir,{children:m.jsx(or,{children:w?"":""})}),m.jsx("div",{className:"flex-1 overflow-y-auto pr-4",children:m.jsx(eR,{initialData:w||void 0,onSubmit:j,isSubmitting:x})})]})})]})}const Bs=v.createContext(null),rR=Bs.Provider,Nt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},dm=Nt.error001();function ve(t,e){const n=v.useContext(Bs);if(n===null)throw new Error(dm);return Ng(n,t,e)}const Ie=()=>{const t=v.useContext(Bs);if(t===null)throw new Error(dm);return v.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},sR=t=>t.userSelectionActive?"none":"all";function ja({position:t,children:e,className:n,style:r,...s}){const i=ve(sR),o=`${t}`.split("-");return C.createElement("div",{className:We(["react-flow__panel",n,...o]),style:{...r,pointerEvents:i},...s},e)}function iR({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:C.createElement(ja,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},C.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const oR=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...u})=>{const d=v.useRef(null),[f,h]=v.useState({x:0,y:0,width:0,height:0}),p=We(["react-flow__edge-textwrapper",c]);return v.useEffect(()=>{if(d.current){const _=d.current.getBBox();h({x:_.x,y:_.y,width:_.width,height:_.height})}},[n]),typeof n>"u"||!n?null:C.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...u},s&&C.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),C.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),l)};var aR=v.memo(oR);const Da=t=>({width:t.offsetWidth,height:t.offsetHeight}),Rn=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Oa=(t={x:0,y:0},e)=>({x:Rn(t.x,e[0][0],e[1][0]),y:Rn(t.y,e[0][1],e[1][1])}),Ru=(t,e,n)=>t<e?Rn(Math.abs(t-e),1,50)/50:t>n?-Rn(Math.abs(t-n),1,50)/50:0,hm=(t,e)=>{const n=Ru(t.x,35,e.width-35)*20,r=Ru(t.y,35,e.height-35)*20;return[n,r]},fm=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},lR=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Ma=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),cR=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Pu=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),go=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},uR=t=>st(t.width)&&st(t.height)&&st(t.x)&&st(t.y),st=t=>!isNaN(t)&&isFinite(t),we=Symbol.for("internals"),mm=["Enter"," ","Escape"],dR=(t,e)=>{},hR=t=>"nativeEvent"in t;function _o(t){var s,i;const e=hR(t)?t.nativeEvent:t,n=((i=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:i[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const pm=t=>"clientX"in t,Dt=(t,e)=>{var i,o;const n=pm(t),r=n?t.clientX:(i=t.touches)==null?void 0:i[0].clientX,s=n?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},vs=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Pr=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:f,interactionWidth:h=20})=>C.createElement(C.Fragment,null,C.createElement("path",{id:t,style:u,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&C.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),s&&st(n)&&st(r)?C.createElement(aR,{x:n,y:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c}):null);Pr.displayName="BaseEdge";function Fn(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(i=>i.id===t);s&&n(r,{...s})}}function gm({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,i=n<t?n+s:n-s,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[i,a,s,o]}function _m({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:a}){const l=t*.125+s*.375+o*.375+n*.125,c=e*.125+i*.375+a*.375+r*.125,u=Math.abs(l-t),d=Math.abs(c-e);return[l,c,u,d]}var Zt;(function(t){t.Strict="strict",t.Loose="loose"})(Zt||(Zt={}));var Yt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Yt||(Yt={}));var Pn;(function(t){t.Partial="partial",t.Full="full"})(Pn||(Pn={}));var Et;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Et||(Et={}));var xs;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(xs||(xs={}));var Q;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Q||(Q={}));function Nu({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Q.Left||t===Q.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function ym({sourceX:t,sourceY:e,sourcePosition:n=Q.Bottom,targetX:r,targetY:s,targetPosition:i=Q.Top}){const[o,a]=Nu({pos:n,x1:t,y1:e,x2:r,y2:s}),[l,c]=Nu({pos:i,x1:r,y1:s,x2:t,y2:e}),[u,d,f,h]=_m({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${t},${e} C${o},${a} ${l},${c} ${r},${s}`,u,d,f,h]}const $a=v.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Q.Bottom,targetPosition:i=Q.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:_})=>{const[g,x,y]=ym({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:i});return C.createElement(Pr,{path:g,labelX:x,labelY:y,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:_})});$a.displayName="SimpleBezierEdge";const Iu={[Q.Left]:{x:-1,y:0},[Q.Right]:{x:1,y:0},[Q.Top]:{x:0,y:-1},[Q.Bottom]:{x:0,y:1}},fR=({source:t,sourcePosition:e=Q.Bottom,target:n})=>e===Q.Left||e===Q.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Lu=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function mR({source:t,sourcePosition:e=Q.Bottom,target:n,targetPosition:r=Q.Top,center:s,offset:i}){const o=Iu[e],a=Iu[r],l={x:t.x+o.x*i,y:t.y+o.y*i},c={x:n.x+a.x*i,y:n.y+a.y*i},u=fR({source:l,sourcePosition:e,target:c}),d=u.x!==0?"x":"y",f=u[d];let h=[],p,_;const g={x:0,y:0},x={x:0,y:0},[y,w,E,S]=gm({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[d]*a[d]===-1){p=s.x??y,_=s.y??w;const k=[{x:p,y:l.y},{x:p,y:c.y}],P=[{x:l.x,y:_},{x:c.x,y:_}];o[d]===f?h=d==="x"?k:P:h=d==="x"?P:k}else{const k=[{x:l.x,y:c.y}],P=[{x:c.x,y:l.y}];if(d==="x"?h=o.x===f?P:k:h=o.y===f?k:P,e===r){const z=Math.abs(t[d]-n[d]);if(z<=i){const A=Math.min(i-1,i-z);o[d]===f?g[d]=(l[d]>t[d]?-1:1)*A:x[d]=(c[d]>n[d]?-1:1)*A}}if(e!==r){const z=d==="x"?"y":"x",A=o[d]===a[z],N=l[z]>c[z],F=l[z]<c[z];(o[d]===1&&(!A&&N||A&&F)||o[d]!==1&&(!A&&F||A&&N))&&(h=d==="x"?k:P)}const L={x:l.x+g.x,y:l.y+g.y},V={x:c.x+x.x,y:c.y+x.y},j=Math.max(Math.abs(L.x-h[0].x),Math.abs(V.x-h[0].x)),O=Math.max(Math.abs(L.y-h[0].y),Math.abs(V.y-h[0].y));j>=O?(p=(L.x+V.x)/2,_=h[0].y):(p=h[0].x,_=(L.y+V.y)/2)}return[[t,{x:l.x+g.x,y:l.y+g.y},...h,{x:c.x+x.x,y:c.y+x.y},n],p,_,E,S]}function pR(t,e,n,r){const s=Math.min(Lu(t,e)/2,Lu(e,n)/2,r),{x:i,y:o}=e;if(t.x===i&&i===n.x||t.y===o&&o===n.y)return`L${i} ${o}`;if(t.y===o){const c=t.x<n.x?-1:1,u=t.y<n.y?1:-1;return`L ${i+s*c},${o}Q ${i},${o} ${i},${o+s*u}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${i},${o+s*l}Q ${i},${o} ${i+s*a},${o}`}function yo({sourceX:t,sourceY:e,sourcePosition:n=Q.Bottom,targetX:r,targetY:s,targetPosition:i=Q.Top,borderRadius:o=5,centerX:a,centerY:l,offset:c=20}){const[u,d,f,h,p]=mR({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:a,y:l},offset:c});return[u.reduce((g,x,y)=>{let w="";return y>0&&y<u.length-1?w=pR(u[y-1],x,u[y+1],o):w=`${y===0?"M":"L"}${x.x} ${x.y}`,g+=w,g},""),d,f,h,p]}const Fs=v.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:d=Q.Bottom,targetPosition:f=Q.Top,markerEnd:h,markerStart:p,pathOptions:_,interactionWidth:g})=>{const[x,y,w]=yo({sourceX:t,sourceY:e,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:_==null?void 0:_.borderRadius,offset:_==null?void 0:_.offset});return C.createElement(Pr,{path:x,labelX:y,labelY:w,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:h,markerStart:p,interactionWidth:g})});Fs.displayName="SmoothStepEdge";const Va=v.memo(t=>{var e;return C.createElement(Fs,{...t,pathOptions:v.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Va.displayName="StepEdge";function gR({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,i,o,a]=gm({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,i,o,a]}const Ba=v.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[p,_,g]=gR({sourceX:t,sourceY:e,targetX:n,targetY:r});return C.createElement(Pr,{path:p,labelX:_,labelY:g,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:f,interactionWidth:h})});Ba.displayName="StraightEdge";function zr(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ku({pos:t,x1:e,y1:n,x2:r,y2:s,c:i}){switch(t){case Q.Left:return[e-zr(e-r,i),n];case Q.Right:return[e+zr(r-e,i),n];case Q.Top:return[e,n-zr(n-s,i)];case Q.Bottom:return[e,n+zr(s-n,i)]}}function Fa({sourceX:t,sourceY:e,sourcePosition:n=Q.Bottom,targetX:r,targetY:s,targetPosition:i=Q.Top,curvature:o=.25}){const[a,l]=ku({pos:n,x1:t,y1:e,x2:r,y2:s,c:o}),[c,u]=ku({pos:i,x1:r,y1:s,x2:t,y2:e,c:o}),[d,f,h,p]=_m({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${t},${e} C${a},${l} ${c},${u} ${r},${s}`,d,f,h,p]}const ws=v.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Q.Bottom,targetPosition:i=Q.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,pathOptions:_,interactionWidth:g})=>{const[x,y,w]=Fa({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:i,curvature:_==null?void 0:_.curvature});return C.createElement(Pr,{path:x,labelX:y,labelY:w,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})});ws.displayName="BezierEdge";const Ha=v.createContext(null),_R=Ha.Provider;Ha.Consumer;const yR=()=>v.useContext(Ha),vR=t=>"id"in t&&"source"in t&&"target"in t,xR=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,vo=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,wR=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),vm=(t,e)=>{if(!t.source||!t.target)return e;let n;return vR(t)?n={...t}:n={...t,id:xR(t)},wR(n,e)?e:e.concat(n)},xo=({x:t,y:e},[n,r,s],i,[o,a])=>{const l={x:(t-n)/s,y:(e-r)/s};return i?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},xm=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),xn=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},Ga=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:i,y:o}=xn(s,e).positionAbsolute;return lR(r,Ma({x:i,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cR(n)},wm=(t,e,[n,r,s]=[0,0,1],i=!1,o=!1,a=[0,0])=>{const l={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},c=[];return t.forEach(u=>{const{width:d,height:f,selectable:h=!0,hidden:p=!1}=u;if(o&&!h||p)return!1;const{positionAbsolute:_}=xn(u,a),g={x:_.x,y:_.y,width:d||0,height:f||0},x=go(l,g),y=typeof d>"u"||typeof f>"u"||d===null||f===null,w=i&&x>0,E=(d||0)*(f||0);(y||w||x>=E||u.dragging)&&c.push(u)}),c},bm=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},Em=(t,e,n,r,s,i=.1)=>{const o=e/(t.width*(1+i)),a=n/(t.height*(1+i)),l=Math.min(o,a),c=Rn(l,r,s),u=t.x+t.width/2,d=t.y+t.height/2,f=e/2-u*c,h=n/2-d*c;return{x:f,y:h,zoom:c}},Ut=(t,e=0)=>t.transition().duration(e);function ju(t,e,n,r){return(e[n]||[]).reduce((s,i)=>{var o,a;return`${t.id}-${i.id}-${n}`!==r&&s.push({id:i.id||null,type:n,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+i.y+i.height/2}),s},[])}function bR(t,e,n,r,s,i){const{x:o,y:a}=Dt(t),c=e.elementsFromPoint(o,a).find(p=>p.classList.contains("react-flow__handle"));if(c){const p=c.getAttribute("data-nodeid");if(p){const _=Ua(void 0,c),g=c.getAttribute("data-handleid"),x=i({nodeId:p,id:g,type:_});if(x){const y=s.find(w=>w.nodeId===p&&w.type===_&&w.id===g);return{handle:{id:g,type:_,nodeId:p,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:x}}}}let u=[],d=1/0;if(s.forEach(p=>{const _=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(_<=r){const g=i(p);_<=d&&(_<d?u=[{handle:p,validHandleResult:g}]:_===d&&u.push({handle:p,validHandleResult:g}),d=_)}}),!u.length)return{handle:null,validHandleResult:Sm()};if(u.length===1)return u[0];const f=u.some(({validHandleResult:p})=>p.isValid),h=u.some(({handle:p})=>p.type==="target");return u.find(({handle:p,validHandleResult:_})=>h?p.type==="target":f?_.isValid:!0)||u[0]}const ER={source:null,target:null,sourceHandle:null,targetHandle:null},Sm=()=>({handleDomNode:null,isValid:!1,connection:ER,endHandle:null});function Tm(t,e,n,r,s,i,o){const a=s==="target",l=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...Sm(),handleDomNode:l};if(l){const u=Ua(void 0,l),d=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),h=l.classList.contains("connectable"),p=l.classList.contains("connectableend"),_={source:a?d:n,sourceHandle:a?f:r,target:a?n:d,targetHandle:a?r:f};c.connection=_,h&&p&&(e===Zt.Strict?a&&u==="source"||!a&&u==="target":d!==n||f!==r)&&(c.endHandle={nodeId:d,handleId:f,type:u},c.isValid=i(_))}return c}function SR({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,i)=>{if(i[we]){const{handleBounds:o}=i[we];let a=[],l=[];o&&(a=ju(i,o,"source",`${e}-${n}-${r}`),l=ju(i,o,"target",`${e}-${n}-${r}`)),s.push(...a,...l)}return s},[])}function Ua(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Ri(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function TR(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function Am({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:i,setState:o,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:c}){const u=fm(t.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:p,onConnectStart:_,panBy:g,getNodes:x,cancelConnection:y}=i();let w=0,E;const{x:S,y:R}=Dt(t),k=u==null?void 0:u.elementFromPoint(S,R),P=Ua(l,k),L=f==null?void 0:f.getBoundingClientRect();if(!L||!P)return;let V,j=Dt(t,L),O=!1,z=null,A=!1,N=null;const F=SR({nodes:x(),nodeId:n,handleId:e,handleType:P}),$=()=>{if(!h)return;const[B,W]=hm(j,L);g({x:B,y:W}),w=requestAnimationFrame($)};o({connectionPosition:j,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:P,connectionStartHandle:{nodeId:n,handleId:e,type:P},connectionEndHandle:null}),_==null||_(t,{nodeId:n,handleId:e,handleType:P});function H(B){const{transform:W}=i();j=Dt(B,L);const{handle:M,validHandleResult:G}=bR(B,u,xo(j,W,!1,[1,1]),p,F,D=>Tm(D,d,n,e,s?"target":"source",a,u));if(E=M,O||($(),O=!0),N=G.handleDomNode,z=G.connection,A=G.isValid,o({connectionPosition:E&&A?xm({x:E.x,y:E.y},W):j,connectionStatus:TR(!!E,A),connectionEndHandle:G.endHandle}),!E&&!A&&!N)return Ri(V);z.source!==z.target&&N&&(Ri(V),V=N,N.classList.add("connecting","react-flow__handle-connecting"),N.classList.toggle("valid",A),N.classList.toggle("react-flow__handle-valid",A))}function T(B){var W,M;(E||N)&&z&&A&&(r==null||r(z)),(M=(W=i()).onConnectEnd)==null||M.call(W,B),l&&(c==null||c(B)),Ri(V),y(),cancelAnimationFrame(w),O=!1,A=!1,z=null,N=null,u.removeEventListener("mousemove",H),u.removeEventListener("mouseup",T),u.removeEventListener("touchmove",H),u.removeEventListener("touchend",T)}u.addEventListener("mousemove",H),u.addEventListener("mouseup",T),u.addEventListener("touchmove",H),u.addEventListener("touchend",T)}const Du=()=>!0,AR=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),CR=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:i,connectionClickStartHandle:o}=r;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n||(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n}},Cm=v.forwardRef(({type:t="source",position:e=Q.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:a,children:l,className:c,onMouseDown:u,onTouchStart:d,...f},h)=>{var L,V;const p=o||null,_=t==="target",g=Ie(),x=yR(),{connectOnClick:y,noPanClassName:w}=ve(AR,$e),{connecting:E,clickConnecting:S}=ve(CR(x,p,t),$e);x||(V=(L=g.getState()).onError)==null||V.call(L,"010",Nt.error010());const R=j=>{const{defaultEdgeOptions:O,onConnect:z,hasDefaultEdges:A}=g.getState(),N={...O,...j};if(A){const{edges:F,setEdges:$}=g.getState();$(vm(N,F))}z==null||z(N),a==null||a(N)},k=j=>{if(!x)return;const O=pm(j);s&&(O&&j.button===0||!O)&&Am({event:j,handleId:p,nodeId:x,onConnect:R,isTarget:_,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||Du}),O?u==null||u(j):d==null||d(j)},P=j=>{const{onClickConnectStart:O,onClickConnectEnd:z,connectionClickStartHandle:A,connectionMode:N,isValidConnection:F}=g.getState();if(!x||!A&&!s)return;if(!A){O==null||O(j,{nodeId:x,handleId:p,handleType:t}),g.setState({connectionClickStartHandle:{nodeId:x,type:t,handleId:p}});return}const $=fm(j.target),H=n||F||Du,{connection:T,isValid:B}=Tm({nodeId:x,id:p,type:t},N,A.nodeId,A.handleId||null,A.type,H,$);B&&R(T),z==null||z(j),g.setState({connectionClickStartHandle:null})};return C.createElement("div",{"data-handleid":p,"data-nodeid":x,"data-handlepos":e,"data-id":`${x}-${p}-${t}`,className:We(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",w,c,{source:!_,target:_,connectable:r,connectablestart:s,connectableend:i,connecting:S,connectionindicator:r&&(s&&!E||i&&E)}]),onMouseDown:k,onTouchStart:k,onClick:y?P:void 0,ref:h,...f},l)});Cm.displayName="Handle";var Nn=v.memo(Cm);const Rm=({data:t,isConnectable:e,targetPosition:n=Q.Top,sourcePosition:r=Q.Bottom})=>C.createElement(C.Fragment,null,C.createElement(Nn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,C.createElement(Nn,{type:"source",position:r,isConnectable:e}));Rm.displayName="DefaultNode";var wo=v.memo(Rm);const Pm=({data:t,isConnectable:e,sourcePosition:n=Q.Bottom})=>C.createElement(C.Fragment,null,t==null?void 0:t.label,C.createElement(Nn,{type:"source",position:n,isConnectable:e}));Pm.displayName="InputNode";var Nm=v.memo(Pm);const Im=({data:t,isConnectable:e,targetPosition:n=Q.Top})=>C.createElement(C.Fragment,null,C.createElement(Nn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);Im.displayName="OutputNode";var Lm=v.memo(Im);const za=()=>null;za.displayName="GroupNode";const RR=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Wr=t=>t.id;function PR(t,e){return $e(t.selectedNodes.map(Wr),e.selectedNodes.map(Wr))&&$e(t.selectedEdges.map(Wr),e.selectedEdges.map(Wr))}const km=v.memo(({onSelectionChange:t})=>{const e=Ie(),{selectedNodes:n,selectedEdges:r}=ve(RR,PR);return v.useEffect(()=>{const s={nodes:n,edges:r};t==null||t(s),e.getState().onSelectionChange.forEach(i=>i(s))},[n,r,t]),null});km.displayName="SelectionListener";const NR=t=>!!t.onSelectionChange;function IR({onSelectionChange:t}){const e=ve(NR);return t||e?C.createElement(km,{onSelectionChange:t}):null}const LR=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function on(t,e){v.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function se(t,e,n){v.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const kR=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:i,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:_,maxZoom:g,nodeExtent:x,onNodesChange:y,onEdgesChange:w,elementsSelectable:E,connectionMode:S,snapGrid:R,snapToGrid:k,translateExtent:P,connectOnClick:L,defaultEdgeOptions:V,fitView:j,fitViewOptions:O,onNodesDelete:z,onEdgesDelete:A,onNodeDrag:N,onNodeDragStart:F,onNodeDragStop:$,onSelectionDrag:H,onSelectionDragStart:T,onSelectionDragStop:B,noPanClassName:W,nodeOrigin:M,rfId:G,autoPanOnConnect:D,autoPanOnNodeDrag:I,onError:K,connectionRadius:Z,isValidConnection:te,nodeDragThreshold:ee})=>{const{setNodes:Y,setEdges:ue,setDefaultNodesAndEdges:he,setMinZoom:pe,setMaxZoom:de,setTranslateExtent:oe,setNodeExtent:_e,reset:ie}=ve(LR,$e),J=Ie();return v.useEffect(()=>{const be=r==null?void 0:r.map(je=>({...je,...V}));return he(n,be),()=>{ie()}},[]),se("defaultEdgeOptions",V,J.setState),se("connectionMode",S,J.setState),se("onConnect",s,J.setState),se("onConnectStart",i,J.setState),se("onConnectEnd",o,J.setState),se("onClickConnectStart",a,J.setState),se("onClickConnectEnd",l,J.setState),se("nodesDraggable",c,J.setState),se("nodesConnectable",u,J.setState),se("nodesFocusable",d,J.setState),se("edgesFocusable",f,J.setState),se("edgesUpdatable",h,J.setState),se("elementsSelectable",E,J.setState),se("elevateNodesOnSelect",p,J.setState),se("snapToGrid",k,J.setState),se("snapGrid",R,J.setState),se("onNodesChange",y,J.setState),se("onEdgesChange",w,J.setState),se("connectOnClick",L,J.setState),se("fitViewOnInit",j,J.setState),se("fitViewOnInitOptions",O,J.setState),se("onNodesDelete",z,J.setState),se("onEdgesDelete",A,J.setState),se("onNodeDrag",N,J.setState),se("onNodeDragStart",F,J.setState),se("onNodeDragStop",$,J.setState),se("onSelectionDrag",H,J.setState),se("onSelectionDragStart",T,J.setState),se("onSelectionDragStop",B,J.setState),se("noPanClassName",W,J.setState),se("nodeOrigin",M,J.setState),se("rfId",G,J.setState),se("autoPanOnConnect",D,J.setState),se("autoPanOnNodeDrag",I,J.setState),se("onError",K,J.setState),se("connectionRadius",Z,J.setState),se("isValidConnection",te,J.setState),se("nodeDragThreshold",ee,J.setState),on(t,Y),on(e,ue),on(_,pe),on(g,de),on(P,oe),on(x,_e),null},Ou={display:"none"},jR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jm="react-flow__node-desc",Dm="react-flow__edge-desc",DR="react-flow__aria-live",OR=t=>t.ariaLiveMessage;function MR({rfId:t}){const e=ve(OR);return C.createElement("div",{id:`${DR}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:jR},e)}function $R({rfId:t,disableKeyboardA11y:e}){return C.createElement(C.Fragment,null,C.createElement("div",{id:`${jm}-${t}`,style:Ou},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),C.createElement("div",{id:`${Dm}-${t}`,style:Ou},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&C.createElement(MR,{rfId:t}))}var _r=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=v.useState(!1),s=v.useRef(!1),i=v.useRef(new Set([])),[o,a]=v.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=c.reduce((d,f)=>d.concat(...f),[]);return[c,u]}return[[],[]]},[t]);return v.useEffect(()=>{const l=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||l;if(t!==null){const u=h=>{if(s.current=h.ctrlKey||h.metaKey||h.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&_o(h))return!1;const _=$u(h.code,a);i.current.add(h[_]),Mu(o,i.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&_o(h))return!1;const _=$u(h.code,a);Mu(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(h[_]),h.key==="Meta"&&i.current.clear(),s.current=!1},f=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[t,r]),n};function Mu(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function $u(t,e){return e.includes(t)?"code":"key"}function Om(t,e,n,r){var a,l;const s=t.parentNode||t.parentId;if(!s)return n;const i=e.get(s),o=xn(i,r);return Om(i,e,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=i[we])==null?void 0:a.z)??0)>(n.z??0)?((l=i[we])==null?void 0:l.z)??0:n.z??0},r)}function Mm(t,e,n){t.forEach(r=>{var i;const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:o,y:a,z:l}=Om(r,t,{...r.position,z:((i=r[we])==null?void 0:i.z)??0},e);r.positionAbsolute={x:o,y:a},r[we].z=l,n!=null&&n[r.id]&&(r[we].isParent=!0)}})}function Pi(t,e,n,r){const s=new Map,i={},o=r?1e3:0;return t.forEach(a=>{var h;const l=(st(a.zIndex)?a.zIndex:0)+(a.selected?o:0),c=e.get(a.id),u={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(i[d]=!0);const f=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(u,we,{enumerable:!1,value:{handleBounds:f||(h=c==null?void 0:c[we])==null?void 0:h.handleBounds,z:l}}),s.set(a.id,u)}),Mm(s,n,i),s}function $m(t,e={}){const{getNodes:n,width:r,height:s,minZoom:i,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=t(),f=e.initial&&!c&&u;if(a&&l&&(f||!e.initial)){const p=n().filter(g=>{var y;const x=e.includeHiddenNodes?g.width&&g.height:!g.hidden;return(y=e.nodes)!=null&&y.length?x&&e.nodes.some(w=>w.id===g.id):x}),_=p.every(g=>g.width&&g.height);if(p.length>0&&_){const g=Ga(p,d),{x,y,zoom:w}=Em(g,r,s,e.minZoom??i,e.maxZoom??o,e.padding??.1),E=yn.translate(x,y).scale(w);return typeof e.duration=="number"&&e.duration>0?a.transform(Ut(l,e.duration),E):a.transform(l,E),!0}}return!1}function VR(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[we]:r[we],selected:n.selected})}),new Map(e)}function BR(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Kr({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:i,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:c}=n();t!=null&&t.length&&(l&&r({nodeInternals:VR(t,s)}),o==null||o(t)),e!=null&&e.length&&(c&&r({edges:BR(e,i)}),a==null||a(e))}const an=()=>{},FR={zoomIn:an,zoomOut:an,zoomTo:an,getZoom:()=>1,setViewport:an,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:an,fitBounds:an,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},HR=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),GR=()=>{const t=Ie(),{d3Zoom:e,d3Selection:n}=ve(HR,$e);return v.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Ut(n,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(Ut(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,i)=>e.scaleTo(Ut(n,i==null?void 0:i.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,i)=>{const[o,a,l]=t.getState().transform,c=yn.translate(s.x??o,s.y??a).scale(s.zoom??l);e.transform(Ut(n,i==null?void 0:i.duration),c)},getViewport:()=>{const[s,i,o]=t.getState().transform;return{x:s,y:i,zoom:o}},fitView:s=>$m(t.getState,s),setCenter:(s,i,o)=>{const{width:a,height:l,maxZoom:c}=t.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,d=a/2-s*u,f=l/2-i*u,h=yn.translate(d,f).scale(u);e.transform(Ut(n,o==null?void 0:o.duration),h)},fitBounds:(s,i)=>{const{width:o,height:a,minZoom:l,maxZoom:c}=t.getState(),{x:u,y:d,zoom:f}=Em(s,o,a,l,c,(i==null?void 0:i.padding)??.1),h=yn.translate(u,d).scale(f);e.transform(Ut(n,i==null?void 0:i.duration),h)},project:s=>{const{transform:i,snapToGrid:o,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),xo(s,i,o,a)},screenToFlowPosition:s=>{const{transform:i,snapToGrid:o,snapGrid:a,domNode:l}=t.getState();if(!l)return s;const{x:c,y:u}=l.getBoundingClientRect(),d={x:s.x-c,y:s.y-u};return xo(d,i,o,a)},flowToScreenPosition:s=>{const{transform:i,domNode:o}=t.getState();if(!o)return s;const{x:a,y:l}=o.getBoundingClientRect(),c=xm(s,i);return{x:c.x+a,y:c.y+l}},viewportInitialized:!0}:FR,[e,n])};function Wa(){const t=GR(),e=Ie(),n=v.useCallback(()=>e.getState().getNodes().map(_=>({..._})),[]),r=v.useCallback(_=>e.getState().nodeInternals.get(_),[]),s=v.useCallback(()=>{const{edges:_=[]}=e.getState();return _.map(g=>({...g}))},[]),i=v.useCallback(_=>{const{edges:g=[]}=e.getState();return g.find(x=>x.id===_)},[]),o=v.useCallback(_=>{const{getNodes:g,setNodes:x,hasDefaultNodes:y,onNodesChange:w}=e.getState(),E=g(),S=typeof _=="function"?_(E):_;if(y)x(S);else if(w){const R=S.length===0?E.map(k=>({type:"remove",id:k.id})):S.map(k=>({item:k,type:"reset"}));w(R)}},[]),a=v.useCallback(_=>{const{edges:g=[],setEdges:x,hasDefaultEdges:y,onEdgesChange:w}=e.getState(),E=typeof _=="function"?_(g):_;if(y)x(E);else if(w){const S=E.length===0?g.map(R=>({type:"remove",id:R.id})):E.map(R=>({item:R,type:"reset"}));w(S)}},[]),l=v.useCallback(_=>{const g=Array.isArray(_)?_:[_],{getNodes:x,setNodes:y,hasDefaultNodes:w,onNodesChange:E}=e.getState();if(w){const R=[...x(),...g];y(R)}else if(E){const S=g.map(R=>({item:R,type:"add"}));E(S)}},[]),c=v.useCallback(_=>{const g=Array.isArray(_)?_:[_],{edges:x=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:E}=e.getState();if(w)y([...x,...g]);else if(E){const S=g.map(R=>({item:R,type:"add"}));E(S)}},[]),u=v.useCallback(()=>{const{getNodes:_,edges:g=[],transform:x}=e.getState(),[y,w,E]=x;return{nodes:_().map(S=>({...S})),edges:g.map(S=>({...S})),viewport:{x:y,y:w,zoom:E}}},[]),d=v.useCallback(({nodes:_,edges:g})=>{const{nodeInternals:x,getNodes:y,edges:w,hasDefaultNodes:E,hasDefaultEdges:S,onNodesDelete:R,onEdgesDelete:k,onNodesChange:P,onEdgesChange:L}=e.getState(),V=(_||[]).map(N=>N.id),j=(g||[]).map(N=>N.id),O=y().reduce((N,F)=>{const $=F.parentNode||F.parentId,H=!V.includes(F.id)&&$&&N.find(B=>B.id===$);return(typeof F.deletable=="boolean"?F.deletable:!0)&&(V.includes(F.id)||H)&&N.push(F),N},[]),z=w.filter(N=>typeof N.deletable=="boolean"?N.deletable:!0),A=z.filter(N=>j.includes(N.id));if(O||A){const N=bm(O,z),F=[...A,...N],$=F.reduce((H,T)=>(H.includes(T.id)||H.push(T.id),H),[]);if((S||E)&&(S&&e.setState({edges:w.filter(H=>!$.includes(H.id))}),E&&(O.forEach(H=>{x.delete(H.id)}),e.setState({nodeInternals:new Map(x)}))),$.length>0&&(k==null||k(F),L&&L($.map(H=>({id:H,type:"remove"})))),O.length>0&&(R==null||R(O),P)){const H=O.map(T=>({id:T.id,type:"remove"}));P(H)}}},[]),f=v.useCallback(_=>{const g=uR(_),x=g?null:e.getState().nodeInternals.get(_.id);return!g&&!x?[null,null,g]:[g?_:Pu(x),x,g]},[]),h=v.useCallback((_,g=!0,x)=>{const[y,w,E]=f(_);return y?(x||e.getState().getNodes()).filter(S=>{if(!E&&(S.id===w.id||!S.positionAbsolute))return!1;const R=Pu(S),k=go(R,y);return g&&k>0||k>=y.width*y.height}):[]},[]),p=v.useCallback((_,g,x=!0)=>{const[y]=f(_);if(!y)return!1;const w=go(y,g);return x&&w>0||w>=y.width*y.height},[]);return v.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:i,setNodes:o,setEdges:a,addNodes:l,addEdges:c,toObject:u,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:p}),[t,n,r,s,i,o,a,l,c,u,d,h,p])}const UR={actInsideInputWithModifier:!1};var zR=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Ie(),{deleteElements:r}=Wa(),s=_r(t,UR),i=_r(e);v.useEffect(()=>{if(s){const{edges:o,getNodes:a}=n.getState(),l=a().filter(u=>u.selected),c=o.filter(u=>u.selected);r({nodes:l,edges:c}),n.setState({nodesSelectionActive:!1})}},[s]),v.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function WR(t){const e=Ie();v.useEffect(()=>{let n;const r=()=>{var i,o;if(!t.current)return;const s=Da(t.current);(s.height===0||s.width===0)&&((o=(i=e.getState()).onError)==null||o.call(i,"004",Nt.error004())),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Ka={position:"absolute",width:"100%",height:"100%",top:0,left:0},KR=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Xr=t=>({x:t.x,y:t.y,zoom:t.k}),ln=(t,e)=>t.target.closest(`.${e}`),Vu=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Bu=t=>{const e=t.ctrlKey&&vs()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},XR=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),YR=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Yt.Free,zoomOnDoubleClick:c=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:_,zoomActivationKeyCode:g,preventScrolling:x=!0,children:y,noWheelClassName:w,noPanClassName:E})=>{const S=v.useRef(),R=Ie(),k=v.useRef(!1),P=v.useRef(!1),L=v.useRef(null),V=v.useRef({x:0,y:0,zoom:0}),{d3Zoom:j,d3Selection:O,d3ZoomHandler:z,userSelectionActive:A}=ve(XR,$e),N=_r(g),F=v.useRef(0),$=v.useRef(!1),H=v.useRef();return WR(L),v.useEffect(()=>{if(L.current){const T=L.current.getBoundingClientRect(),B=Lg().scaleExtent([p,_]).translateExtent(h),W=gd(L.current).call(B),M=yn.translate(f.x,f.y).scale(Rn(f.zoom,p,_)),G=[[0,0],[T.width,T.height]],D=B.constrain()(M,G,h);B.transform(W,D),B.wheelDelta(Bu),R.setState({d3Zoom:B,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[D.x,D.y,D.k],domNode:L.current.closest(".react-flow")})}},[]),v.useEffect(()=>{O&&j&&(o&&!N&&!A?O.on("wheel.zoom",T=>{if(ln(T,w))return!1;T.preventDefault(),T.stopImmediatePropagation();const B=O.property("__zoom").k||1;if(T.ctrlKey&&i){const te=kg(T),ee=Bu(T),Y=B*Math.pow(2,ee);j.scaleTo(O,Y,te,T);return}const W=T.deltaMode===1?20:1;let M=l===Yt.Vertical?0:T.deltaX*W,G=l===Yt.Horizontal?0:T.deltaY*W;!vs()&&T.shiftKey&&l!==Yt.Vertical&&(M=T.deltaY*W,G=0),j.translateBy(O,-(M/B)*a,-(G/B)*a,{internal:!0});const D=Xr(O.property("__zoom")),{onViewportChangeStart:I,onViewportChange:K,onViewportChangeEnd:Z}=R.getState();clearTimeout(H.current),$.current||($.current=!0,e==null||e(T,D),I==null||I(D)),$.current&&(t==null||t(T,D),K==null||K(D),H.current=setTimeout(()=>{n==null||n(T,D),Z==null||Z(D),$.current=!1},150))},{passive:!1}):typeof z<"u"&&O.on("wheel.zoom",function(T,B){if(!x&&T.type==="wheel"&&!T.ctrlKey||ln(T,w))return null;T.preventDefault(),z.call(this,T,B)},{passive:!1}))},[A,o,l,O,j,z,N,i,x,w,e,t,n]),v.useEffect(()=>{j&&j.on("start",T=>{var M,G;if(!T.sourceEvent||T.sourceEvent.internal)return null;F.current=(M=T.sourceEvent)==null?void 0:M.button;const{onViewportChangeStart:B}=R.getState(),W=Xr(T.transform);k.current=!0,V.current=W,((G=T.sourceEvent)==null?void 0:G.type)==="mousedown"&&R.setState({paneDragging:!0}),B==null||B(W),e==null||e(T.sourceEvent,W)})},[j,e]),v.useEffect(()=>{j&&(A&&!k.current?j.on("zoom",null):A||j.on("zoom",T=>{var W;const{onViewportChange:B}=R.getState();if(R.setState({transform:[T.transform.x,T.transform.y,T.transform.k]}),P.current=!!(r&&Vu(d,F.current??0)),(t||B)&&!((W=T.sourceEvent)!=null&&W.internal)){const M=Xr(T.transform);B==null||B(M),t==null||t(T.sourceEvent,M)}}))},[A,j,t,d,r]),v.useEffect(()=>{j&&j.on("end",T=>{if(!T.sourceEvent||T.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=R.getState();if(k.current=!1,R.setState({paneDragging:!1}),r&&Vu(d,F.current??0)&&!P.current&&r(T.sourceEvent),P.current=!1,(n||B)&&KR(V.current,T.transform)){const W=Xr(T.transform);V.current=W,clearTimeout(S.current),S.current=setTimeout(()=>{B==null||B(W),n==null||n(T.sourceEvent,W)},o?150:0)}})},[j,o,d,n,r]),v.useEffect(()=>{j&&j.filter(T=>{const B=N||s,W=i&&T.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&T.button===1&&T.type==="mousedown"&&(ln(T,"react-flow__node")||ln(T,"react-flow__edge")))return!0;if(!d&&!B&&!o&&!c&&!i||A||!c&&T.type==="dblclick"||ln(T,w)&&T.type==="wheel"||ln(T,E)&&(T.type!=="wheel"||o&&T.type==="wheel"&&!N)||!i&&T.ctrlKey&&T.type==="wheel"||!B&&!o&&!W&&T.type==="wheel"||!d&&(T.type==="mousedown"||T.type==="touchstart")||Array.isArray(d)&&!d.includes(T.button)&&T.type==="mousedown")return!1;const M=Array.isArray(d)&&d.includes(T.button)||!T.button||T.button<=1;return(!T.ctrlKey||T.type==="wheel")&&M})},[A,j,s,i,o,c,d,u,N]),C.createElement("div",{className:"react-flow__renderer",ref:L,style:Ka},y)},qR=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function ZR(){const{userSelectionActive:t,userSelectionRect:e}=ve(qR,$e);return t&&e?C.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function Fu(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,i=e.position.y+e.height-r.height;if(s>0||i>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),i>0&&(r.style.height+=i),e.position.x<0){const o=Math.abs(e.position.x);r.position.x=r.position.x-o,r.style.width+=o,e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);r.position.y=r.position.y-o,r.style.height+=o,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Vm(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const i=t.filter(a=>a.id===s.id);if(i.length===0)return r.push(s),r;const o={...s};for(const a of i)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&Fu(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&Fu(r,o);break}case"remove":return r}return r.push(o),r},n)}function Bm(t,e){return Vm(t,e)}function JR(t,e){return Vm(t,e)}const kt=(t,e)=>({id:t,type:"select",selected:e});function _n(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(kt(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(kt(r.id,!1))),n},[])}const Ni=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},QR=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Fm=v.memo(({isSelecting:t,selectionMode:e=Pn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:u,children:d})=>{const f=v.useRef(null),h=Ie(),p=v.useRef(0),_=v.useRef(0),g=v.useRef(),{userSelectionActive:x,elementsSelectable:y,dragging:w}=ve(QR,$e),E=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,_.current=0},S=z=>{i==null||i(z),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},R=z=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){z.preventDefault();return}o==null||o(z)},k=a?z=>a(z):void 0,P=z=>{const{resetSelectedElements:A,domNode:N}=h.getState();if(g.current=N==null?void 0:N.getBoundingClientRect(),!y||!t||z.button!==0||z.target!==f.current||!g.current)return;const{x:F,y:$}=Dt(z,g.current);A(),h.setState({userSelectionRect:{width:0,height:0,startX:F,startY:$,x:F,y:$}}),r==null||r(z)},L=z=>{const{userSelectionRect:A,nodeInternals:N,edges:F,transform:$,onNodesChange:H,onEdgesChange:T,nodeOrigin:B,getNodes:W}=h.getState();if(!t||!g.current||!A)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const M=Dt(z,g.current),G=A.startX??0,D=A.startY??0,I={...A,x:M.x<G?M.x:G,y:M.y<D?M.y:D,width:Math.abs(M.x-G),height:Math.abs(M.y-D)},K=W(),Z=wm(N,I,$,e===Pn.Partial,!0,B),te=bm(Z,F).map(Y=>Y.id),ee=Z.map(Y=>Y.id);if(p.current!==ee.length){p.current=ee.length;const Y=_n(K,ee);Y.length&&(H==null||H(Y))}if(_.current!==te.length){_.current=te.length;const Y=_n(F,te);Y.length&&(T==null||T(Y))}h.setState({userSelectionRect:I})},V=z=>{if(z.button!==0)return;const{userSelectionRect:A}=h.getState();!x&&A&&z.target===f.current&&(S==null||S(z)),h.setState({nodesSelectionActive:p.current>0}),E(),s==null||s(z)},j=z=>{x&&(h.setState({nodesSelectionActive:p.current>0}),s==null||s(z)),E()},O=y&&(t||x);return C.createElement("div",{className:We(["react-flow__pane",{dragging:w,selection:t}]),onClick:O?void 0:Ni(S,f),onContextMenu:Ni(R,f),onWheel:Ni(k,f),onMouseEnter:O?void 0:l,onMouseDown:O?P:void 0,onMouseMove:O?L:c,onMouseUp:O?V:void 0,onMouseLeave:O?j:u,ref:f,style:Ka},d,C.createElement(ZR,null))});Fm.displayName="Pane";function Hm(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Hm(r,e):!1}function Hu(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function eP(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!Hm(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var i,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=s.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function tP(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function Gm(t,e,n,r,s=[0,0],i){const o=tP(t,t.extent||r);let a=o;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const d=n.get(l),{x:f,y:h}=xn(d,s).positionAbsolute;a=d&&st(f)&&st(h)&&st(d.width)&&st(d.height)?[[f+t.width*s[0],h+t.height*s[1]],[f+d.width-t.width+t.width*s[0],h+d.height-t.height+t.height*s[1]]]:a}else i==null||i("005",Nt.error005()),a=o;else if(t.extent&&l&&t.extent!=="parent"){const d=n.get(l),{x:f,y:h}=xn(d,s).positionAbsolute;a=[[t.extent[0][0]+f,t.extent[0][1]+h],[t.extent[1][0]+f,t.extent[1][1]+h]]}let c={x:0,y:0};if(l){const d=n.get(l);c=xn(d,s).positionAbsolute}const u=a&&a!=="parent"?Oa(e,a):e;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function Ii({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const Gu=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const i=Array.from(s),o=e.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return i.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-o.left-a.x)/n,y:(c.top-o.top-a.y)/n,...Da(l)}})};function Hn(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function bo({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:a,onError:l}=e.getState(),c=a.get(t);if(!c){l==null||l("012",Nt.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&o)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):s([t])}function nP(){const t=Ie();return v.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:i}=t.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:i?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:i?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function Li(t){return(e,n,r)=>t==null?void 0:t(e,r)}function Um({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,selectNodesOnDrag:o}){const a=Ie(),[l,c]=v.useState(!1),u=v.useRef([]),d=v.useRef({x:null,y:null}),f=v.useRef(0),h=v.useRef(null),p=v.useRef({x:0,y:0}),_=v.useRef(null),g=v.useRef(!1),x=v.useRef(!1),y=v.useRef(!1),w=nP();return v.useEffect(()=>{if(t!=null&&t.current){const E=gd(t.current),S=({x:P,y:L})=>{const{nodeInternals:V,onNodeDrag:j,onSelectionDrag:O,updateNodePositions:z,nodeExtent:A,snapGrid:N,snapToGrid:F,nodeOrigin:$,onError:H}=a.getState();d.current={x:P,y:L};let T=!1,B={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&A){const M=Ga(u.current,$);B=Ma(M)}if(u.current=u.current.map(M=>{const G={x:P-M.distance.x,y:L-M.distance.y};F&&(G.x=N[0]*Math.round(G.x/N[0]),G.y=N[1]*Math.round(G.y/N[1]));const D=[[A[0][0],A[0][1]],[A[1][0],A[1][1]]];u.current.length>1&&A&&!M.extent&&(D[0][0]=M.positionAbsolute.x-B.x+A[0][0],D[1][0]=M.positionAbsolute.x+(M.width??0)-B.x2+A[1][0],D[0][1]=M.positionAbsolute.y-B.y+A[0][1],D[1][1]=M.positionAbsolute.y+(M.height??0)-B.y2+A[1][1]);const I=Gm(M,G,V,D,$,H);return T=T||M.position.x!==I.position.x||M.position.y!==I.position.y,M.position=I.position,M.positionAbsolute=I.positionAbsolute,M}),!T)return;z(u.current,!0,!0),c(!0);const W=s?j:Li(O);if(W&&_.current){const[M,G]=Ii({nodeId:s,dragItems:u.current,nodeInternals:V});W(_.current,M,G)}},R=()=>{if(!h.current)return;const[P,L]=hm(p.current,h.current);if(P!==0||L!==0){const{transform:V,panBy:j}=a.getState();d.current.x=(d.current.x??0)-P/V[2],d.current.y=(d.current.y??0)-L/V[2],j({x:P,y:L})&&S(d.current)}f.current=requestAnimationFrame(R)},k=P=>{var $;const{nodeInternals:L,multiSelectionActive:V,nodesDraggable:j,unselectNodesAndEdges:O,onNodeDragStart:z,onSelectionDragStart:A}=a.getState();x.current=!0;const N=s?z:Li(A);(!o||!i)&&!V&&s&&(($=L.get(s))!=null&&$.selected||O()),s&&i&&o&&bo({id:s,store:a,nodeRef:t});const F=w(P);if(d.current=F,u.current=eP(L,j,F,s),N&&u.current){const[H,T]=Ii({nodeId:s,dragItems:u.current,nodeInternals:L});N(P.sourceEvent,H,T)}};if(e)E.on(".drag",null);else{const P=jg().on("start",L=>{const{domNode:V,nodeDragThreshold:j}=a.getState();j===0&&k(L),y.current=!1;const O=w(L);d.current=O,h.current=(V==null?void 0:V.getBoundingClientRect())||null,p.current=Dt(L.sourceEvent,h.current)}).on("drag",L=>{var z,A;const V=w(L),{autoPanOnNodeDrag:j,nodeDragThreshold:O}=a.getState();if(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!g.current&&x.current&&j&&(g.current=!0,R()),!x.current){const N=V.xSnapped-(((z=d==null?void 0:d.current)==null?void 0:z.x)??0),F=V.ySnapped-(((A=d==null?void 0:d.current)==null?void 0:A.y)??0);Math.sqrt(N*N+F*F)>O&&k(L)}(d.current.x!==V.xSnapped||d.current.y!==V.ySnapped)&&u.current&&x.current&&(_.current=L.sourceEvent,p.current=Dt(L.sourceEvent,h.current),S(V))}}).on("end",L=>{if(!(!x.current||y.current)&&(c(!1),g.current=!1,x.current=!1,cancelAnimationFrame(f.current),u.current)){const{updateNodePositions:V,nodeInternals:j,onNodeDragStop:O,onSelectionDragStop:z}=a.getState(),A=s?O:Li(z);if(V(u.current,!1,!1),A){const[N,F]=Ii({nodeId:s,dragItems:u.current,nodeInternals:j});A(L.sourceEvent,N,F)}}}).filter(L=>{const V=L.target;return!L.button&&(!n||!Hu(V,`.${n}`,t))&&(!r||Hu(V,r,t))});return E.call(P),()=>{E.on(".drag",null)}}}},[t,e,n,r,i,a,s,o,w]),l}function zm(){const t=Ie();return v.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:i,getNodes:o,snapToGrid:a,snapGrid:l,onError:c,nodesDraggable:u}=t.getState(),d=o().filter(y=>y.selected&&(y.draggable||u&&typeof y.draggable>"u")),f=a?l[0]:5,h=a?l[1]:5,p=n.isShiftPressed?4:1,_=n.x*f*p,g=n.y*h*p,x=d.map(y=>{if(y.positionAbsolute){const w={x:y.positionAbsolute.x+_,y:y.positionAbsolute.y+g};a&&(w.x=l[0]*Math.round(w.x/l[0]),w.y=l[1]*Math.round(w.y/l[1]));const{positionAbsolute:E,position:S}=Gm(y,w,r,s,void 0,c);y.position=S,y.positionAbsolute=E}return y});i(x,!0,!1)},[])}const wn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Gn=t=>{const e=({id:n,type:r,data:s,xPos:i,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:p,onDoubleClick:_,style:g,className:x,isDraggable:y,isSelectable:w,isConnectable:E,isFocusable:S,selectNodesOnDrag:R,sourcePosition:k,targetPosition:P,hidden:L,resizeObserver:V,dragHandle:j,zIndex:O,isParent:z,noDragClassName:A,noPanClassName:N,initialized:F,disableKeyboardA11y:$,ariaLabel:H,rfId:T,hasHandleBounds:B})=>{const W=Ie(),M=v.useRef(null),G=v.useRef(null),D=v.useRef(k),I=v.useRef(P),K=v.useRef(r),Z=w||y||u||d||f||h,te=zm(),ee=Hn(n,W.getState,d),Y=Hn(n,W.getState,f),ue=Hn(n,W.getState,h),he=Hn(n,W.getState,p),pe=Hn(n,W.getState,_),de=ie=>{const{nodeDragThreshold:J}=W.getState();if(w&&(!R||!y||J>0)&&bo({id:n,store:W,nodeRef:M}),u){const be=W.getState().nodeInternals.get(n);be&&u(ie,{...be})}},oe=ie=>{if(!_o(ie)&&!$)if(mm.includes(ie.key)&&w){const J=ie.key==="Escape";bo({id:n,store:W,unselect:J,nodeRef:M})}else y&&c&&Object.prototype.hasOwnProperty.call(wn,ie.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),te({x:wn[ie.key].x,y:wn[ie.key].y,isShiftPressed:ie.shiftKey}))};v.useEffect(()=>()=>{G.current&&(V==null||V.unobserve(G.current),G.current=null)},[]),v.useEffect(()=>{if(M.current&&!L){const ie=M.current;(!F||!B||G.current!==ie)&&(G.current&&(V==null||V.unobserve(G.current)),V==null||V.observe(ie),G.current=ie)}},[L,F,B]),v.useEffect(()=>{const ie=K.current!==r,J=D.current!==k,be=I.current!==P;M.current&&(ie||J||be)&&(ie&&(K.current=r),J&&(D.current=k),be&&(I.current=P),W.getState().updateNodeDimensions([{id:n,nodeElement:M.current,forceUpdate:!0}]))},[n,r,k,P]);const _e=Um({nodeRef:M,disabled:L||!y,noDragClassName:A,handleSelector:j,nodeId:n,isSelectable:w,selectNodesOnDrag:R});return L?null:C.createElement("div",{className:We(["react-flow__node",`react-flow__node-${r}`,{[N]:y},x,{selected:c,selectable:w,parent:z,dragging:_e}]),ref:M,style:{zIndex:O,transform:`translate(${a}px,${l}px)`,pointerEvents:Z?"all":"none",visibility:F?"visible":"hidden",...g},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:Y,onMouseLeave:ue,onContextMenu:he,onClick:de,onDoubleClick:pe,onKeyDown:S?oe:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":$?void 0:`${jm}-${T}`,"aria-label":H},C.createElement(_R,{value:n},C.createElement(t,{id:n,data:s,type:r,xPos:i,yPos:o,selected:c,isConnectable:E,sourcePosition:k,targetPosition:P,dragging:_e,dragHandle:j,zIndex:O})))};return e.displayName="NodeWrapper",v.memo(e)};const rP=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Ga(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function sP({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ie(),{width:s,height:i,x:o,y:a,transformString:l,userSelectionActive:c}=ve(rP,$e),u=zm(),d=v.useRef(null);if(v.useEffect(()=>{var p;n||(p=d.current)==null||p.focus({preventScroll:!0})},[n]),Um({nodeRef:d}),c||!s||!i)return null;const f=t?p=>{const _=r.getState().getNodes().filter(g=>g.selected);t(p,_)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(wn,p.key)&&u({x:wn[p.key].x,y:wn[p.key].y,isShiftPressed:p.shiftKey})};return C.createElement("div",{className:We(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},C.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:s,height:i,top:a,left:o}}))}var iP=v.memo(sP);const oP=t=>t.nodesSelectionActive,Wm=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:_,multiSelectionKeyCode:g,panActivationKeyCode:x,zoomActivationKeyCode:y,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:S,panOnScroll:R,panOnScrollSpeed:k,panOnScrollMode:P,zoomOnDoubleClick:L,panOnDrag:V,defaultViewport:j,translateExtent:O,minZoom:z,maxZoom:A,preventScrolling:N,onSelectionContextMenu:F,noWheelClassName:$,noPanClassName:H,disableKeyboardA11y:T})=>{const B=ve(oP),W=_r(d),M=_r(x),G=M||V,D=M||R,I=W||f&&G!==!0;return zR({deleteKeyCode:a,multiSelectionKeyCode:g}),C.createElement(YR,{onMove:l,onMoveStart:c,onMoveEnd:u,onPaneContextMenu:i,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:S,panOnScroll:D,panOnScrollSpeed:k,panOnScrollMode:P,zoomOnDoubleClick:L,panOnDrag:!W&&G,defaultViewport:j,translateExtent:O,minZoom:z,maxZoom:A,zoomActivationKeyCode:y,preventScrolling:N,noWheelClassName:$,noPanClassName:H},C.createElement(Fm,{onSelectionStart:p,onSelectionEnd:_,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:G,isSelecting:!!I,selectionMode:h},t,B&&C.createElement(iP,{onSelectionContextMenu:F,noPanClassName:H,disableKeyboardA11y:T})))};Wm.displayName="FlowRenderer";var aP=v.memo(Wm);function lP(t){return ve(v.useCallback(n=>t?wm(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function cP(t){const e={input:Gn(t.input||Nm),default:Gn(t.default||wo),output:Gn(t.output||Lm),group:Gn(t.group||za)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,i)=>(s[i]=Gn(t[i]||wo),s),n);return{...e,...r}}const uP=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},dP=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Km=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:i,onError:o}=ve(dP,$e),a=lP(t.onlyRenderVisibleElements),l=v.useRef(),c=v.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(f)});return l.current=u,u},[]);return v.useEffect(()=>()=>{var u;(u=l==null?void 0:l.current)==null||u.disconnect()},[]),C.createElement("div",{className:"react-flow__nodes",style:Ka},a.map(u=>{var S,R,k;let d=u.type||"default";t.nodeTypes[d]||(o==null||o("003",Nt.error003(d)),d="default");const f=t.nodeTypes[d]||t.nodeTypes.default,h=!!(u.draggable||e&&typeof u.draggable>"u"),p=!!(u.selectable||s&&typeof u.selectable>"u"),_=!!(u.connectable||n&&typeof u.connectable>"u"),g=!!(u.focusable||r&&typeof u.focusable>"u"),x=t.nodeExtent?Oa(u.positionAbsolute,t.nodeExtent):u.positionAbsolute,y=(x==null?void 0:x.x)??0,w=(x==null?void 0:x.y)??0,E=uP({x:y,y:w,width:u.width??0,height:u.height??0,origin:t.nodeOrigin});return C.createElement(f,{key:u.id,id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||Q.Bottom,targetPosition:u.targetPosition||Q.Top,hidden:u.hidden,xPos:y,yPos:w,xPosOrigin:E.x,yPosOrigin:E.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!u.selected,isDraggable:h,isSelectable:p,isConnectable:_,isFocusable:g,resizeObserver:c,dragHandle:u.dragHandle,zIndex:((S=u[we])==null?void 0:S.z)??0,isParent:!!((R=u[we])!=null&&R.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!u.width&&!!u.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((k=u[we])!=null&&k.handleBounds)})}))};Km.displayName="NodeRenderer";var hP=v.memo(Km);const fP=(t,e,n)=>n===Q.Left?t-e:n===Q.Right?t+e:t,mP=(t,e,n)=>n===Q.Top?t-e:n===Q.Bottom?t+e:t,Uu="react-flow__edgeupdater",zu=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:a})=>C.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:We([Uu,`${Uu}-${a}`]),cx:fP(e,r,t),cy:mP(n,r,t),r,stroke:"transparent",fill:"transparent"}),pP=()=>!0;var cn=t=>{const e=({id:n,className:r,type:s,data:i,onClick:o,onEdgeDoubleClick:a,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:_,style:g,source:x,target:y,sourceX:w,sourceY:E,targetX:S,targetY:R,sourcePosition:k,targetPosition:P,elementsSelectable:L,hidden:V,sourceHandleId:j,targetHandleId:O,onContextMenu:z,onMouseEnter:A,onMouseMove:N,onMouseLeave:F,reconnectRadius:$,onReconnect:H,onReconnectStart:T,onReconnectEnd:B,markerEnd:W,markerStart:M,rfId:G,ariaLabel:D,isFocusable:I,isReconnectable:K,pathOptions:Z,interactionWidth:te,disableKeyboardA11y:ee})=>{const Y=v.useRef(null),[ue,he]=v.useState(!1),[pe,de]=v.useState(!1),oe=Ie(),_e=v.useMemo(()=>`url('#${vo(M,G)}')`,[M,G]),ie=v.useMemo(()=>`url('#${vo(W,G)}')`,[W,G]);if(V)return null;const J=X=>{var Be;const{edges:q,addSelectedEdges:ae,unselectNodesAndEdges:Pe,multiSelectionActive:Ke}=oe.getState(),Ve=q.find(Je=>Je.id===n);Ve&&(L&&(oe.setState({nodesSelectionActive:!1}),Ve.selected&&Ke?(Pe({nodes:[],edges:[Ve]}),(Be=Y.current)==null||Be.blur()):ae([n])),o&&o(X,Ve))},be=Fn(n,oe.getState,a),je=Fn(n,oe.getState,z),wt=Fn(n,oe.getState,A),ft=Fn(n,oe.getState,N),Ee=Fn(n,oe.getState,F),Re=(X,q)=>{if(X.button!==0)return;const{edges:ae,isValidConnection:Pe}=oe.getState(),Ke=q?y:x,Ve=(q?O:j)||null,Be=q?"target":"source",Je=Pe||pP,ze=q,bt=ae.find(le=>le.id===n);de(!0),T==null||T(X,bt,Be);const ne=le=>{de(!1),B==null||B(le,bt,Be)};Am({event:X,handleId:Ve,nodeId:Ke,onConnect:le=>H==null?void 0:H(bt,le),isTarget:ze,getState:oe.getState,setState:oe.setState,isValidConnection:Je,edgeUpdaterType:Be,onReconnectEnd:ne})},mt=X=>Re(X,!0),lt=X=>Re(X,!1),Ge=()=>he(!0),ct=()=>he(!1),Te=!L&&!o,Ue=X=>{var q;if(!ee&&mm.includes(X.key)&&L){const{unselectNodesAndEdges:ae,addSelectedEdges:Pe,edges:Ke}=oe.getState();X.key==="Escape"?((q=Y.current)==null||q.blur(),ae({edges:[Ke.find(Be=>Be.id===n)]})):Pe([n])}};return C.createElement("g",{className:We(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:c,inactive:Te,updating:ue}]),onClick:J,onDoubleClick:be,onContextMenu:je,onMouseEnter:wt,onMouseMove:ft,onMouseLeave:Ee,onKeyDown:I?Ue:void 0,tabIndex:I?0:void 0,role:I?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":D===null?void 0:D||`Edge from ${x} to ${y}`,"aria-describedby":I?`${Dm}-${G}`:void 0,ref:Y},!pe&&C.createElement(t,{id:n,source:x,target:y,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:_,data:i,style:g,sourceX:w,sourceY:E,targetX:S,targetY:R,sourcePosition:k,targetPosition:P,sourceHandleId:j,targetHandleId:O,markerStart:_e,markerEnd:ie,pathOptions:Z,interactionWidth:te}),K&&C.createElement(C.Fragment,null,(K==="source"||K===!0)&&C.createElement(zu,{position:k,centerX:w,centerY:E,radius:$,onMouseDown:mt,onMouseEnter:Ge,onMouseOut:ct,type:"source"}),(K==="target"||K===!0)&&C.createElement(zu,{position:P,centerX:S,centerY:R,radius:$,onMouseDown:lt,onMouseEnter:Ge,onMouseOut:ct,type:"target"})))};return e.displayName="EdgeWrapper",v.memo(e)};function gP(t){const e={default:cn(t.default||ws),straight:cn(t.bezier||Ba),step:cn(t.step||Va),smoothstep:cn(t.step||Fs),simplebezier:cn(t.simplebezier||$a)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,i)=>(s[i]=cn(t[i]||ws),s),n);return{...e,...r}}function Wu(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,s=((n==null?void 0:n.y)||0)+e.y,i=(n==null?void 0:n.width)||e.width,o=(n==null?void 0:n.height)||e.height;switch(t){case Q.Top:return{x:r+i/2,y:s};case Q.Right:return{x:r+i,y:s+o/2};case Q.Bottom:return{x:r+i/2,y:s+o};case Q.Left:return{x:r,y:s+o/2}}}function Ku(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const _P=(t,e,n,r,s,i)=>{const o=Wu(n,t,e),a=Wu(i,r,s);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function yP({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:i,width:o,height:a,transform:l}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=Ma({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),d=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),f=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(d*f)>0}function Xu(t){var r,s,i,o,a;const e=((r=t==null?void 0:t[we])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const vP=[{level:0,isMaxLevel:!0,edges:[]}];function xP(t,e,n=!1){let r=-1;const s=t.reduce((o,a)=>{var u,d;const l=st(a.zIndex);let c=l?a.zIndex:0;if(n){const f=e.get(a.target),h=e.get(a.source),p=a.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),_=Math.max(((u=h==null?void 0:h[we])==null?void 0:u.z)||0,((d=f==null?void 0:f[we])==null?void 0:d.z)||0,1e3);c=(l?a.zIndex:0)+(p?_:0)}return o[c]?o[c].push(a):o[c]=[a],r=c>r?c:r,o},{}),i=Object.entries(s).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return i.length===0?vP:i}function wP(t,e,n){const r=ve(v.useCallback(s=>t?s.edges.filter(i=>{const o=e.get(i.source),a=e.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&yP({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return xP(r,e,n)}const bP=({color:t="none",strokeWidth:e=1})=>C.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),EP=({color:t="none",strokeWidth:e=1})=>C.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Yu={[xs.Arrow]:bP,[xs.ArrowClosed]:EP};function SP(t){const e=Ie();return v.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(Yu,t)?Yu[t]:((i=(s=e.getState()).onError)==null||i.call(s,"009",Nt.error009(t)),null)},[t])}const TP=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=SP(e);return l?C.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},C.createElement(l,{color:n,strokeWidth:o})):null},AP=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=vo(o,e);r.includes(a)||(s.push({id:a,color:o.color||t,...o}),r.push(a))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))},Xm=({defaultColor:t,rfId:e})=>{const n=ve(v.useCallback(AP({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((i,o)=>i.id!==s[o].id)));return C.createElement("defs",null,n.map(r=>C.createElement(TP,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Xm.displayName="MarkerDefinitions";var CP=v.memo(Xm);const RP=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Ym=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:_,children:g,disableKeyboardA11y:x})=>{const{edgesFocusable:y,edgesUpdatable:w,elementsSelectable:E,width:S,height:R,connectionMode:k,nodeInternals:P,onError:L}=ve(RP,$e),V=wP(e,P,n);return S?C.createElement(C.Fragment,null,V.map(({level:j,edges:O,isMaxLevel:z})=>C.createElement("svg",{key:j,style:{zIndex:j},width:S,height:R,className:"react-flow__edges react-flow__container"},z&&C.createElement(CP,{defaultColor:t,rfId:r}),C.createElement("g",null,O.map(A=>{const[N,F,$]=Xu(P.get(A.source)),[H,T,B]=Xu(P.get(A.target));if(!$||!B)return null;let W=A.type||"default";s[W]||(L==null||L("011",Nt.error011(W)),W="default");const M=s[W]||s.default,G=k===Zt.Strict?T.target:(T.target??[]).concat(T.source??[]),D=Ku(F.source,A.sourceHandle),I=Ku(G,A.targetHandle),K=(D==null?void 0:D.position)||Q.Bottom,Z=(I==null?void 0:I.position)||Q.Top,te=!!(A.focusable||y&&typeof A.focusable>"u"),ee=A.reconnectable||A.updatable,Y=typeof f<"u"&&(ee||w&&typeof ee>"u");if(!D||!I)return L==null||L("008",Nt.error008(D,A)),null;const{sourceX:ue,sourceY:he,targetX:pe,targetY:de}=_P(N,D,K,H,I,Z);return C.createElement(M,{key:A.id,id:A.id,className:We([A.className,i]),type:W,data:A.data,selected:!!A.selected,animated:!!A.animated,hidden:!!A.hidden,label:A.label,labelStyle:A.labelStyle,labelShowBg:A.labelShowBg,labelBgStyle:A.labelBgStyle,labelBgPadding:A.labelBgPadding,labelBgBorderRadius:A.labelBgBorderRadius,style:A.style,source:A.source,target:A.target,sourceHandleId:A.sourceHandle,targetHandleId:A.targetHandle,markerEnd:A.markerEnd,markerStart:A.markerStart,sourceX:ue,sourceY:he,targetX:pe,targetY:de,sourcePosition:K,targetPosition:Z,elementsSelectable:E,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,reconnectRadius:_,rfId:r,ariaLabel:A.ariaLabel,isFocusable:te,isReconnectable:Y,pathOptions:"pathOptions"in A?A.pathOptions:void 0,interactionWidth:A.interactionWidth,disableKeyboardA11y:x})})))),g):null};Ym.displayName="EdgeRenderer";var PP=v.memo(Ym);const NP=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function IP({children:t}){const e=ve(NP);return C.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function LP(t){const e=Wa(),n=v.useRef(!1);v.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const kP={[Q.Left]:Q.Right,[Q.Right]:Q.Left,[Q.Top]:Q.Bottom,[Q.Bottom]:Q.Top},qm=({nodeId:t,handleType:e,style:n,type:r=Et.Bezier,CustomComponent:s,connectionStatus:i})=>{var R,k,P;const{fromNode:o,handleId:a,toX:l,toY:c,connectionMode:u}=ve(v.useCallback(L=>({fromNode:L.nodeInternals.get(t),handleId:L.connectionHandleId,toX:(L.connectionPosition.x-L.transform[0])/L.transform[2],toY:(L.connectionPosition.y-L.transform[1])/L.transform[2],connectionMode:L.connectionMode}),[t]),$e),d=(R=o==null?void 0:o[we])==null?void 0:R.handleBounds;let f=d==null?void 0:d[e];if(u===Zt.Loose&&(f=f||(d==null?void 0:d[e==="source"?"target":"source"])),!o||!f)return null;const h=a?f.find(L=>L.id===a):f[0],p=h?h.x+h.width/2:(o.width??0)/2,_=h?h.y+h.height/2:o.height??0,g=(((k=o.positionAbsolute)==null?void 0:k.x)??0)+p,x=(((P=o.positionAbsolute)==null?void 0:P.y)??0)+_,y=h==null?void 0:h.position,w=y?kP[y]:null;if(!y||!w)return null;if(s)return C.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:h,fromX:g,fromY:x,toX:l,toY:c,fromPosition:y,toPosition:w,connectionStatus:i});let E="";const S={sourceX:g,sourceY:x,sourcePosition:y,targetX:l,targetY:c,targetPosition:w};return r===Et.Bezier?[E]=Fa(S):r===Et.Step?[E]=yo({...S,borderRadius:0}):r===Et.SmoothStep?[E]=yo(S):r===Et.SimpleBezier?[E]=ym(S):E=`M${g},${x} ${l},${c}`,C.createElement("path",{d:E,fill:"none",className:"react-flow__connection-path",style:n})};qm.displayName="ConnectionLine";const jP=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function DP({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:i,nodesConnectable:o,width:a,height:l,connectionStatus:c}=ve(jP,$e);return!(s&&i&&a&&o)?null:C.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},C.createElement("g",{className:We(["react-flow__connection",c])},C.createElement(qm,{nodeId:s,handleType:i,style:e,type:n,CustomComponent:r,connectionStatus:c})))}function qu(t,e){return v.useRef(null),Ie(),v.useMemo(()=>e(t),[t])}const Zm=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:i,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:_,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:y,connectionLineComponent:w,connectionLineContainerStyle:E,selectionKeyCode:S,selectionOnDrag:R,selectionMode:k,multiSelectionKeyCode:P,panActivationKeyCode:L,zoomActivationKeyCode:V,deleteKeyCode:j,onlyRenderVisibleElements:O,elementsSelectable:z,selectNodesOnDrag:A,defaultViewport:N,translateExtent:F,minZoom:$,maxZoom:H,preventScrolling:T,defaultMarkerColor:B,zoomOnScroll:W,zoomOnPinch:M,panOnScroll:G,panOnScrollSpeed:D,panOnScrollMode:I,zoomOnDoubleClick:K,panOnDrag:Z,onPaneClick:te,onPaneMouseEnter:ee,onPaneMouseMove:Y,onPaneMouseLeave:ue,onPaneScroll:he,onPaneContextMenu:pe,onEdgeContextMenu:de,onEdgeMouseEnter:oe,onEdgeMouseMove:_e,onEdgeMouseLeave:ie,onReconnect:J,onReconnectStart:be,onReconnectEnd:je,reconnectRadius:wt,noDragClassName:ft,noWheelClassName:Ee,noPanClassName:Re,elevateEdgesOnSelect:mt,disableKeyboardA11y:lt,nodeOrigin:Ge,nodeExtent:ct,rfId:Te})=>{const Ue=qu(t,cP),X=qu(e,gP);return LP(i),C.createElement(aP,{onPaneClick:te,onPaneMouseEnter:ee,onPaneMouseMove:Y,onPaneMouseLeave:ue,onPaneContextMenu:pe,onPaneScroll:he,deleteKeyCode:j,selectionKeyCode:S,selectionOnDrag:R,selectionMode:k,onSelectionStart:_,onSelectionEnd:g,multiSelectionKeyCode:P,panActivationKeyCode:L,zoomActivationKeyCode:V,elementsSelectable:z,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:W,zoomOnPinch:M,zoomOnDoubleClick:K,panOnScroll:G,panOnScrollSpeed:D,panOnScrollMode:I,panOnDrag:Z,defaultViewport:N,translateExtent:F,minZoom:$,maxZoom:H,onSelectionContextMenu:p,preventScrolling:T,noDragClassName:ft,noWheelClassName:Ee,noPanClassName:Re,disableKeyboardA11y:lt},C.createElement(IP,null,C.createElement(PP,{edgeTypes:X,onEdgeClick:a,onEdgeDoubleClick:c,onlyRenderVisibleElements:O,onEdgeContextMenu:de,onEdgeMouseEnter:oe,onEdgeMouseMove:_e,onEdgeMouseLeave:ie,onReconnect:J,onReconnectStart:be,onReconnectEnd:je,reconnectRadius:wt,defaultMarkerColor:B,noPanClassName:Re,elevateEdgesOnSelect:!!mt,disableKeyboardA11y:lt,rfId:Te},C.createElement(DP,{style:y,type:x,component:w,containerStyle:E})),C.createElement("div",{className:"react-flow__edgelabel-renderer"}),C.createElement(hP,{nodeTypes:Ue,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:A,onlyRenderVisibleElements:O,noPanClassName:Re,noDragClassName:ft,disableKeyboardA11y:lt,nodeOrigin:Ge,nodeExtent:ct,rfId:Te})))};Zm.displayName="GraphView";var OP=v.memo(Zm);const Eo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],It={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Eo,nodeExtent:Eo,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Zt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:dR,isValidConnection:void 0},MP=()=>Ig((t,e)=>({...It,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:i}=e();t({nodeInternals:Pi(n,r,s,i)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",i=typeof r<"u",o=s?Pi(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:i?r:[],hasDefaultNodes:s,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=e(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((_,g)=>{const x=s.get(g.id);if(x!=null&&x.hidden)s.set(x.id,{...x,[we]:{...x[we],handleBounds:void 0}});else if(x){const y=Da(g.nodeElement);!!(y.width&&y.height&&(x.width!==y.width||x.height!==y.height||g.forceUpdate))&&(s.set(x.id,{...x,[we]:{...x[we],handleBounds:{source:Gu(".source",g.nodeElement,f,c),target:Gu(".target",g.nodeElement,f,c)}},...y}),_.push({id:x.id,type:"dimensions",dimensions:y}))}return _},[]);Mm(s,c);const p=o||i&&!o&&$m(e,{initial:!0,...a});t({nodeInternals:new Map(s),fitViewOnInitDone:p}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:i}=e(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:s};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});i(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:i,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(i){const c=Bm(n,a()),u=Pi(c,s,o,l);t({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=e();let o,a=null;r?o=n.map(l=>kt(l,!0)):(o=_n(i(),n),a=_n(s,[])),Kr({changedNodes:o,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=e();let o,a=null;r?o=n.map(l=>kt(l,!0)):(o=_n(s,n),a=_n(i(),[])),Kr({changedNodes:a,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:i}=e(),o=n||i(),a=r||s,l=o.map(u=>(u.selected=!1,kt(u.id,!1))),c=a.map(u=>kt(u.id,!1));Kr({changedNodes:l,changedEdges:c,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r==null||r.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r==null||r.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),i=r().filter(a=>a.selected).map(a=>kt(a.id,!1)),o=n.filter(a=>a.selected).map(a=>kt(a.id,!1));Kr({changedNodes:i,changedEdges:o,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=Oa(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:i,d3Zoom:o,d3Selection:a,translateExtent:l}=e();if(!o||!a||!n.x&&!n.y)return!1;const c=yn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[s,i]],d=o==null?void 0:o.constrain()(c,u,l);return o.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>t({connectionNodeId:It.connectionNodeId,connectionHandleId:It.connectionHandleId,connectionHandleType:It.connectionHandleType,connectionStatus:It.connectionStatus,connectionStartHandle:It.connectionStartHandle,connectionEndHandle:It.connectionEndHandle}),reset:()=>t({...It})}),Object.is),Xa=({children:t})=>{const e=v.useRef(null);return e.current||(e.current=MP()),C.createElement(rR,{value:e.current},t)};Xa.displayName="ReactFlowProvider";const Jm=({children:t})=>v.useContext(Bs)?C.createElement(C.Fragment,null,t):C.createElement(Xa,null,t);Jm.displayName="ReactFlowWrapper";const $P={input:Nm,default:wo,output:Lm,group:za},VP={default:ws,straight:Ba,step:Va,smoothstep:Fs,simplebezier:$a},BP=[0,0],FP=[15,15],HP={x:0,y:0,zoom:1},GP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Qm=v.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i=$P,edgeTypes:o=VP,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:_,onClickConnectStart:g,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:S,onNodeDoubleClick:R,onNodeDragStart:k,onNodeDrag:P,onNodeDragStop:L,onNodesDelete:V,onEdgesDelete:j,onSelectionChange:O,onSelectionDragStart:z,onSelectionDrag:A,onSelectionDragStop:N,onSelectionContextMenu:F,onSelectionStart:$,onSelectionEnd:H,connectionMode:T=Zt.Strict,connectionLineType:B=Et.Bezier,connectionLineStyle:W,connectionLineComponent:M,connectionLineContainerStyle:G,deleteKeyCode:D="Backspace",selectionKeyCode:I="Shift",selectionOnDrag:K=!1,selectionMode:Z=Pn.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:ee=vs()?"Meta":"Control",zoomActivationKeyCode:Y=vs()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:he=FP,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:de=!0,nodesDraggable:oe,nodesConnectable:_e,nodesFocusable:ie,nodeOrigin:J=BP,edgesFocusable:be,edgesUpdatable:je,elementsSelectable:wt,defaultViewport:ft=HP,minZoom:Ee=.5,maxZoom:Re=2,translateExtent:mt=Eo,preventScrolling:lt=!0,nodeExtent:Ge,defaultMarkerColor:ct="#b1b1b7",zoomOnScroll:Te=!0,zoomOnPinch:Ue=!0,panOnScroll:X=!1,panOnScrollSpeed:q=.5,panOnScrollMode:ae=Yt.Free,zoomOnDoubleClick:Pe=!0,panOnDrag:Ke=!0,onPaneClick:Ve,onPaneMouseEnter:Be,onPaneMouseMove:Je,onPaneMouseLeave:ze,onPaneScroll:bt,onPaneContextMenu:ne,children:ce,onEdgeContextMenu:le,onEdgeDoubleClick:Xe,onEdgeMouseEnter:Qe,onEdgeMouseMove:tn,onEdgeMouseLeave:Hs,onEdgeUpdate:sp,onEdgeUpdateStart:ip,onEdgeUpdateEnd:op,onReconnect:ap,onReconnectStart:lp,onReconnectEnd:cp,reconnectRadius:up=10,edgeUpdaterRadius:dp=10,onNodesChange:hp,onEdgesChange:fp,noDragClassName:mp="nodrag",noWheelClassName:pp="nowheel",noPanClassName:Ya="nopan",fitView:gp=!1,fitViewOptions:_p,connectOnClick:yp=!0,attributionPosition:vp,proOptions:xp,defaultEdgeOptions:wp,elevateNodesOnSelect:bp=!0,elevateEdgesOnSelect:Ep=!1,disableKeyboardA11y:qa=!1,autoPanOnConnect:Sp=!0,autoPanOnNodeDrag:Tp=!0,connectionRadius:Ap=20,isValidConnection:Cp,onError:Rp,style:Pp,id:Za,nodeDragThreshold:Np,...Ip},Lp)=>{const Gs=Za||"1";return C.createElement("div",{...Ip,style:{...Pp,...GP},ref:Lp,className:We(["react-flow",s]),"data-testid":"rf__wrapper",id:Za},C.createElement(Jm,null,C.createElement(OP,{onInit:c,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:S,onNodeDoubleClick:R,nodeTypes:i,edgeTypes:o,connectionLineType:B,connectionLineStyle:W,connectionLineComponent:M,connectionLineContainerStyle:G,selectionKeyCode:I,selectionOnDrag:K,selectionMode:Z,deleteKeyCode:D,multiSelectionKeyCode:ee,panActivationKeyCode:te,zoomActivationKeyCode:Y,onlyRenderVisibleElements:pe,selectNodesOnDrag:de,defaultViewport:ft,translateExtent:mt,minZoom:Ee,maxZoom:Re,preventScrolling:lt,zoomOnScroll:Te,zoomOnPinch:Ue,zoomOnDoubleClick:Pe,panOnScroll:X,panOnScrollSpeed:q,panOnScrollMode:ae,panOnDrag:Ke,onPaneClick:Ve,onPaneMouseEnter:Be,onPaneMouseMove:Je,onPaneMouseLeave:ze,onPaneScroll:bt,onPaneContextMenu:ne,onSelectionContextMenu:F,onSelectionStart:$,onSelectionEnd:H,onEdgeContextMenu:le,onEdgeDoubleClick:Xe,onEdgeMouseEnter:Qe,onEdgeMouseMove:tn,onEdgeMouseLeave:Hs,onReconnect:ap??sp,onReconnectStart:lp??ip,onReconnectEnd:cp??op,reconnectRadius:up??dp,defaultMarkerColor:ct,noDragClassName:mp,noWheelClassName:pp,noPanClassName:Ya,elevateEdgesOnSelect:Ep,rfId:Gs,disableKeyboardA11y:qa,nodeOrigin:J,nodeExtent:Ge}),C.createElement(kR,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:_,onClickConnectStart:g,onClickConnectEnd:x,nodesDraggable:oe,nodesConnectable:_e,nodesFocusable:ie,edgesFocusable:be,edgesUpdatable:je,elementsSelectable:wt,elevateNodesOnSelect:bp,minZoom:Ee,maxZoom:Re,nodeExtent:Ge,onNodesChange:hp,onEdgesChange:fp,snapToGrid:ue,snapGrid:he,connectionMode:T,translateExtent:mt,connectOnClick:yp,defaultEdgeOptions:wp,fitView:gp,fitViewOptions:_p,onNodesDelete:V,onEdgesDelete:j,onNodeDragStart:k,onNodeDrag:P,onNodeDragStop:L,onSelectionDrag:A,onSelectionDragStart:z,onSelectionDragStop:N,noPanClassName:Ya,nodeOrigin:J,rfId:Gs,autoPanOnConnect:Sp,autoPanOnNodeDrag:Tp,onError:Rp,connectionRadius:Ap,isValidConnection:Cp,nodeDragThreshold:Np}),C.createElement(IR,{onSelectionChange:O}),ce,C.createElement(iR,{proOptions:xp,position:vp}),C.createElement($R,{rfId:Gs,disableKeyboardA11y:qa})))});Qm.displayName="ReactFlow";function ep(t){return e=>{const[n,r]=v.useState(e),s=v.useCallback(i=>r(o=>t(i,o)),[]);return[n,r,s]}}const UP=ep(Bm),zP=ep(JR);function WP(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},C.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function KP(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},C.createElement("path",{d:"M0 0h32v4.2H0z"}))}function XP(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},C.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function YP(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},C.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function qP(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},C.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Yn=({children:t,className:e,...n})=>C.createElement("button",{type:"button",className:We(["react-flow__controls-button",e]),...n},t);Yn.displayName="ControlButton";const ZP=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),tp=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:c,children:u,position:d="bottom-left"})=>{const f=Ie(),[h,p]=v.useState(!1),{isInteractive:_,minZoomReached:g,maxZoomReached:x}=ve(ZP,$e),{zoomIn:y,zoomOut:w,fitView:E}=Wa();if(v.useEffect(()=>{p(!0)},[]),!h)return null;const S=()=>{y(),i==null||i()},R=()=>{w(),o==null||o()},k=()=>{E(s),a==null||a()},P=()=>{f.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),l==null||l(!_)};return C.createElement(ja,{className:We(["react-flow__controls",c]),position:d,style:t,"data-testid":"rf__controls"},e&&C.createElement(C.Fragment,null,C.createElement(Yn,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},C.createElement(WP,null)),C.createElement(Yn,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},C.createElement(KP,null))),n&&C.createElement(Yn,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},C.createElement(XP,null)),r&&C.createElement(Yn,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity"},_?C.createElement(qP,null):C.createElement(YP,null)),u)};tp.displayName="Controls";var JP=v.memo(tp),it;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(it||(it={}));function QP({color:t,dimensions:e,lineWidth:n}){return C.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function eN({color:t,radius:e}){return C.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const tN={[it.Dots]:"#91919a",[it.Lines]:"#eee",[it.Cross]:"#e2e2e2"},nN={[it.Dots]:1,[it.Lines]:1,[it.Cross]:6},rN=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function np({id:t,variant:e=it.Dots,gap:n=20,size:r,lineWidth:s=1,offset:i=2,color:o,style:a,className:l}){const c=v.useRef(null),{transform:u,patternId:d}=ve(rN,$e),f=o||tN[e],h=r||nN[e],p=e===it.Dots,_=e===it.Cross,g=Array.isArray(n)?n:[n,n],x=[g[0]*u[2]||1,g[1]*u[2]||1],y=h*u[2],w=_?[y,y]:x,E=p?[y/i,y/i]:[w[0]/i,w[1]/i];return C.createElement("svg",{className:We(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},C.createElement("pattern",{id:d+t,x:u[0]%x[0],y:u[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`},p?C.createElement(eN,{color:f,radius:y/i}):C.createElement(QP,{dimensions:w,color:f,lineWidth:s})),C.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+t})`}))}np.displayName="Background";var sN=v.memo(np);const iN=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),oN=t=>{const e=[],n=[];e.push({id:"root",type:"custom",position:{x:0,y:0},data:{title:""}});const r=(s,i="root")=>{const o=s.id;e.push({id:o,type:"custom",position:{x:0,y:0},data:{title:s.name}}),i!=="root"?n.push({id:`e-${i}-${o}`,source:i,target:o,type:"smoothstep"}):n.push({id:`e-root-${o}`,source:"root",target:o,type:"smoothstep"}),s.children&&s.children.length>0&&s.children.forEach(c=>{r(c,o)});const a=s.pname?`${s.pname}/${s.name}`:s.name,l=t.agents.filter(c=>c.tags.some(u=>u===a));if(l.length>0){const c=iN();e.push({id:c,type:"custom",position:{x:0,y:0},data:{title:"",agents:l.map(u=>({name:u.name,description:u.description}))}}),n.push({id:`e-${o}-${c}`,source:o,target:c,type:"smoothstep"})}};return t.tree_data.forEach(s=>{r(s)}),{nodes:e,edges:n}},aN=(t,e)=>!e.some(n=>n.source===t),lN=({data:t,selected:e})=>m.jsxs("div",{className:`px-4 py-3 shadow-md rounded-lg bg-white border-2 min-w-[220px] max-w-[280px] hover:shadow-lg transition-all duration-200 ${e?"border-blue-500 shadow-blue-100 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[m.jsx(Nn,{type:"target",position:Q.Top,className:"w-3 h-3 bg-blue-500 border-2 border-white",style:{top:-6}}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-sm font-bold text-gray-800 truncate",children:t.title}),t.description&&m.jsx("div",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:t.description}),t.agents&&t.agents.length>0&&m.jsx("div",{className:"mt-3 space-y-2",children:t.agents.map((n,r)=>m.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:m.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded-full"})}),m.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[m.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate",children:n.name}),m.jsx("div",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:n.description})]})]})},r))})]}),m.jsx(Nn,{type:"source",position:Q.Bottom,className:"w-3 h-3 bg-blue-500 border-2 border-white",style:{bottom:-6}})]}),cN=({id:t,sourceX:e,sourceY:n,targetX:r,targetY:s,sourcePosition:i,targetPosition:o,style:a={}})=>{const l=v.useMemo(()=>{const[c]=Fa({sourceX:e,sourceY:n,sourcePosition:i,targetX:r,targetY:s,targetPosition:o});return c},[e,n,r,s,i,o]);return m.jsx("path",{id:t,className:"react-flow__edge-path",d:l,stroke:"#b1b1b7",strokeWidth:2,fill:"none",style:a})},uN={custom:lN},dN={custom:cN},Zu=(t,e,n="TB")=>{const r=new al.graphlib.Graph;r.setDefaultEdgeLabel(()=>({})),r.setGraph({rankdir:n});const s=280,i=120;return t.forEach(a=>{const c=a.data.agents&&a.data.agents.length>0?i+a.data.agents.length*80:i;r.setNode(a.id,{width:s,height:c})}),e.forEach(a=>{r.setEdge(a.source,a.target)}),al.layout(r),{nodes:t.map(a=>{const l=r.node(a.id),c=aN(a.id,e),d=a.data.agents&&a.data.agents.length>0?i+a.data.agents.length*80:i;return{...a,data:{...a.data,isLeaf:c},position:{x:l.x-s/2,y:l.y-d/2}}}),edges:e}},hN=({direction:t="TB",organizationData:e})=>{const[n,r]=v.useState([]),[s,i]=v.useState(!0),{nodes:o,edges:a}=v.useMemo(()=>e?oN(e):{nodes:[],edges:[]},[e]),{nodes:l,edges:c}=Zu(o,a,t),[u,d,f]=UP(l),[h,p,_]=zP(c),g=v.useCallback(y=>p(w=>vm(y,w)),[p]),x=v.useCallback(({nodes:y})=>{r(y)},[]);return v.useEffect(()=>{if(e){const{nodes:y,edges:w}=Zu(o,a,t);d(y),p(w),i(!1)}else i(!1)},[e,o,a,t,d,p]),s?m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"..."})]})}):e?m.jsx("div",{className:"w-full h-full",style:{width:"100%",height:"100%",position:"relative"},children:m.jsxs(Qm,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:_,onConnect:g,onSelectionChange:x,nodeTypes:uN,edgeTypes:dN,connectionLineType:Et.SmoothStep,selectionMode:Pn.Partial,fitView:!0,minZoom:.3,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},proOptions:{hideAttribution:!0},children:[m.jsx(JP,{}),m.jsx(sN,{variant:it.Dots,gap:30,size:1,color:"#e5e7eb"}),n.length>0&&m.jsxs(ja,{position:"bottom-left",className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 max-w-xs",children:[m.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:[" (",n.length,")"]}),m.jsx("div",{className:"space-y-1",children:n.map(y=>m.jsxs("div",{className:"text-xs text-gray-600",children:[" ",y.data.title]},y.id))})]})]})}):m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-gray-400 mb-4",children:m.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),m.jsx("p",{className:"text-gray-600 mb-2",children:""}),m.jsx("p",{className:"text-sm text-gray-500",children:""})]})})},fN=({open:t,onOpenChange:e})=>{const[n,r]=v.useState("TB"),[s,i]=v.useState(null);return v.useEffect(()=>{t?(async()=>{var a,l;try{console.log("...");const c=await yt.post("/agent/organization");console.log(":",c.data),console.log(":",c.status),console.log(":",c.headers),c.data&&c.data.tree_data&&c.data.agents?(console.log(":",c.data),i(c.data)):(console.warn(":",c.data),console.warn("tree_data:",(a=c.data)==null?void 0:a.tree_data),console.warn("agents:",(l=c.data)==null?void 0:l.agents),i(null))}catch(c){console.error(":",c),c.response&&(console.error(":",c.response.status),console.error(":",c.response.data))}})():i(null)},[t]),m.jsx(rr,{open:t,onOpenChange:e,children:m.jsxs(sr,{className:"max-w-[95vw] h-[95vh] p-0",children:[m.jsxs(ir,{className:"sr-only",children:[m.jsx(or,{children:""}),m.jsx(Zp,{children:""})]}),m.jsx(Xa,{children:m.jsx(hN,{direction:n,organizationData:s})})]})})};function mN(){const t=new Date().getHours();return t>=5&&t<12?"":t>=12&&t<18?"":t>=18&&t<22?"":""}function pN(t){const e=mN();return t?`${t}${e}`:e}const gN=async t=>{const{data:e}=await yt.post("/chat/conversation/create",t);return e},_N=async t=>{const{data:e}=await yt.post(`/chat/conversation/detail/${t}`);return e},yN=async(t,e)=>{const{data:n}=await yt.post(`/chat/conversation/update/${t}`,e);return n},vN=async t=>{await yt.post(`/chat/conversation/delete/${t}`)},xN=t=>Jp({queryKey:["conversation-detail",t],queryFn:()=>_N(t),enabled:!!t,staleTime:5*60*1e3}),rp=({className:t,fixed:e,children:n,title:r,messageCount:s=0,threadId:i,onTitleUpdate:o,onConversationDelete:a,...l})=>{C.useState(0),C.useState(0),C.useRef(null),Qp();const{toast:c}=So(),u=eg(),[d,f]=C.useState(!1),[h,p]=C.useState(!1),[_,g]=C.useState(""),[x,y]=C.useState(!1),[w,E]=C.useState(!1),S=r&&r.trim()!=="",R=()=>{g(r||""),f(!0)},k=async()=>{if(!(!i||!_.trim()))try{y(!0),await yN(i,{title:_.trim()}),c({title:"",description:""}),o==null||o(_.trim()),f(!1),Qa(i,"update"),u.invalidateQueries({queryKey:["conversation-detail",i]})}catch(L){console.error(":",L),c({variant:"destructive",title:"",description:""})}finally{y(!1)}},P=async()=>{if(i)try{E(!0),await vN(i),c({title:"",description:""}),a==null||a(),p(!1),Qa(i,"delete")}catch(L){console.error(":",L),c({variant:"destructive",title:"",description:""})}finally{E(!1)}};return m.jsxs("div",{children:[S&&m.jsxs(ud,{children:[m.jsx(dd,{asChild:!0,children:m.jsxs(fe,{variant:"ghost",className:"font-normal text-muted-foreground hover:text-foreground px-2 max-w-[200px]",children:[m.jsx("span",{className:"truncate",children:r}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),m.jsx(hd,{className:"w-36",children:m.jsxs(ji,{children:[m.jsxs(un,{onClick:R,children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-pencil-icon lucide-pencil mr-2",children:[m.jsx("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}),m.jsx("path",{d:"m15 5 4 4"})]}),""]}),m.jsxs(un,{className:"text-red-500 hover:text-red-500",onClick:()=>p(!0),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash2-icon lucide-trash-2 mr-2",children:[m.jsx("path",{d:"M3 6h18"}),m.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),m.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),m.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),m.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]}),""]})]})})]}),m.jsx(rr,{open:d,onOpenChange:f,children:m.jsxs(sr,{className:"sm:max-w-md",children:[m.jsx(ir,{children:m.jsx(or,{children:""})}),m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"space-y-2",children:[m.jsx(fd,{htmlFor:"title",children:""}),m.jsx(nr,{id:"title",value:_,onChange:L=>g(L.target.value),placeholder:"",maxLength:100})]})}),m.jsxs(tg,{children:[m.jsx(fe,{variant:"outline",onClick:()=>f(!1),disabled:x,children:""}),m.jsx(fe,{onClick:k,disabled:x||!_.trim(),children:x?"...":""})]})]})}),m.jsx(ng,{open:h,onOpenChange:p,children:m.jsxs(rg,{children:[m.jsxs(sg,{children:[m.jsx(ig,{children:""}),m.jsx(og,{children:""})]}),m.jsxs(ag,{children:[m.jsx(lg,{disabled:w,children:""}),m.jsx(cg,{onClick:P,disabled:w,className:"bg-red-500 hover:bg-red-600",children:w?"...":""})]})]})})]})};rp.displayName="ChatHeader";function wN(t){const e=ka();return m.jsxs("div",{ref:e.scrollRef,style:{width:"100%",height:"100%"},className:t.className,children:[m.jsx("div",{ref:e.contentRef,className:t.contentClassName,children:t.content}),t.footer]})}function bN(t){const{isAtBottom:e,scrollToBottom:n}=ka();return e?null:m.jsxs(fe,{variant:"outline",className:t.className,onClick:()=>n(),children:[m.jsx(Og,{className:"h-4 w-4"}),m.jsx("span",{children:"Scroll to bottom"})]})}function EN(){const[t,e]=OC(),[n,r]=DC(),{toast:s}=So(),{user:i}=ug(),o=dg(X=>X.auth.accessToken),[a,l]=bn("threadId");bn("hideToolCalls",od.withDefault(!1));const[c,u]=v.useState(""),{contentBlocks:d,setContentBlocks:f,handleFileUpload:h,dropRef:p,removeBlock:_,resetBlocks:g,dragOver:x,handlePaste:y}=qC(),[w,E]=v.useState(!1),[S,R]=v.useState([]),[k,P]=v.useState(null),[L,V]=v.useState(!1),[j,O]=v.useState(null),[z,A]=v.useState(null),[N,F]=v.useState(!1),[$,H]=v.useState(!1),[T,B]=v.useState(!1),[W,M]=v.useState(!1),G=Ps(),D=G.messages,I=G.isLoading,{data:K,isLoading:Z}=xN(a),te=v.useRef(void 0),ee=v.useRef(null),Y=v.useRef(null),ue=X=>{l(X),r(),e({});{O(null),A(null);const q=S.find(ae=>ae.is_default);q?P(q):S.length>0&&P(S[0])}};v.useEffect(()=>{if(!G.error){te.current=void 0;return}try{const X=G.error.message;if(!X||te.current===X)return;te.current=X,s({variant:"destructive",title:"An error occurred. Please try again.",description:`Error: ${X}`})}catch{}},[G.error]);const he=v.useRef(0);v.useEffect(()=>{D.length!==he.current&&(D!=null&&D.length)&&D[D.length-1].type==="ai"&&E(!0),he.current=D.length},[D]);const pe=async()=>{try{V(!0);const X={page:1,rows:100},q=await sl.getModels(X);if(R(q.items),!k&&q.items.length>0){const ae=q.items.find(Pe=>Pe.is_default);P(ae||q.items[0])}}catch{s({title:"",description:"",variant:"destructive"})}finally{V(!1)}};v.useEffect(()=>{pe()},[]),v.useEffect(()=>{if(a&&K&&!Z&&(K.agent?(async()=>{try{const q=await il(K.agent.uuid);O({id:K.agent.id,uuid:K.agent.uuid,name:K.agent.name,description:K.agent.description,prompt_template:K.agent.prompt_template,avatar:K.agent.avatar,created_at:K.agent.created_at||"",updated_at:K.agent.updated_at||"",knowledge_list:q.knowledge_list||[],tool_list:q.tool_list||[]})}catch(q){console.warn(":",q),O({id:K.agent.id,uuid:K.agent.uuid,name:K.agent.name,description:K.agent.description,prompt_template:K.agent.prompt_template,avatar:K.agent.avatar,created_at:K.agent.created_at||"",updated_at:K.agent.updated_at||"",knowledge_list:[],tool_list:[]})}})():O(null),K.llm_uuid&&S.length>0)){const X=S.find(q=>q.uuid===K.llm_uuid);X?P(X):sl.getModel(K.llm_uuid).then(q=>{P(q.llm_info)}).catch(q=>{console.warn(":",q)})}},[K,Z,S]),v.useEffect(()=>{if(!a&&S.length>0){O(null),A(null);const X=S.find(q=>q.is_default);X?P(X):S.length>0&&P(S[0])}},[a,S]),v.useEffect(()=>{if(console.log("Thread threadId:",{threadId:a,pendingMessage:ee.current,pendingData:Y.current}),a&&Y.current){const X=Y.current,q=ee.current;console.log(" LangGraph  threadId :",a),gN({uuid:a,...X}).then(ae=>{console.log(":",ae),q&&setTimeout(()=>{hg(a,q)},0)}).catch(ae=>{console.error(":",ae),s({variant:"destructive",title:"",description:ae instanceof Error?ae.message:""})}).finally(()=>{Y.current=null,ee.current=null})}},[a]);const de=()=>{if(K!=null&&K.title){const q=K.title.trim();return console.log(":",q),q.length>30?q.substring(0,30)+"...":q}const X=D.find(q=>q.type==="human");if(X){const q=zo(X.content);if(q){const ae=q.trim();return console.log(":",ae),ae.length>30?ae.substring(0,30)+"...":ae}}return console.log(""),""},oe=()=>{F(!0)},_e=()=>{F(!1)},ie=()=>{H(!0)},J=()=>{H(!1)},be=()=>{B(!0)},je=()=>{B(!1)},wt=()=>{M(!0)},ft=()=>{M(!1)},Ee=X=>{P(X)},Re=async X=>{try{const q=await il(X.uuid);O({...X,knowledge_list:q.knowledge_list||[],tool_list:q.tool_list||[]})}catch(q){console.error("",q),O(X)}_e()},mt=X=>{A(X),J()},lt=()=>k?k.display_name||k.name:L?"...":"",Ge=async X=>{if(X.preventDefault(),c.trim().length===0&&d.length===0||I)return;E(!1);const q={id:_d(),type:"human",content:[...c.trim().length>0?[{type:"text",text:c}]:[],...d]},ae=!a,Pe=c.trim();if(ae&&Pe){console.log(":",Pe);const ne=Pe.length>30?Pe.substring(0,30)+"...":Pe;Y.current={title:ne,agent_uuid:(j==null?void 0:j.uuid)||null,llm_uuid:k==null?void 0:k.uuid,prompt_uuid:(z==null?void 0:z.uuid)||null},ee.current=Pe}const Ke=GC(G.messages),Ve=Object.keys(t).length>0?t:void 0,Be=k?{uuid:k.uuid,llm_id:k.llm_id,is_update_model_list:!0}:void 0;console.log(j);const Je=j?{uuid:j.uuid,name:j.name,prompt_template:j.prompt_template,knowledge_list:j.knowledge_list||[],tool_list:j.tool_list||[]}:void 0,ze={messages:[...Ke,q],context:Ve},bt={...Be&&{model_config:Be},...Je&&{agent_config:Je},...z&&{system_prompt:{prompt:z.prompts,uuid:z.uuid}},...o&&{authorization:o}};G.submit(ze,{streamMode:["values","updates","messages","custom","debug"],streamSubgraphs:!0,streamResumable:!0,context:{chat_config:bt},optimisticValues:ne=>({...ne,context:Ve,messages:[...ne.messages??[],...Ke,q]})}),u(""),f([])},ct=X=>{he.current=he.current-1,E(!1),G.submit(void 0,{checkpoint:X,streamMode:["values"],streamSubgraphs:!0,streamResumable:!0})},Te=!!a||!!D.length,Ue=!D.find(X=>X.type==="ai"||X.type==="tool");return m.jsxs("div",{className:"flex h-screen w-full overflow-hidden",children:[m.jsxs("div",{className:ge("grid w-full grid-cols-[1fr_0fr] transition-all duration-500",n&&"grid-cols-[3fr_2fr]"),children:[m.jsxs("div",{className:ge("relative flex min-w-0 flex-1 flex-col overflow-hidden",!Te&&"grid-rows-[1fr]"),children:[!Te&&m.jsx("div",{className:"absolute top-0 left-0 z-10 flex w-full items-center justify-between gap-3 p-2 pl-4",children:m.jsx("div",{})}),Te&&m.jsx("div",{className:"sticky top-0 z-10 bg-background w-full",children:m.jsx(Dg,{className:"w-full",fixed:!0,children:m.jsxs("div",{className:"flex items-center justify-between w-full",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsx(rp,{title:de(),messageCount:D.length,threadId:a,onTitleUpdate:X=>{console.log(":",X)},onConversationDelete:()=>{ue(null)}})}),m.jsx("div",{className:"flex items-center gap-4",children:m.jsx(nd,{children:m.jsxs(rd,{children:[m.jsx(sd,{asChild:!0,children:m.jsx(fe,{size:"lg",className:"p-4",variant:"ghost",onClick:()=>ue(null),children:m.jsx(pd,{className:"size-5"})})}),m.jsx(id,{side:"left",children:m.jsx("p",{children:"New thread"})})]})})})]})})}),m.jsx(po,{className:"relative flex-1 overflow-hidden",children:m.jsx(wN,{className:ge("absolute inset-0 overflow-y-scroll px-4 [&::-webkit-scrollbar]:w-1.5 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-300 [&::-webkit-scrollbar-track]:bg-transparent",!Te&&"mt-[25vh] flex flex-col items-stretch",Te&&"grid grid-rows-[1fr_auto]"),contentClassName:ge("pt-20 pb-16 mx-auto flex flex-col gap-4 w-full",Te?"max-w-3xl":"max-w-2xl"),content:m.jsxs(m.Fragment,{children:[D.filter(X=>{var q;return!((q=X.id)!=null&&q.startsWith(am))}).map((X,q)=>X.type==="human"?m.jsx(HC,{message:X,isLoading:I},X.id||`${X.type}-${q}`):m.jsx(Au,{message:X,isLoading:I,handleRegenerate:ct},X.id||`${X.type}-${q}`)),Ue&&!!G.interrupt&&m.jsx(Au,{message:void 0,isLoading:I,handleRegenerate:ct},"interrupt-msg"),I&&!w&&m.jsx(VC,{})]}),footer:m.jsxs("div",{className:"sticky bottom-0 flex flex-col items-center gap-8 bg-background/95 backdrop-blur-sm z-20",children:[!Te&&m.jsx("div",{className:"flex items-center gap-3",children:m.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:pN((i==null?void 0:i.first_name)||(i==null?void 0:i.username)||"")})}),m.jsx(bN,{className:"animate-in fade-in-0 zoom-in-95 absolute bottom-full left-1/2 mb-4 -translate-x-1/2 z-30"}),m.jsx("div",{ref:p,className:ge("bg-background relative z-20 mx-auto mb-8 w-full rounded-2xl shadow-xs transition-all",Te?"max-w-3xl":"max-w-2xl",x?"border-primary border-2 border-dotted":"border border-solid"),children:m.jsxs("form",{onSubmit:Ge,className:ge("mx-auto grid grid-rows-[1fr_auto] gap-2",Te?"max-w-3xl":"max-w-2xl"),children:[m.jsx(ZC,{blocks:d,onRemove:_}),m.jsx("textarea",{value:c,onChange:X=>u(X.target.value),onPaste:y,onKeyDown:X=>{if(X.key==="Enter"&&!X.shiftKey&&!X.metaKey&&!X.nativeEvent.isComposing){X.preventDefault();const q=X.target,ae=q==null?void 0:q.closest("form");ae==null||ae.requestSubmit()}},placeholder:"",className:"field-sizing-content resize-none border-none bg-transparent p-3.5 pb-0 shadow-none ring-0 outline-none focus:ring-0 focus:outline-none"}),m.jsxs("div",{className:"flex items-center gap-6 p-2 pt-4 bg-transparent",children:[m.jsx(fd,{htmlFor:"file-input",className:"w-8 h-8 rounded-lg border border flex items-center justify-center hover:bg-muted cursor-pointer",children:m.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M10 4V16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),m.jsx("path",{d:"M4 10L16 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),m.jsx("input",{id:"file-input",type:"file",onChange:h,multiple:!0,accept:Gt.join(","),className:"hidden"}),G.isLoading?m.jsx(fe,{onClick:()=>G.stop(),className:"ml-auto w-8 h-8 bg-primary p-0",children:m.jsx("div",{className:"relative h-4 w-4",children:m.jsx(fg,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 h-2 w-2 fill-current"})})},"stop"):m.jsx(fe,{type:"submit",className:"ml-auto w-8 h-8 bg-primary p-0",disabled:I||!c.trim()&&d.length===0,children:m.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M22 2L11 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),m.jsx("div",{className:"border-t border-[0.1px] border-border bg-transparent px-4 flex items-center justify-between",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs(ud,{children:[m.jsx(dd,{asChild:!0,children:m.jsxs(fe,{variant:"ghost",className:"text-xs justify-between px-0 gap-0",children:[lt(),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),m.jsxs(hd,{className:"w-56 p-0",children:[m.jsx(ji,{children:L?m.jsx(un,{disabled:!0,children:"..."}):S.length===0?m.jsx(un,{disabled:!0,children:""}):S.map(X=>m.jsx(un,{onClick:()=>Ee(X),children:X.display_name||X.name},X.uuid))}),m.jsx(mg,{}),m.jsx(ji,{children:m.jsx(un,{onClick:be,children:""})})]})]}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsxs(fe,{type:"button",variant:"ghost",className:`text-xs justify-between px-0 gap-0 ${D.length>0?"opacity-50 cursor-not-allowed":""}`,onClick:D.length>0?void 0:oe,disabled:D.length>0,children:[j?j.name:"",m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"m6 9 6 6 6-6"})})]})}),!a&&m.jsx("div",{className:"flex items-center space-x-2",children:m.jsxs(fe,{type:"button",variant:"ghost",className:"text-xs justify-between px-0 gap-0",onClick:ie,children:[z?z.title:"",m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"m6 9 6 6 6-6"})})]})})]})})]})})]})})})]}),m.jsx("div",{className:"relative flex flex-col border-l",children:m.jsxs("div",{className:"absolute inset-0 flex min-w-[30vw] flex-col",children:[m.jsxs("div",{className:"grid grid-cols-[1fr_auto] border-b p-4",children:[m.jsx(LC,{className:"truncate overflow-hidden"}),m.jsx("button",{onClick:r,className:"cursor-pointer",children:m.jsx(jt,{className:"size-5"})})]}),m.jsx(IC,{className:"relative flex-grow"})]})})]}),m.jsx(rr,{open:N,onOpenChange:_e,children:m.jsxs(sr,{className:"max-w-4xl max-h-[80vh] p-0",children:[m.jsx(ir,{className:"p-6 pb-0",children:m.jsxs(or,{className:"flex items-center gap-2",children:["",m.jsx("span",{className:"text-muted-foreground cursor-pointer hover:text-primary transition-colors",onClick:wt,title:"",children:""})]})}),m.jsx("div",{className:"px-6 pb-6 h-[60vh] overflow-y-auto",children:m.jsx(JC,{onSelectAgent:Re,selectedAgent:j})})]})}),m.jsx(rr,{open:$,onOpenChange:J,children:m.jsxs(sr,{className:"max-w-4xl max-h-[80vh] p-0",children:[m.jsx(ir,{className:"p-6 pb-0",children:m.jsx(or,{children:""})}),m.jsx("div",{className:"px-6 pb-6 h-[60vh] overflow-y-auto",children:m.jsx(nR,{onSelectPrompt:mt,selectedPrompt:z})})]})}),m.jsx(Ag,{open:T,onOpenChange:je}),m.jsx(fN,{open:W,onOpenChange:ft})]})}function SN(){return m.jsxs(C.Suspense,{fallback:m.jsx("div",{children:"Loading (layout)..."}),children:[m.jsx(Fx,{}),m.jsx(zx,{children:m.jsx(Zx,{children:m.jsx(kC,{children:m.jsx(EN,{})})})})]})}const lI=pg("/_authenticated/chat/")({component:SN});export{lI as Route};
