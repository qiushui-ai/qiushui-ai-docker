import{K as re,r as o,aG as h,u as ce,b as Q,ap as H,j as e,D as R,d as q,e as B,f as O,g as I,B as u,S as oe,I as U,X as de,i as F,a6 as $,bX as Ke,a8 as Pe,az as Le,T as ne,aA as Me,aB as ze,aC as _e,aa as De,ab as G,ac as V,ad as X,ae as J,af as Y,h as Ee,a9 as $e}from"./index-C_oIiI4O.js";import{R as Qe,a as Z,b as le}from"./resizable-DquO0tbJ.js";import{g as Re}from"./agent.service-Do_y0pJ4.js";import{T as ie}from"./textarea-C7_dNQbG.js";import{a as qe}from"./knowledge.service-BnYYzlmK.js";import{a as Be,g as Oe}from"./mcptools.service-BxNWhckW.js";import{T as Ie}from"./tag-selector-DuZ0U792.js";import{S as He}from"./square-pen-DhP0NQU-.js";import{S as We}from"./save-6smFJZBI.js";const Ge=async(a,s)=>{const{data:i}=await H.post(`/agent/update/${a}`,s);return i};function Ve(a){const{data:s,isLoading:i,error:r,refetch:j}=re({queryKey:["agent-detail",a],queryFn:()=>Re(a),enabled:!!a,staleTime:3e5});return o.useEffect(()=>{r&&h({title:"加载失败",description:"获取智能体详情失败，请重试",variant:"destructive"})},[r]),{agent:s,isLoading:i,error:r,refetch:j}}function Xe(a){const s=ce(),i=Q({mutationFn:r=>Ge(a,r),onSuccess:()=>{h({title:"保存成功",description:"智能体信息已更新"}),s.invalidateQueries({queryKey:["agent-detail",a]})},onError:r=>{h({title:"保存失败",description:r.message,variant:"destructive"})}});return{updateAgent:i.mutate,isUpdating:i.isPending}}const Je=async(a,s)=>{const{data:i}=await H.post(`/agent/save-knowledge/${a}`,s);return i},Ye=async(a,s)=>{const{data:i}=await H.post(`/agent/delete-knowledge/${a}/${s}`);return i},Ze=async(a,s)=>{const{data:i}=await H.post(`/agent/save-tool/${a}`,s);return i},Ue=async(a,s)=>{const{data:i}=await H.post(`/agent/delete-tool/${a}/${s}`);return i};function es(a){const s=ce(),i=Q({mutationFn:d=>Je(a,d),onSuccess:()=>{h({title:"添加成功",description:"知识库关联已添加"}),s.invalidateQueries({queryKey:["agent-detail",a]})},onError:()=>{h({title:"添加失败",description:"添加知识库关联失败",variant:"destructive"})}}),r=Q({mutationFn:d=>Ye(a,d),onSuccess:()=>{h({title:"删除成功",description:"知识库关联已删除"}),s.invalidateQueries({queryKey:["agent-detail",a]})},onError:()=>{h({title:"删除失败",description:"删除知识库关联失败",variant:"destructive"})}}),j=Q({mutationFn:d=>Ze(a,d),onSuccess:()=>{h({title:"添加成功",description:"工具关联已添加"}),s.invalidateQueries({queryKey:["agent-detail",a]})},onError:()=>{h({title:"添加失败",description:"添加工具关联失败",variant:"destructive"})}}),c=Q({mutationFn:d=>Ue(a,d),onSuccess:()=>{h({title:"删除成功",description:"工具关联已删除"}),s.invalidateQueries({queryKey:["agent-detail",a]})},onError:()=>{h({title:"删除失败",description:"删除工具关联失败",variant:"destructive"})}});return{addKnowledge:i.mutate,removeKnowledge:r.mutate,addTool:j.mutate,removeTool:c.mutate,addToolAsync:j.mutateAsync,removeToolAsync:c.mutateAsync,isAddingKnowledge:i.isPending,isRemovingKnowledge:r.isPending,isAddingTool:j.isPending,isRemovingTool:c.isPending}}function ss({open:a,onClose:s,onSelect:i,selectedKnowledgeUuids:r,isLoading:j=!1}){const[c,d]=o.useState(""),[m,w]=o.useState(r),{knowledgeBases:N,totalCount:g,isLoading:v,error:b,hasNextPage:A,isFetchingNextPage:M,loadMoreRef:x,fetchNextPage:C,setSearchQuery:z}=qe();o.useEffect(()=>{w(r)},[r]);const S=()=>{d(""),z("")},K=n=>{w(l=>l.includes(n)?l.filter(P=>P!==n):[...l,n])},_=()=>{w(r),d(""),s()},y=n=>m.includes(n);return b?e.jsx(R,{open:a,onOpenChange:_,children:e.jsxs(q,{className:"sm:max-w-2xl",children:[e.jsxs(B,{children:[e.jsx(O,{children:"选择知识库"}),e.jsx(I,{children:"选择要关联的知识库"})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-destructive",children:"加载知识库失败"}),e.jsx(u,{onClick:()=>C(),className:"mt-4",children:"重试"})]})]})}):e.jsx(R,{open:a,onOpenChange:_,children:e.jsxs(q,{className:"sm:max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs(B,{children:[e.jsx(O,{children:"选择知识库"}),e.jsxs(I,{children:["选择要关联的知识库，已选择 ",m.length," 个"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(U,{className:"pl-8 h-10 bg-transparent",placeholder:"搜索知识库名称、描述或标签...",value:c,onChange:n=>{d(n.target.value),z(n.target.value)}}),c&&e.jsx(u,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 p-0 opacity-70 hover:opacity-100",onClick:S,disabled:v,children:e.jsx(de,{className:"h-4 w-4"})})]})}),!v&&e.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:g>0&&(c?e.jsxs(e.Fragment,{children:["找到 ",g,' 个匹配 "',c,'" 的知识库']}):e.jsxs(e.Fragment,{children:["共 ",g," 个知识库"]}))}),v&&N.length===0?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(F,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"加载中..."})]}):N.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:c?`没有找到匹配 "${c}" 的知识库`:"还没有知识库"})}):e.jsx("div",{className:"space-y-0",children:N.map((n,l)=>e.jsxs("div",{children:[e.jsx("div",{className:"p-4 cursor-pointer transition-colors hover:bg-accent hover:text-accent-foreground",onClick:()=>K(n.uuid),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h3",{className:"font-semibold truncate",children:n.name})}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:n.description||"暂无描述"}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:n.tags.length>0&&e.jsxs("span",{children:[n.tags.slice(0,2).join(", "),n.tags.length>2?"...":""]})})]}),e.jsx("div",{className:"ml-4",children:e.jsx(u,{variant:y(n.uuid)?"default":"outline",size:"sm",onClick:P=>{P.stopPropagation(),K(n.uuid);const k=y(n.uuid)?m.filter(D=>D!==n.uuid):[...m,n.uuid];i(k),y(n.uuid)?h({title:"取消添加成功",description:`已从选择中移除知识库"${n.name}"`}):h({title:"添加成功",description:`已添加知识库"${n.name}"`})},disabled:j,children:y(n.uuid)?"已添加":"添加"})})]})}),l<N.length-1&&e.jsx("div",{className:"border-b border-border mx-4"})]},n.uuid))}),e.jsx("div",{ref:x,className:"mt-4 flex justify-center",children:M?e.jsxs("div",{className:"flex items-center gap-2 py-4",children:[e.jsx(F,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"加载更多..."})]}):A?e.jsx("div",{className:"py-4",children:e.jsx(u,{variant:"outline",onClick:()=>C(),className:"text-sm",children:c?"点击加载更多搜索结果":"点击加载更多"})}):N.length>0?e.jsx("div",{className:"py-4 text-center",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:"已到底啦"})}):null})]})]})})}function ts({open:a,onClose:s,onSelect:i,onAddSingle:r,onRemoveSingle:j,selectedToolUuids:c,isLoading:d=!1}){const[m,w]=o.useState(""),[N,g]=o.useState(c),{tools:v,totalCount:b,isLoading:A,error:M,hasNextPage:x,isFetchingNextPage:C,loadMoreRef:z,fetchNextPage:S,setSearchQuery:K}=Be();o.useEffect(()=>{g(c)},[c]);const _=()=>{w(""),K("")},y=()=>{g(c),w(""),s()},n=l=>N.includes(l);return M?e.jsx(R,{open:a,onOpenChange:y,children:e.jsxs(q,{className:"sm:max-w-2xl",children:[e.jsxs(B,{children:[e.jsx(O,{children:"选择工具"}),e.jsx(I,{children:"选择要关联的工具"})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-destructive",children:"加载工具失败"}),e.jsx(u,{onClick:()=>S(),className:"mt-4",children:"重试"})]})]})}):e.jsx(R,{open:a,onOpenChange:y,children:e.jsxs(q,{className:"sm:max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs(B,{children:[e.jsx(O,{children:"选择工具"}),e.jsxs(I,{children:["选择要关联的工具，已选择 ",N.length," 个"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(U,{className:"pl-8 h-10 bg-transparent",placeholder:"搜索工具名称、描述或标签...",value:m,onChange:l=>{w(l.target.value),K(l.target.value)}}),m&&e.jsx(u,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 p-0 opacity-70 hover:opacity-100",onClick:_,disabled:A,children:e.jsx(de,{className:"h-4 w-4"})})]})}),!A&&e.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:b>0&&(m?e.jsxs(e.Fragment,{children:["找到 ",b,' 个匹配 "',m,'" 的工具']}):e.jsxs(e.Fragment,{children:["共 ",b," 个工具"]}))}),A&&v.length===0?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(F,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"加载中..."})]}):v.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:m?`没有找到匹配 "${m}" 的工具`:"还没有工具"})}):e.jsx("div",{className:"space-y-0",children:v.map((l,P)=>e.jsxs("div",{children:[e.jsx("div",{className:"p-4 transition-colors hover:bg-accent hover:text-accent-foreground",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h3",{className:"font-semibold truncate",children:l.name})}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:l.description||"暂无描述"})]}),e.jsx("div",{className:"ml-4",children:e.jsx(u,{variant:n(l.uuid)?"default":"outline",size:"sm",onClick:async k=>{k.stopPropagation();const D=n(l.uuid);try{D?j&&(await j(l.uuid),g(L=>L.filter(T=>T!==l.uuid))):r&&(await r(l.uuid),g(L=>[...L,l.uuid]))}catch{}},disabled:d,children:n(l.uuid)?"已添加":"添加"})})]})}),P<v.length-1&&e.jsx("div",{className:"border-b border-border mx-4"})]},l.uuid))}),e.jsx("div",{ref:z,className:"mt-4 flex justify-center",children:C?e.jsxs("div",{className:"flex items-center gap-2 py-4",children:[e.jsx(F,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"加载更多..."})]}):x?e.jsx("div",{className:"py-4",children:e.jsx(u,{variant:"outline",onClick:()=>S(),className:"text-sm",children:m?"点击加载更多搜索结果":"点击加载更多"})}):v.length>0?e.jsx("div",{className:"py-4 text-center",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:"已到底啦"})}):null})]})]})})}const as=$.object({name:$.string().min(1,{message:"智能体名称是必填项"}).max(200,{message:"名称不能超过200个字符"}),description:$.string().optional(),tags:$.array($.string()).default([])});function us(){var se,te,ae;const{uuid:a}=Ke({from:"/_auth_custom_layout/bots/$uuid"}),{agent:s,isLoading:i,error:r}=Ve(a),{addKnowledge:j,removeKnowledge:c,addTool:d,removeTool:m,addToolAsync:w,removeToolAsync:N,isAddingKnowledge:g,isRemovingKnowledge:v,isAddingTool:b,isRemovingTool:A}=es(a),{updateAgent:M,isUpdating:x}=Xe(a),[C,z]=o.useState({"google-search":!1,"google-news":!0}),[S,K]=o.useState({skills:!0,knowledge:!0}),[_,y]=o.useState(!1),[n,l]=o.useState(!1),[P,k]=o.useState(!1),[D,L]=o.useState(""),T=Pe({resolver:$e(as),defaultValues:{name:"",description:"",tags:[]}}),[me,xe]=o.useState({}),[he,ue]=o.useState(new Set);o.useEffect(()=>{s!=null&&s.prompt_template&&L(s.prompt_template)},[s==null?void 0:s.prompt_template]);const je=t=>{z(f=>({...f,[t]:!f[t]}))},ee=t=>{K(f=>({...f,[t]:!f[t]}))},ge=t=>{j(t)},pe=t=>{d(t),l(!1)},fe=async t=>{try{await w([t])}catch(f){throw f}},ve=async t=>{try{await N(t)}catch(f){throw f}},Ne=t=>{c(t)},ye=t=>{m(t)},we=()=>{a&&M({prompt_template:D})},be=()=>{s&&(T.reset({name:s.name,description:s.description||"",tags:s.tags||[]}),k(!0))},Se=t=>{a&&(M({name:t.name,description:t.description,tags:t.tags}),k(!1))},Ce=((se=s==null?void 0:s.knowledge_list)==null?void 0:se.map(t=>t.uuid))||[],ke=((te=s==null?void 0:s.tool_list)==null?void 0:te.map(t=>t.uuid))||[],p=(((ae=s==null?void 0:s.tool_list)==null?void 0:ae.filter(t=>C[t.uuid]&&!he.has(t.uuid)))||[])[0],{data:E,isLoading:Te}=re({queryKey:["tool-details",p==null?void 0:p.uuid],queryFn:()=>Oe(p.uuid),enabled:!!p,staleTime:5*60*1e3});return o.useEffect(()=>{E!=null&&E.mcp_info&&p&&(xe(t=>({...t,[p.uuid]:E.mcp_info.tools})),ue(t=>new Set(t).add(p.uuid)))},[E,p]),e.jsx(Le,{children:e.jsxs("div",{className:"h-screen w-screen flex flex-col",children:[e.jsx("div",{className:"h-16 flex items-center justify-between px-6 border-b bg-background",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("h1",{className:"text-xl font-semibold",children:a?i?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"加载中..."})]}):r?"加载失败":e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:(s==null?void 0:s.name)||"创建"}),(s==null?void 0:s.name)&&e.jsx("button",{className:"p-1 hover:bg-gray-200 rounded transition-colors",onClick:be,children:e.jsx(He,{className:"w-4 h-4 text-gray-500"})})]}):"Bots"})})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs(Qe,{direction:"horizontal",className:"h-full",children:[e.jsx(Z,{defaultSize:33.33,children:e.jsxs("div",{className:"h-full flex flex-col p-6 border-r bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[e.jsx("h2",{className:"text-lg font-medium",children:"系统提示词"}),e.jsxs(u,{variant:"ghost",onClick:we,disabled:x||!a,children:[x?e.jsx(F,{className:"w-4 h-4 animate-spin"}):e.jsx(We,{className:"w-4 h-4"}),x?"保存中...":"保存"]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(ie,{className:"h-full resize-none border-0 focus:border-0 focus:ring-0 shadow-none outline-none focus:outline-none",placeholder:"系统提示词用于指导AI的行为和风格，例如：你是一个专业的客服助手，请用友善的语气回答用户问题。",value:D,onChange:t=>L(t.target.value)})})]})}),e.jsx(le,{withHandle:!0}),e.jsx(Z,{defaultSize:33.33,children:e.jsxs("div",{className:"h-full flex flex-col p-6 border-r bg-background",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-4 flex-shrink-0",children:e.jsx("h2",{className:"text-lg font-medium",children:"能力"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("button",{onClick:()=>ee("skills"),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${S.skills?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("h3",{className:"text-base font-medium",children:"工具"}),e.jsx(u,{onClick:()=>l(!0),disabled:b,variant:"ghost",children:b?"添加中...":"添加工具"})]})]}),S.skills&&e.jsx(e.Fragment,{children:(s==null?void 0:s.tool_list)&&s.tool_list.length>0&&e.jsx("div",{className:"mb-4 space-y-2",children:s.tool_list.map(t=>{const f=me[t.uuid]||[],Fe=Te&&(p==null?void 0:p.uuid)===t.uuid;return e.jsxs("div",{className:"rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>je(t.uuid),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${C[t.uuid]?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("span",{className:"text-sm",children:t.name})]}),e.jsx("button",{onClick:()=>ye(t.uuid),disabled:A,className:"text-gray-400 hover:text-red-500 disabled:opacity-50",children:e.jsx(ne,{className:"w-4 h-4"})})]}),C[t.uuid]&&e.jsx("div",{className:"bg-gray-50 p-2 ml-6",children:Fe?e.jsxs("div",{className:"flex items-center justify-start py-2",children:[e.jsx(F,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"text-xs text-gray-500 text-left",children:"获取中..."})]}):f.length>0?e.jsx("div",{className:"space-y-2",children:f.map((W,Ae)=>e.jsxs("div",{className:"rounded p-2",children:[e.jsx("div",{className:"font-medium text-sm text-gray-800",children:W.name}),e.jsxs(Me,{children:[e.jsx(ze,{asChild:!0,children:e.jsx("div",{className:"text-xs text-gray-600 line-clamp-1 mt-1 cursor-help",children:W.description})}),e.jsx(_e,{side:"top",className:"max-w-xs",children:e.jsx("p",{className:"text-sm",children:W.description})})]})]},Ae))}):e.jsx("div",{className:"py-2 text-xs text-gray-500",children:"暂无"})})]},t.uuid)})})})]}),e.jsx("div",{className:"my-6 border-t border-gray-200"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("button",{onClick:()=>ee("knowledge"),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${S.knowledge?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("h3",{className:"text-base font-medium",children:"知识库"}),e.jsx(u,{onClick:()=>y(!0),disabled:g,variant:"ghost",children:g?"添加中...":"添加知识库"})]})]}),S.knowledge&&e.jsx(e.Fragment,{children:(s==null?void 0:s.knowledge_list)&&s.knowledge_list.length>0&&e.jsx("div",{className:"space-y-2",children:s.knowledge_list.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded flex items-center justify-center",children:e.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),e.jsx("span",{className:"text-sm",children:t.name})]}),e.jsx("button",{onClick:()=>Ne(t.uuid),disabled:v,className:"text-gray-400 hover:text-red-500 disabled:opacity-50",children:e.jsx(ne,{className:"w-4 h-4"})})]},t.uuid))})})]})]})]})}),e.jsx(le,{withHandle:!0}),e.jsx(Z,{defaultSize:33.33,children:e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsx("div",{className:"flex items-center space-x-2 p-6 flex-shrink-0",children:e.jsx("h2",{className:"text-lg font-medium",children:"调试"})}),e.jsx("div",{className:"flex-1 overflow-hidden flex items-center justify-center",children:e.jsx("div",{className:"text-center text-muted-foreground",children:e.jsx("p",{children:"调试功能开发中..."})})})]})})]})}),e.jsx(ss,{open:_,onClose:()=>y(!1),onSelect:ge,selectedKnowledgeUuids:Ce,isLoading:g}),e.jsx(ts,{open:n,onClose:()=>l(!1),onSelect:pe,onAddSingle:fe,onRemoveSingle:ve,selectedToolUuids:ke,isLoading:b}),e.jsx(R,{open:P,onOpenChange:k,children:e.jsxs(q,{className:"sm:max-w-md",children:[e.jsxs(B,{className:"text-left",children:[e.jsx(O,{children:"编辑智能体"}),e.jsx(I,{children:"修改智能体信息，填写必要信息后点击保存。"})]}),e.jsx(De,{...T,children:e.jsx("form",{onSubmit:T.handleSubmit(Se),className:"space-y-4",children:x?e.jsxs("div",{className:"flex justify-center items-center h-32",children:[e.jsx(F,{className:"animate-spin"}),e.jsx("span",{className:"ml-2",children:"保存中..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{control:T.control,name:"name",render:({field:t})=>e.jsxs(V,{children:[e.jsx(X,{children:"智能体名称 *"}),e.jsx(J,{children:e.jsx(U,{placeholder:"请输入智能体名称",...t,disabled:x})}),e.jsx(Y,{})]})}),e.jsx(G,{control:T.control,name:"description",render:({field:t})=>e.jsxs(V,{children:[e.jsx(X,{children:"描述"}),e.jsx(J,{children:e.jsx(ie,{placeholder:"请输入智能体描述",className:"resize-none",rows:2,...t,disabled:x})}),e.jsx(Y,{})]})}),e.jsx(G,{control:T.control,name:"tags",render:({field:t})=>e.jsxs(V,{children:[e.jsx(X,{children:"标签"}),e.jsx(J,{children:e.jsx(Ie,{value:t.value,onChange:t.onChange,flag:"agent",placeholder:"选择标签",disabled:x})}),e.jsx(Y,{})]})}),e.jsxs(Ee,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>k(!1),disabled:x,children:"取消"}),e.jsx(u,{type:"submit",disabled:x,children:x?"保存中...":"保存"})]})]})})})]})})]})})}export{us as B};
