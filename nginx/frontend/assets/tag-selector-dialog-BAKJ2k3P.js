import{c as un,r as g,aF as pr,j as d,ay as ln,a6 as ce,a8 as cn,ap as me,aH as Q,D as dn,d as fn,e as hn,f as gn,g as pn,i as vn,B as X,P as vr,aa as mn,ab as ye,ac as be,ad as Se,ae as Oe,I as It,af as Ie,T as yn,E as bn,X as Sn,h as On,bl as In,a9 as Dn}from"./index-CTPVv2qI.js";import{T as wn}from"./textarea-sXwijNo4.js";import{C as Tn}from"./checkbox-B8lOC6Cy.js";import{S as Cn,a as En,b as xn,c as _n,d as Nn}from"./select-BxdJP45j.js";import{s as Pn}from"./index-pO__9giw.js";import{b as kn,_ as Rn,a as Dt}from"./setPrototypeOf-BNw_nwy-.js";import{S as jn}from"./save-CysiHy1C.js";import{S as An}from"./square-pen-DRmb1xVr.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=un("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),mr=g.createContext(null);function H(){const t=g.useContext(mr);if(t===null)throw new Error("No Tree Api Provided");return t}const yr=g.createContext(null);function $n(){const t=g.useContext(yr);if(t===null)throw new Error("Provide a NodesContext");return t}const br=g.createContext(null);function Ln(){const t=g.useContext(br);if(t===null)throw new Error("Provide a DnDContext");return t}const Sr=g.createContext(0);function Or(){g.useContext(Sr)}function Ee(t,e,r){return Math.max(Math.min(t,r),e)}function Ir(t){return t&&t.isLeaf}function Dr(t){return t&&t.isInternal&&!t.isOpen}function wr(t){var e;return t&&t.isOpen&&!(!((e=t.children)===null||e===void 0)&&e.length)}const Tr=(t,e)=>{let r=t;for(;r;){if(r.id===e.id)return!0;r=r.parent}return!1},Cr=t=>{if(!t.parent)throw Error("Node does not have a parent");return t.parent.children.findIndex(e=>e.id===t.id)};function Fn(){}function ht(t,e){if(!t)return null;if(t.id===e)return t;if(t.children)for(let r of t.children){const n=ht(r,e);if(n)return n}return null}function Re(t,e){if(e(t),t.children)for(let r of t.children)Re(r,e)}function Er(t){const e=_r(t);let r;for(let n=0;n<e.length;++n)if(e[n]===t){r=Hn(e,n);break}r==null||r.focus()}function xr(t){const e=_r(t);let r;for(let n=0;n<e.length;++n)if(e[n]===t){r=Un(e,n);break}r==null||r.focus()}function Hn(t,e){return e+1<t.length?t[e+1]:t[0]}function Un(t,e){return e-1>=0?t[e-1]:t[t.length-1]}function _r(t){return Array.from(document.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)')).filter(e=>e===t||!t.contains(e))}function he(t,e){return typeof e=="boolean"?e:typeof e=="string"?t[e]:e(t)}function Nr(t){return t===null?null:J(t)}function J(t){return typeof t=="string"?t:t.id}function zn(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}function Pr(t,...e){if(t)return t(...e)}function kr(t){return new Promise((e,r)=>{let n=0;function i(){n+=1,n===100&&r(),t()?e():setTimeout(i,10)}i()})}function Rr(t){var e,r;const n=t.focusedNode;return n?n.isOpen?0:n.parent?n.childIndex+1:0:(r=(e=t.root.children)===null||e===void 0?void 0:e.length)!==null&&r!==void 0?r:0}function jr(t){const e=t.focusedNode;return e?e.isOpen?e.id:e.parent&&!e.parent.isRoot?e.parent.id:null:null}const Bn=Object.freeze(Object.defineProperty({__proto__:null,access:he,bound:Ee,dfs:ht,focusNextElement:Er,focusPrevElement:xr,getInsertIndex:Rr,getInsertParentId:jr,identify:J,identifyNull:Nr,indexOf:Cr,isClosed:Dr,isDescendant:Tr,isItem:Ir,isOpenWithEmptyChildren:wr,mergeRefs:zn,noop:Fn,safeRun:Pr,waitFor:kr,walk:Re},Symbol.toStringTag,{value:"Module"})),Wn={display:"flex",alignItems:"center",zIndex:1},Vn={flex:1,height:"2px",background:"#4B91E2",borderRadius:"1px"},qn={width:"4px",height:"4px",boxShadow:"0 0 0 3px #4B91E2",borderRadius:"50%"},Kn=pr.memo(function({top:e,left:r,indent:n}){const i={position:"absolute",pointerEvents:"none",top:e-2+"px",left:r+"px",right:n+"px"};return d.jsxs("div",{style:Object.assign(Object.assign({},Wn),i),children:[d.jsx("div",{style:Object.assign({},qn)}),d.jsx("div",{style:Object.assign({},Vn)})]})});function Gn({node:t,attrs:e,innerRef:r,children:n}){return d.jsx("div",Object.assign({},e,{ref:r,onFocus:i=>i.stopPropagation(),onClick:t.handleClick,children:n}))}function Yn(t){return d.jsxs("div",{ref:t.dragHandle,style:t.style,children:[d.jsx("span",{onClick:e=>{e.stopPropagation(),t.node.toggle()},children:t.node.isLeaf?"ðŸŒ³":t.node.isOpen?"ðŸ—":"ðŸ—€"})," ",t.node.isEditing?d.jsx(Qn,Object.assign({},t)):d.jsx(Xn,Object.assign({},t))]})}function Xn(t){return d.jsx(d.Fragment,{children:d.jsx("span",{children:t.node.data.name})})}function Qn({node:t}){const e=g.useRef();return g.useEffect(()=>{var r,n;(r=e.current)===null||r===void 0||r.focus(),(n=e.current)===null||n===void 0||n.select()},[]),d.jsx("input",{ref:e,defaultValue:t.data.name,onBlur:()=>t.reset(),onKeyDown:r=>{var n;r.key==="Escape"&&t.reset(),r.key==="Enter"&&t.submit(((n=e.current)===null||n===void 0?void 0:n.value)||"")}})}function Ve(t){return{type:"EDIT",id:t}}function Jn(t={id:null},e){return e.type==="EDIT"?Object.assign(Object.assign({},t),{id:e.id}):t}function ne(t){return{type:"FOCUS",id:t}}function Zn(){return{type:"TREE_BLUR"}}function ei(t={id:null,treeFocused:!1},e){return e.type==="FOCUS"?Object.assign(Object.assign({},t),{id:e.id,treeFocused:!0}):e.type==="TREE_BLUR"?Object.assign(Object.assign({},t),{treeFocused:!1}):t}class je{constructor(e){this.handleClick=r=>{r.metaKey&&!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():r.shiftKey&&!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=e.tree,this.id=e.id,this.data=e.data,this.level=e.level,this.children=e.children,this.parent=e.parent,this.isDraggable=e.isDraggable,this.rowIndex=e.rowIndex}get isRoot(){return this.id===pe}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return this.isLeaf?!1:this.tree.isOpen(this.id)}get isClosed(){return this.isLeaf?!1:!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&&this.tree.hasOneSelection}get isSelectedStart(){var e;return this.isSelected&&!(!((e=this.prev)===null||e===void 0)&&e.isSelected)}get isSelectedEnd(){var e;return this.isSelected&&!(!((e=this.next)===null||e===void 0)&&e.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&&this.parent.children?this.parent.children.findIndex(e=>e.id===this.id):-1}get next(){return this.rowIndex===null?null:this.tree.at(this.rowIndex+1)}get prev(){return this.rowIndex===null?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var e,r;const n=this.childIndex;return(r=(e=this.parent)===null||e===void 0?void 0:e.children[n+1])!==null&&r!==void 0?r:null}isAncestorOf(e){if(!e)return!1;let r=e;for(;r;){if(r.id===this.id)return!0;r=r.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(e){this.tree.submit(this,e)}reset(){this.tree.reset()}clone(){return new je(Object.assign({},this))}edit(){return this.tree.edit(this)}}const pe="__REACT_ARBORIST_INTERNAL_ROOT__";function wt(t){var e;function r(o,s,u){const a=t.accessId(o),l=new je({tree:t,data:o,level:s,parent:u,id:a,children:null,isDraggable:t.isDraggable(o),rowIndex:null}),f=t.accessChildren(o);return f&&(l.children=f.map(y=>r(y,s+1,l))),l}const n=new je({tree:t,id:pe,data:{id:pe},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null}),i=(e=t.props.data)!==null&&e!==void 0?e:[];return n.children=i.map(o=>r(o,0,n)),n}const st={open(t,e){return{type:"VISIBILITY_OPEN",id:t,filtered:e}},close(t,e){return{type:"VISIBILITY_CLOSE",id:t,filtered:e}},toggle(t,e){return{type:"VISIBILITY_TOGGLE",id:t,filtered:e}},clear(t){return{type:"VISIBILITY_CLEAR",filtered:t}}};function Tt(t={},e){if(e.type==="VISIBILITY_OPEN")return Object.assign(Object.assign({},t),{[e.id]:!0});if(e.type==="VISIBILITY_CLOSE")return Object.assign(Object.assign({},t),{[e.id]:!1});if(e.type==="VISIBILITY_TOGGLE"){const r=t[e.id];return Object.assign(Object.assign({},t),{[e.id]:!r})}else return e.type==="VISIBILITY_CLEAR"?{}:t}function ti(t={filtered:{},unfiltered:{}},e){return e.type.startsWith("VISIBILITY")?e.filtered?Object.assign(Object.assign({},t),{filtered:Tt(t.filtered,e)}):Object.assign(Object.assign({},t),{unfiltered:Tt(t.unfiltered,e)}):t}const ue=t=>{var e;return{nodes:{open:{filtered:{},unfiltered:(e=t==null?void 0:t.initialOpenState)!==null&&e!==void 0?e:{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:"none"},dragId:null,dragIds:[],parentId:null,index:-1}}},W={clear:()=>({type:"SELECTION_CLEAR"}),only:t=>({type:"SELECTION_ONLY",id:J(t)}),add:t=>({type:"SELECTION_ADD",ids:(Array.isArray(t)?t:[t]).map(J)}),remove:t=>({type:"SELECTION_REMOVE",ids:(Array.isArray(t)?t:[t]).map(J)}),set:t=>Object.assign({type:"SELECTION_SET"},t),mostRecent:t=>({type:"SELECTION_MOST_RECENT",id:t===null?null:J(t)}),anchor:t=>({type:"SELECTION_ANCHOR",id:t===null?null:J(t)})};function ri(t=ue().nodes.selection,e){const r=t.ids;switch(e.type){case"SELECTION_CLEAR":return Object.assign(Object.assign({},t),{ids:new Set});case"SELECTION_ONLY":return Object.assign(Object.assign({},t),{ids:new Set([e.id])});case"SELECTION_ADD":return e.ids.length===0?t:(e.ids.forEach(n=>r.add(n)),Object.assign(Object.assign({},t),{ids:new Set(r)}));case"SELECTION_REMOVE":return e.ids.length===0?t:(e.ids.forEach(n=>r.delete(n)),Object.assign(Object.assign({},t),{ids:new Set(r)}));case"SELECTION_SET":return Object.assign(Object.assign({},t),{ids:e.ids,mostRecent:e.mostRecent,anchor:e.anchor});case"SELECTION_MOST_RECENT":return Object.assign(Object.assign({},t),{mostRecent:e.id});case"SELECTION_ANCHOR":return Object.assign(Object.assign({},t),{anchor:e.id});default:return t}}const le={cursor(t){return{type:"DND_CURSOR",cursor:t}},dragStart(t,e){return{type:"DND_DRAG_START",id:t,dragIds:e}},dragEnd(){return{type:"DND_DRAG_END"}},hovering(t,e){return{type:"DND_HOVERING",parentId:t,index:e}}};function ni(t=ue().dnd,e){switch(e.type){case"DND_CURSOR":return Object.assign(Object.assign({},t),{cursor:e.cursor});case"DND_DRAG_START":return Object.assign(Object.assign({},t),{dragId:e.id,dragIds:e.dragIds});case"DND_DRAG_END":return ue().dnd;case"DND_HOVERING":return Object.assign(Object.assign({},t),{parentId:e.parentId,index:e.index});default:return t}}const ii={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},oi=t=>{if(!t)return{display:"none"};const{x:e,y:r}=t;return{transform:`translate(${e}px, ${r}px)`}},si=t=>{if(!t)return{display:"none"};const{x:e,y:r}=t;return{transform:`translate(${e+10}px, ${r+10}px)`}};function Ar({offset:t,mouse:e,id:r,dragIds:n,isDragging:i}){return d.jsxs(ai,{isDragging:i,children:[d.jsx(ui,{offset:t,children:d.jsx(ci,{id:r,dragIds:n})}),d.jsx(li,{mouse:e,count:n.length})]})}const ai=g.memo(function(e){return e.isDragging?d.jsx("div",{style:ii,children:e.children}):null});function ui(t){return d.jsx("div",{className:"row preview",style:oi(t.offset),children:t.children})}function li(t){const{count:e,mouse:r}=t;return e>1?d.jsx("div",{className:"selected-count",style:si(r),children:e}):null}const ci=g.memo(function(e){const r=H(),n=r.get(e.id);return n?d.jsx(r.renderNode,{preview:!0,node:n,style:{paddingLeft:n.level*r.indent,opacity:.2,background:"transparent"},tree:r}):null});function di(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,kn(t,e)}var Ct=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function fi(t,e){return!!(t===e||Ct(t)&&Ct(e))}function hi(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!fi(t[r],e[r]))return!1;return!0}function qe(t,e){e===void 0&&(e=hi);var r,n=[],i,o=!1;function s(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return o&&r===this&&e(u,n)||(i=t.apply(this,u),o=!0,r=this,n=u),i}return s}var gi=typeof performance=="object"&&typeof performance.now=="function",Et=gi?function(){return performance.now()}:function(){return Date.now()};function xt(t){cancelAnimationFrame(t.id)}function pi(t,e){var r=Et();function n(){Et()-r>=e?t.call(null):i.id=requestAnimationFrame(n)}var i={id:requestAnimationFrame(n)};return i}var Ke=-1;function _t(t){if(t===void 0&&(t=!1),Ke===-1||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(e),Ke=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Ke}var ie=null;function Nt(t){if(t===void 0&&(t=!1),ie===null||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?ie="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?ie="negative":ie="positive-ascending"),document.body.removeChild(e),ie}return ie}var vi=150,mi=function(e,r){return e};function yi(t){var e,r=t.getItemOffset,n=t.getEstimatedTotalSize,i=t.getItemSize,o=t.getOffsetForIndexAndAlignment,s=t.getStartIndexForOffset,u=t.getStopIndexForStartIndex,a=t.initInstanceProps,l=t.shouldResetStyleCacheOnItemSizeChange,f=t.validateProps;return e=function(y){di(O,y);function O(I){var c;return c=y.call(this,I)||this,c._instanceProps=a(c.props,Dt(c)),c._outerRef=void 0,c._resetIsScrollingTimeoutId=null,c.state={instance:Dt(c),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof c.props.initialScrollOffset=="number"?c.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},c._callOnItemsRendered=void 0,c._callOnItemsRendered=qe(function(h,m,p,b){return c.props.onItemsRendered({overscanStartIndex:h,overscanStopIndex:m,visibleStartIndex:p,visibleStopIndex:b})}),c._callOnScroll=void 0,c._callOnScroll=qe(function(h,m,p){return c.props.onScroll({scrollDirection:h,scrollOffset:m,scrollUpdateWasRequested:p})}),c._getItemStyle=void 0,c._getItemStyle=function(h){var m=c.props,p=m.direction,b=m.itemSize,C=m.layout,T=c._getItemStyleCache(l&&b,l&&C,l&&p),_;if(T.hasOwnProperty(h))_=T[h];else{var P=r(c.props,h,c._instanceProps),M=i(c.props,h,c._instanceProps),F=p==="horizontal"||C==="horizontal",te=p==="rtl",re=F?P:0;T[h]=_={position:"absolute",left:te?void 0:re,right:te?re:void 0,top:F?0:P,height:F?"100%":M,width:F?M:"100%"}}return _},c._getItemStyleCache=void 0,c._getItemStyleCache=qe(function(h,m,p){return{}}),c._onScrollHorizontal=function(h){var m=h.currentTarget,p=m.clientWidth,b=m.scrollLeft,C=m.scrollWidth;c.setState(function(T){if(T.scrollOffset===b)return null;var _=c.props.direction,P=b;if(_==="rtl")switch(Nt()){case"negative":P=-b;break;case"positive-descending":P=C-p-b;break}return P=Math.max(0,Math.min(P,C-p)),{isScrolling:!0,scrollDirection:T.scrollOffset<P?"forward":"backward",scrollOffset:P,scrollUpdateWasRequested:!1}},c._resetIsScrollingDebounced)},c._onScrollVertical=function(h){var m=h.currentTarget,p=m.clientHeight,b=m.scrollHeight,C=m.scrollTop;c.setState(function(T){if(T.scrollOffset===C)return null;var _=Math.max(0,Math.min(C,b-p));return{isScrolling:!0,scrollDirection:T.scrollOffset<_?"forward":"backward",scrollOffset:_,scrollUpdateWasRequested:!1}},c._resetIsScrollingDebounced)},c._outerRefSetter=function(h){var m=c.props.outerRef;c._outerRef=h,typeof m=="function"?m(h):m!=null&&typeof m=="object"&&m.hasOwnProperty("current")&&(m.current=h)},c._resetIsScrollingDebounced=function(){c._resetIsScrollingTimeoutId!==null&&xt(c._resetIsScrollingTimeoutId),c._resetIsScrollingTimeoutId=pi(c._resetIsScrolling,vi)},c._resetIsScrolling=function(){c._resetIsScrollingTimeoutId=null,c.setState({isScrolling:!1},function(){c._getItemStyleCache(-1,null)})},c}O.getDerivedStateFromProps=function(c,h){return bi(c,h),f(c),null};var S=O.prototype;return S.scrollTo=function(c){c=Math.max(0,c),this.setState(function(h){return h.scrollOffset===c?null:{scrollDirection:h.scrollOffset<c?"forward":"backward",scrollOffset:c,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},S.scrollToItem=function(c,h){h===void 0&&(h="auto");var m=this.props,p=m.itemCount,b=m.layout,C=this.state.scrollOffset;c=Math.max(0,Math.min(c,p-1));var T=0;if(this._outerRef){var _=this._outerRef;b==="vertical"?T=_.scrollWidth>_.clientWidth?_t():0:T=_.scrollHeight>_.clientHeight?_t():0}this.scrollTo(o(this.props,c,h,C,this._instanceProps,T))},S.componentDidMount=function(){var c=this.props,h=c.direction,m=c.initialScrollOffset,p=c.layout;if(typeof m=="number"&&this._outerRef!=null){var b=this._outerRef;h==="horizontal"||p==="horizontal"?b.scrollLeft=m:b.scrollTop=m}this._callPropsCallbacks()},S.componentDidUpdate=function(){var c=this.props,h=c.direction,m=c.layout,p=this.state,b=p.scrollOffset,C=p.scrollUpdateWasRequested;if(C&&this._outerRef!=null){var T=this._outerRef;if(h==="horizontal"||m==="horizontal")if(h==="rtl")switch(Nt()){case"negative":T.scrollLeft=-b;break;case"positive-ascending":T.scrollLeft=b;break;default:var _=T.clientWidth,P=T.scrollWidth;T.scrollLeft=P-_-b;break}else T.scrollLeft=b;else T.scrollTop=b}this._callPropsCallbacks()},S.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&xt(this._resetIsScrollingTimeoutId)},S.render=function(){var c=this.props,h=c.children,m=c.className,p=c.direction,b=c.height,C=c.innerRef,T=c.innerElementType,_=c.innerTagName,P=c.itemCount,M=c.itemData,F=c.itemKey,te=F===void 0?mi:F,re=c.layout,ze=c.outerElementType,ve=c.outerTagName,Be=c.style,We=c.useIsScrolling,v=c.width,D=this.state.isScrolling,E=p==="horizontal"||re==="horizontal",k=E?this._onScrollHorizontal:this._onScrollVertical,N=this._getRangeToRender(),R=N[0],j=N[1],q=[];if(P>0)for(var Y=R;Y<=j;Y++)q.push(g.createElement(h,{data:M,key:te(Y,M),index:Y,isScrolling:We?D:void 0,style:this._getItemStyle(Y)}));var Ot=n(this.props,this._instanceProps);return g.createElement(ze||ve||"div",{className:m,onScroll:k,ref:this._outerRefSetter,style:Rn({position:"relative",height:b,width:v,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:p},Be)},g.createElement(T||_||"div",{children:q,ref:C,style:{height:E?"100%":Ot,pointerEvents:D?"none":void 0,width:E?Ot:"100%"}}))},S._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var c=this.props.itemCount;if(c>0){var h=this._getRangeToRender(),m=h[0],p=h[1],b=h[2],C=h[3];this._callOnItemsRendered(m,p,b,C)}}if(typeof this.props.onScroll=="function"){var T=this.state,_=T.scrollDirection,P=T.scrollOffset,M=T.scrollUpdateWasRequested;this._callOnScroll(_,P,M)}},S._getRangeToRender=function(){var c=this.props,h=c.itemCount,m=c.overscanCount,p=this.state,b=p.isScrolling,C=p.scrollDirection,T=p.scrollOffset;if(h===0)return[0,0,0,0];var _=s(this.props,T,this._instanceProps),P=u(this.props,_,T,this._instanceProps),M=!b||C==="backward"?Math.max(1,m):1,F=!b||C==="forward"?Math.max(1,m):1;return[Math.max(0,_-M),Math.max(0,Math.min(h-1,P+F)),_,P]},O}(g.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var bi=function(e,r){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,r.instance},Si=yi({getItemOffset:function(e,r){var n=e.itemSize;return r*n},getItemSize:function(e,r){var n=e.itemSize;return n},getEstimatedTotalSize:function(e){var r=e.itemCount,n=e.itemSize;return n*r},getOffsetForIndexAndAlignment:function(e,r,n,i,o,s){var u=e.direction,a=e.height,l=e.itemCount,f=e.itemSize,y=e.layout,O=e.width,S=u==="horizontal"||y==="horizontal",I=S?O:a,c=Math.max(0,l*f-I),h=Math.min(c,r*f),m=Math.max(0,r*f-I+f+s);switch(n==="smart"&&(i>=m-I&&i<=h+I?n="auto":n="center"),n){case"start":return h;case"end":return m;case"center":{var p=Math.round(m+(h-m)/2);return p<Math.ceil(I/2)?0:p>c+Math.floor(I/2)?c:p}case"auto":default:return i>=m&&i<=h?i:i<m?m:h}},getStartIndexForOffset:function(e,r){var n=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/i)))},getStopIndexForStartIndex:function(e,r,n){var i=e.direction,o=e.height,s=e.itemCount,u=e.itemSize,a=e.layout,l=e.width,f=i==="horizontal"||a==="horizontal",y=r*u,O=f?l:o,S=Math.ceil((O+n-y)/u);return Math.max(0,Math.min(s-1,r+S-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function Oi(){var t,e;const r=H(),i=Ln().cursor;if(!i||i.type!=="line")return null;const o=r.indent,s=r.rowHeight*i.index+((e=(t=r.props.padding)!==null&&t!==void 0?t:r.props.paddingTop)!==null&&e!==void 0?e:0),u=o*i.level,a=r.renderCursor;return d.jsx(a,{top:s,left:u,indent:o})}var Ii=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const Di=g.forwardRef(function(e,r){const{children:n}=e,i=Ii(e,["children"]),o=H();return d.jsxs("div",Object.assign({ref:r},i,{onClick:s=>{s.currentTarget===s.target&&o.deselectAll()},children:[d.jsx(wi,{}),n]}))}),wi=()=>{const t=H();return d.jsx("div",{style:{height:t.visibleNodes.length*t.rowHeight,width:"100%",position:"absolute",left:"0",right:"0"},children:d.jsx(Oi,{})})};var Ti=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const Ci=g.forwardRef(function(e,r){var n,i,o,s,{style:u}=e,a=Ti(e,["style"]);const l=H(),f=(i=(n=l.props.padding)!==null&&n!==void 0?n:l.props.paddingTop)!==null&&i!==void 0?i:0,y=(s=(o=l.props.padding)!==null&&o!==void 0?o:l.props.paddingBottom)!==null&&s!==void 0?s:0;return d.jsx("div",Object.assign({ref:r,style:Object.assign(Object.assign({},u),{height:`${parseFloat(u.height)+f+y}px`})},a))});var Mr=g.createContext({dragDropManager:void 0}),B;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(B||(B={}));function w(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(!t){var o;if(e===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;o=new Error(e.replace(/%s/g,function(){return n[s++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}}var gt="dnd-core/INIT_COORDS",$e="dnd-core/BEGIN_DRAG",pt="dnd-core/PUBLISH_DRAG_SOURCE",Le="dnd-core/HOVER",Fe="dnd-core/DROP",He="dnd-core/END_DRAG";function Pt(t,e){return{type:gt,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}function xe(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xe=function(r){return typeof r}:xe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xe(t)}function Ei(t,e,r){return e.split(".").reduce(function(n,i){return n&&n[i]?n[i]:r||null},t)}function xi(t,e){return t.filter(function(r){return r!==e})}function $r(t){return xe(t)==="object"}function _i(t,e){var r=new Map,n=function(s){r.set(s,r.has(s)?r.get(s)+1:1)};t.forEach(n),e.forEach(n);var i=[];return r.forEach(function(o,s){o===1&&i.push(s)}),i}function Ni(t,e){return t.filter(function(r){return e.indexOf(r)>-1})}var Pi={type:gt,payload:{clientOffset:null,sourceClientOffset:null}};function ki(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},i=n.publishSource,o=i===void 0?!0:i,s=n.clientOffset,u=n.getSourceClientOffset,a=t.getMonitor(),l=t.getRegistry();t.dispatch(Pt(s)),Ri(r,a,l);var f=Mi(r,a);if(f===null){t.dispatch(Pi);return}var y=null;if(s){if(!u)throw new Error("getSourceClientOffset must be defined");ji(u),y=u(f)}t.dispatch(Pt(s,y));var O=l.getSource(f),S=O.beginDrag(a,f);if(S!=null){Ai(S),l.pinSource(f);var I=l.getSourceType(f);return{type:$e,payload:{itemType:I,item:S,sourceId:f,clientOffset:s||null,sourceClientOffset:y||null,isSourcePublic:!!o}}}}}function Ri(t,e,r){w(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){w(r.getSource(n),"Expected sourceIds to be registered.")})}function ji(t){w(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ai(t){w($r(t),"Item must be an object.")}function Mi(t,e){for(var r=null,n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function $i(t){return function(){var r=t.getMonitor();if(r.isDragging())return{type:pt}}}function at(t,e){return e===null?t===null:Array.isArray(t)?t.some(function(r){return r===e}):t===e}function Li(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.clientOffset;Fi(r);var o=r.slice(0),s=t.getMonitor(),u=t.getRegistry();Hi(o,s,u);var a=s.getItemType();return Ui(o,u,a),zi(o,s,u),{type:Le,payload:{targetIds:o,clientOffset:i||null}}}}function Fi(t){w(Array.isArray(t),"Expected targetIds to be an array.")}function Hi(t,e,r){w(e.isDragging(),"Cannot call hover while not dragging."),w(!e.didDrop(),"Cannot call hover after drop.");for(var n=0;n<t.length;n++){var i=t[n];w(t.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");var o=r.getTarget(i);w(o,"Expected targetIds to be registered.")}}function Ui(t,e,r){for(var n=t.length-1;n>=0;n--){var i=t[n],o=e.getTargetType(i);at(o,r)||t.splice(n,1)}}function zi(t,e,r){t.forEach(function(n){var i=r.getTarget(n);i.hover(e,n)})}function kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kt(Object(r),!0).forEach(function(n){Bi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wi(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.getMonitor(),i=t.getRegistry();Vi(n);var o=Gi(n);o.forEach(function(s,u){var a=qi(s,u,i,n),l={type:Fe,payload:{dropResult:Rt(Rt({},r),a)}};t.dispatch(l)})}}function Vi(t){w(t.isDragging(),"Cannot call drop while not dragging."),w(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function qi(t,e,r,n){var i=r.getTarget(t),o=i?i.drop(n,t):void 0;return Ki(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function Ki(t){w(typeof t>"u"||$r(t),"Drop result must either be an object or undefined.")}function Gi(t){var e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Yi(t){return function(){var r=t.getMonitor(),n=t.getRegistry();Xi(r);var i=r.getSourceId();if(i!=null){var o=n.getSource(i,!0);o.endDrag(r,i),n.unpinSource()}return{type:He}}}function Xi(t){w(t.isDragging(),"Cannot call endDrag while not dragging.")}function Qi(t){return{beginDrag:ki(t),publishDragSource:$i(t),hover:Li(t),drop:Wi(t),endDrag:Yi(t)}}function Ji(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eo(t,e,r){return e&&Zi(t.prototype,e),t}function de(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var to=function(){function t(e,r){var n=this;Ji(this,t),de(this,"store",void 0),de(this,"monitor",void 0),de(this,"backend",void 0),de(this,"isSetUp",!1),de(this,"handleRefCountChange",function(){var i=n.store.getState().refCount>0;n.backend&&(i&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!i&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}return eo(t,[{key:"receiveBackend",value:function(r){this.backend=r}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var r=this,n=this.store.dispatch;function i(s){return function(){for(var u=arguments.length,a=new Array(u),l=0;l<u;l++)a[l]=arguments[l];var f=s.apply(r,a);typeof f<"u"&&n(f)}}var o=Qi(this);return Object.keys(o).reduce(function(s,u){var a=o[u];return s[u]=i(a),s},{})}},{key:"dispatch",value:function(r){this.store.dispatch(r)}}]),t}();function U(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var jt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ge=function(){return Math.random().toString(36).substring(7).split("").join(".")},At={INIT:"@@redux/INIT"+Ge(),REPLACE:"@@redux/REPLACE"+Ge(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ge()}};function ro(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Lr(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(U(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(U(1));return r(Lr)(t,e)}if(typeof t!="function")throw new Error(U(2));var i=t,o=e,s=[],u=s,a=!1;function l(){u===s&&(u=s.slice())}function f(){if(a)throw new Error(U(3));return o}function y(c){if(typeof c!="function")throw new Error(U(4));if(a)throw new Error(U(5));var h=!0;return l(),u.push(c),function(){if(h){if(a)throw new Error(U(6));h=!1,l();var p=u.indexOf(c);u.splice(p,1),s=null}}}function O(c){if(!ro(c))throw new Error(U(7));if(typeof c.type>"u")throw new Error(U(8));if(a)throw new Error(U(9));try{a=!0,o=i(o,c)}finally{a=!1}for(var h=s=u,m=0;m<h.length;m++){var p=h[m];p()}return c}function S(c){if(typeof c!="function")throw new Error(U(10));i=c,O({type:At.REPLACE})}function I(){var c,h=y;return c={subscribe:function(p){if(typeof p!="object"||p===null)throw new Error(U(11));function b(){p.next&&p.next(f())}b();var C=h(b);return{unsubscribe:C}}},c[jt]=function(){return this},c}return O({type:At.INIT}),n={dispatch:O,subscribe:y,getState:f,replaceReducer:S},n[jt]=I,n}var no=function(e,r){return e===r};function io(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function oo(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:no;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function Mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mt(Object(r),!0).forEach(function(n){so(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function so(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Lt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ao(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lt,e=arguments.length>1?arguments[1]:void 0,r=e.payload;switch(e.type){case gt:case $e:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Le:return io(t.clientOffset,r.clientOffset)?t:$t($t({},t),{},{clientOffset:r.clientOffset});case He:case Fe:return Lt;default:return t}}var vt="dnd-core/ADD_SOURCE",mt="dnd-core/ADD_TARGET",yt="dnd-core/REMOVE_SOURCE",Ue="dnd-core/REMOVE_TARGET";function uo(t){return{type:vt,payload:{sourceId:t}}}function lo(t){return{type:mt,payload:{targetId:t}}}function co(t){return{type:yt,payload:{sourceId:t}}}function fo(t){return{type:Ue,payload:{targetId:t}}}function Ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ft(Object(r),!0).forEach(function(n){ho(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ho(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var go={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function po(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:go,e=arguments.length>1?arguments[1]:void 0,r=e.payload;switch(e.type){case $e:return z(z({},t),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case pt:return z(z({},t),{},{isSourcePublic:!0});case Le:return z(z({},t),{},{targetIds:r.targetIds});case Ue:return t.targetIds.indexOf(r.targetId)===-1?t:z(z({},t),{},{targetIds:xi(t.targetIds,r.targetId)});case Fe:return z(z({},t),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case He:return z(z({},t),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function vo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case vt:case mt:return t+1;case yt:case Ue:return t-1;default:return t}}var Ae=[],bt=[];Ae.__IS_NONE__=!0;bt.__IS_ALL__=!0;function mo(t,e){if(t===Ae)return!1;if(t===bt||typeof e>"u")return!0;var r=Ni(e,t);return r.length>0}function yo(){var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:break;case vt:case mt:case Ue:case yt:return Ae;case $e:case pt:case He:case Fe:default:return bt}var e=t.payload,r=e.targetIds,n=r===void 0?[]:r,i=e.prevTargetIds,o=i===void 0?[]:i,s=_i(n,o),u=s.length>0||!oo(n,o);if(!u)return Ae;var a=o[o.length-1],l=n[n.length-1];return a!==l&&(a&&s.push(a),l&&s.push(l)),s}function bo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t+1}function Ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ut(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(r),!0).forEach(function(n){So(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function So(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:yo(t.dirtyHandlerIds,{type:e.type,payload:Ut(Ut({},e.payload),{},{prevTargetIds:Ei(t,"dragOperation.targetIds",[])})}),dragOffset:ao(t.dragOffset,e),refCount:vo(t.refCount,e),dragOperation:po(t.dragOperation,e),stateId:bo(t.stateId)}}function Io(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Fr(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Do(t){var e=t.clientOffset,r=t.initialClientOffset,n=t.initialSourceClientOffset;return!e||!r||!n?null:Fr(Io(e,n),r)}function wo(t){var e=t.clientOffset,r=t.initialClientOffset;return!e||!r?null:Fr(e,r)}function To(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Co(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Eo(t,e,r){return e&&Co(t.prototype,e),t}function zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xo=function(){function t(e,r){To(this,t),zt(this,"store",void 0),zt(this,"registry",void 0),this.store=e,this.registry=r}return Eo(t,[{key:"subscribeToStateChange",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},o=i.handlerIds;w(typeof r=="function","listener must be a function."),w(typeof o>"u"||Array.isArray(o),"handlerIds, when specified, must be an array of strings.");var s=this.store.getState().stateId,u=function(){var l=n.store.getState(),f=l.stateId;try{var y=f===s||f===s+1&&!mo(l.dirtyHandlerIds,o);y||r()}finally{s=f}};return this.store.subscribe(u)}},{key:"subscribeToOffsetChange",value:function(r){var n=this;w(typeof r=="function","listener must be a function.");var i=this.store.getState().dragOffset,o=function(){var u=n.store.getState().dragOffset;u!==i&&(i=u,r())};return this.store.subscribe(o)}},{key:"canDragSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r);return w(n,"Expected to find a valid source. sourceId=".concat(r)),this.isDragging()?!1:n.canDrag(this,r)}},{key:"canDropOnTarget",value:function(r){if(!r)return!1;var n=this.registry.getTarget(r);if(w(n,"Expected to find a valid target. targetId=".concat(r)),!this.isDragging()||this.didDrop())return!1;var i=this.registry.getTargetType(r),o=this.getItemType();return at(i,o)&&n.canDrop(this,r)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r,!0);if(w(n,"Expected to find a valid source. sourceId=".concat(r)),!this.isDragging()||!this.isSourcePublic())return!1;var i=this.registry.getSourceType(r),o=this.getItemType();return i!==o?!1:n.isDragging(this,r)}},{key:"isOverTarget",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!r)return!1;var i=n.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(r),s=this.getItemType();if(s&&!at(o,s))return!1;var u=this.getTargetIds();if(!u.length)return!1;var a=u.indexOf(r);return i?a===u.length-1:a>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return Do(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return wo(this.store.getState().dragOffset)}}]),t}(),_o=0;function No(){return _o++}function _e(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_e=function(r){return typeof r}:_e=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_e(t)}function Po(t){w(typeof t.canDrag=="function","Expected canDrag to be a function."),w(typeof t.beginDrag=="function","Expected beginDrag to be a function."),w(typeof t.endDrag=="function","Expected endDrag to be a function.")}function ko(t){w(typeof t.canDrop=="function","Expected canDrop to be a function."),w(typeof t.hover=="function","Expected hover to be a function."),w(typeof t.drop=="function","Expected beginDrag to be a function.")}function ut(t,e){if(e&&Array.isArray(t)){t.forEach(function(r){return ut(r,!1)});return}w(typeof t=="string"||_e(t)==="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}const Bt=typeof global<"u"?global:self,Hr=Bt.MutationObserver||Bt.WebKitMutationObserver;function Ur(t){return function(){const r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),t()}}}function Ro(t){let e=1;const r=new Hr(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const jo=typeof Hr=="function"?Ro:Ur;class Ao{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=jo(this.flush),this.requestErrorThrow=Ur(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Mo{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class $o{create(e){const r=this.freeTasks,n=r.length?r.pop():new Mo(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const zr=new Ao,Lo=new $o(zr.registerPendingError);function Fo(t){zr.enqueueTask(Lo.create(t))}function Ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zo(t,e,r){return e&&Uo(t.prototype,e),t}function oe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bo(t,e){return Ko(t)||qo(t,e)||Vo(t,e)||Wo()}function Wo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vo(t,e){if(t){if(typeof t=="string")return Wt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wt(t,e)}}function Wt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qo(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,u;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(a){o=!0,u=a}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw u}}return n}}function Ko(t){if(Array.isArray(t))return t}function Go(t){var e=No().toString();switch(t){case B.SOURCE:return"S".concat(e);case B.TARGET:return"T".concat(e);default:throw new Error("Unknown Handler Role: ".concat(t))}}function Vt(t){switch(t[0]){case"S":return B.SOURCE;case"T":return B.TARGET;default:w(!1,"Cannot parse handler ID: ".concat(t))}}function qt(t,e){var r=t.entries(),n=!1;do{var i=r.next(),o=i.done,s=Bo(i.value,2),u=s[1];if(u===e)return!0;n=!!o}while(!n);return!1}var Yo=function(){function t(e){Ho(this,t),oe(this,"types",new Map),oe(this,"dragSources",new Map),oe(this,"dropTargets",new Map),oe(this,"pinnedSourceId",null),oe(this,"pinnedSource",null),oe(this,"store",void 0),this.store=e}return zo(t,[{key:"addSource",value:function(r,n){ut(r),Po(n);var i=this.addHandler(B.SOURCE,r,n);return this.store.dispatch(uo(i)),i}},{key:"addTarget",value:function(r,n){ut(r,!0),ko(n);var i=this.addHandler(B.TARGET,r,n);return this.store.dispatch(lo(i)),i}},{key:"containsHandler",value:function(r){return qt(this.dragSources,r)||qt(this.dropTargets,r)}},{key:"getSource",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;w(this.isSourceId(r),"Expected a valid source ID.");var i=n&&r===this.pinnedSourceId,o=i?this.pinnedSource:this.dragSources.get(r);return o}},{key:"getTarget",value:function(r){return w(this.isTargetId(r),"Expected a valid target ID."),this.dropTargets.get(r)}},{key:"getSourceType",value:function(r){return w(this.isSourceId(r),"Expected a valid source ID."),this.types.get(r)}},{key:"getTargetType",value:function(r){return w(this.isTargetId(r),"Expected a valid target ID."),this.types.get(r)}},{key:"isSourceId",value:function(r){var n=Vt(r);return n===B.SOURCE}},{key:"isTargetId",value:function(r){var n=Vt(r);return n===B.TARGET}},{key:"removeSource",value:function(r){var n=this;w(this.getSource(r),"Expected an existing source."),this.store.dispatch(co(r)),Fo(function(){n.dragSources.delete(r),n.types.delete(r)})}},{key:"removeTarget",value:function(r){w(this.getTarget(r),"Expected an existing target."),this.store.dispatch(fo(r)),this.dropTargets.delete(r),this.types.delete(r)}},{key:"pinSource",value:function(r){var n=this.getSource(r);w(n,"Expected an existing source."),this.pinnedSourceId=r,this.pinnedSource=n}},{key:"unpinSource",value:function(){w(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(r,n,i){var o=Go(r);return this.types.set(o,n),r===B.SOURCE?this.dragSources.set(o,i):r===B.TARGET&&this.dropTargets.set(o,i),o}}]),t}();function Xo(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=Qo(n),o=new xo(i,new Yo(i)),s=new to(i,o),u=t(s,e,r);return s.receiveBackend(u),s}function Qo(t){var e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Lr(Oo,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}var Jo=["children"];function Zo(t,e){return ns(t)||rs(t,e)||ts(t,e)||es()}function es(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ts(t,e){if(t){if(typeof t=="string")return Kt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kt(t,e)}}function Kt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rs(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,u;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(a){o=!0,u=a}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw u}}return n}}function ns(t){if(Array.isArray(t))return t}function is(t,e){if(t==null)return{};var r=os(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function os(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Gt=0,Ne=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),ss=g.memo(function(e){var r=e.children,n=is(e,Jo),i=as(n),o=Zo(i,2),s=o[0],u=o[1];return g.useEffect(function(){if(u){var a=Br();return++Gt,function(){--Gt===0&&(a[Ne]=null)}}},[]),d.jsx(Mr.Provider,Object.assign({value:s},{children:r}),void 0)});function as(t){if("manager"in t){var e={dragDropManager:t.manager};return[e,!1]}var r=us(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[r,n]}function us(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Br(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=e;return i[Ne]||(i[Ne]={dragDropManager:Xo(t,e,r,n)}),i[Ne]}function Br(){return typeof global<"u"?global:window}function ls(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ds(t,e,r){return e&&cs(t.prototype,e),t}function Yt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ye=!1,Xe=!1,fs=function(){function t(e){ls(this,t),Yt(this,"internalMonitor",void 0),Yt(this,"sourceId",null),this.internalMonitor=e.getMonitor()}return ds(t,[{key:"receiveHandlerId",value:function(r){this.sourceId=r}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){w(!Ye,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ye=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ye=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;w(!Xe,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Xe=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Xe=!1}}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"isDraggingSource",value:function(r){return this.internalMonitor.isDraggingSource(r)}},{key:"isOverTarget",value:function(r,n){return this.internalMonitor.isOverTarget(r,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(r){return this.internalMonitor.subscribeToOffsetChange(r)}},{key:"canDragSource",value:function(r){return this.internalMonitor.canDragSource(r)}},{key:"canDropOnTarget",value:function(r){return this.internalMonitor.canDropOnTarget(r)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),t}();function hs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ps(t,e,r){return e&&gs(t.prototype,e),t}function Xt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qe=!1,vs=function(){function t(e){hs(this,t),Xt(this,"internalMonitor",void 0),Xt(this,"targetId",null),this.internalMonitor=e.getMonitor()}return ps(t,[{key:"receiveHandlerId",value:function(r){this.targetId=r}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;w(!Qe,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Qe=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Qe=!1}}},{key:"isOver",value:function(r){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,r):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),t}();function ms(t){if(typeof t.type!="string"){var e=t.type.displayName||t.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(e," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function ys(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!g.isValidElement(e)){var n=e;return t(n,r),n}var i=e;ms(i);var o=r?function(s){return t(s,r)}:t;return bs(i,o)}}function Wr(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{var i=ys(n);e[r]=function(){return i}}}),e}function Qt(t,e){typeof t=="function"?t(e):t.current=e}function bs(t,e){var r=t.ref;return w(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?g.cloneElement(t,{ref:function(i){Qt(r,i),Qt(e,i)}}):g.cloneElement(t,{ref:e})}function Pe(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pe=function(r){return typeof r}:Pe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pe(t)}function lt(t){return t!==null&&Pe(t)==="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ct(t,e,r,n){var i=void 0;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(e),a=0;a<o.length;a++){var l=o[a];if(!u(l))return!1;var f=t[l],y=e[l];if(i=void 0,i===!1||i===void 0&&f!==y)return!1}return!0}function Ss(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Os(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Is(t,e,r){return e&&Os(t.prototype,e),t}function $(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ds=function(){function t(e){var r=this;Ss(this,t),$(this,"hooks",Wr({dragSource:function(i,o){r.clearDragSource(),r.dragSourceOptions=o||null,lt(i)?r.dragSourceRef=i:r.dragSourceNode=i,r.reconnectDragSource()},dragPreview:function(i,o){r.clearDragPreview(),r.dragPreviewOptions=o||null,lt(i)?r.dragPreviewRef=i:r.dragPreviewNode=i,r.reconnectDragPreview()}})),$(this,"handlerId",null),$(this,"dragSourceRef",null),$(this,"dragSourceNode",void 0),$(this,"dragSourceOptionsInternal",null),$(this,"dragSourceUnsubscribe",void 0),$(this,"dragPreviewRef",null),$(this,"dragPreviewNode",void 0),$(this,"dragPreviewOptionsInternal",null),$(this,"dragPreviewUnsubscribe",void 0),$(this,"lastConnectedHandlerId",null),$(this,"lastConnectedDragSource",null),$(this,"lastConnectedDragSourceOptions",null),$(this,"lastConnectedDragPreview",null),$(this,"lastConnectedDragPreviewOptions",null),$(this,"backend",void 0),this.backend=e}return Is(t,[{key:"receiveHandlerId",value:function(r){this.handlerId!==r&&(this.handlerId=r,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(r){this.dragSourceOptionsInternal=r}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(r){this.dragPreviewOptionsInternal=r}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var r=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!r){this.lastConnectedDragSource=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=r,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,r,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var r=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!ct(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!ct(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),t}();function ws(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ts(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cs(t,e,r){return e&&Ts(t.prototype,e),t}function K(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Es=function(){function t(e){var r=this;ws(this,t),K(this,"hooks",Wr({dropTarget:function(i,o){r.clearDropTarget(),r.dropTargetOptions=o,lt(i)?r.dropTargetRef=i:r.dropTargetNode=i,r.reconnect()}})),K(this,"handlerId",null),K(this,"dropTargetRef",null),K(this,"dropTargetNode",void 0),K(this,"dropTargetOptionsInternal",null),K(this,"unsubscribeDropTarget",void 0),K(this,"lastConnectedHandlerId",null),K(this,"lastConnectedDropTarget",null),K(this,"lastConnectedDropTargetOptions",null),K(this,"backend",void 0),this.backend=e}return Cs(t,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var r=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();r&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(r){r!==this.handlerId&&(this.handlerId=r,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(r){this.dropTargetOptionsInternal=r}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!ct(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),t}();function xs(t,e,r){var n=r.getRegistry(),i=n.addTarget(t,e);return[i,function(){return n.removeTarget(i)}]}function _s(t,e,r){var n=r.getRegistry(),i=n.addSource(t,e);return[i,function(){return n.removeSource(i)}]}var Z=typeof window<"u"?g.useLayoutEffect:g.useEffect;function ke(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ke=function(r){return typeof r}:ke=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ke(t)}function Ns(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ks(t,e,r){return e&&Ps(t.prototype,e),t}function Je(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Rs=function(){function t(e,r,n){Ns(this,t),Je(this,"spec",void 0),Je(this,"monitor",void 0),Je(this,"connector",void 0),this.spec=e,this.monitor=r,this.connector=n}return ks(t,[{key:"beginDrag",value:function(){var r,n=this.spec,i=this.monitor,o=null;return ke(n.item)==="object"?o=n.item:typeof n.item=="function"?o=n.item(i):o={},(r=o)!==null&&r!==void 0?r:null}},{key:"canDrag",value:function(){var r=this.spec,n=this.monitor;return typeof r.canDrag=="boolean"?r.canDrag:typeof r.canDrag=="function"?r.canDrag(n):!0}},{key:"isDragging",value:function(r,n){var i=this.spec,o=this.monitor,s=i.isDragging;return s?s(o):n===r.getSourceId()}},{key:"endDrag",value:function(){var r=this.spec,n=this.monitor,i=this.connector,o=r.end;o&&o(n.getItem(),n),i.reconnect()}}]),t}();function js(t,e,r){var n=g.useMemo(function(){return new Rs(t,e,r)},[e,r]);return g.useEffect(function(){n.spec=t},[t]),n}function ee(){var t=g.useContext(Mr),e=t.dragDropManager;return w(e!=null,"Expected drag drop context"),e}function As(t){return g.useMemo(function(){var e=t.type;return w(e!=null,"spec.type must be defined"),e},[t])}function Ms(t,e){return Hs(t)||Fs(t,e)||Ls(t,e)||$s()}function $s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ls(t,e){if(t){if(typeof t=="string")return Jt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jt(t,e)}}function Jt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fs(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,u;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(a){o=!0,u=a}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw u}}return n}}function Hs(t){if(Array.isArray(t))return t}function Us(t,e,r){var n=ee(),i=js(t,e,r),o=As(t);Z(function(){if(o!=null){var u=_s(o,i,n),a=Ms(u,2),l=a[0],f=a[1];return e.receiveHandlerId(l),r.receiveHandlerId(l),f}},[n,e,r,i,o])}function zs(t){return qs(t)||Vs(t)||Ws(t)||Bs()}function Bs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ws(t,e){if(t){if(typeof t=="string")return dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(t,e)}}function Vs(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qs(t){if(Array.isArray(t))return dt(t)}function dt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vr(t,e){var r=zs(e||[]);return e==null&&typeof t!="function"&&r.push(t),g.useMemo(function(){return typeof t=="function"?t():t},r)}function Ks(){var t=ee();return g.useMemo(function(){return new fs(t)},[t])}function Gs(t,e){var r=ee(),n=g.useMemo(function(){return new Ds(r.getBackend())},[r]);return Z(function(){return n.dragSourceOptions=t||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,t]),Z(function(){return n.dragPreviewOptions=e||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,e]),n}var Ys=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r};const Xs=ln(Ys);function Qs(t,e){return ta(t)||ea(t,e)||Zs(t,e)||Js()}function Js(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zs(t,e){if(t){if(typeof t=="string")return Zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zt(t,e)}}function Zt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ea(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,u;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(a){o=!0,u=a}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw u}}return n}}function ta(t){if(Array.isArray(t))return t}function qr(t,e,r){var n=g.useState(function(){return e(t)}),i=Qs(n,2),o=i[0],s=i[1],u=g.useCallback(function(){var a=e(t);Xs(o,a)||(s(a),r&&r())},[o,t,r]);return Z(u),[o,u]}function ra(t,e){return sa(t)||oa(t,e)||ia(t,e)||na()}function na(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ia(t,e){if(t){if(typeof t=="string")return er(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(t,e)}}function er(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oa(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,u;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(a){o=!0,u=a}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw u}}return n}}function sa(t){if(Array.isArray(t))return t}function aa(t,e,r){var n=qr(t,e,r),i=ra(n,2),o=i[0],s=i[1];return Z(function(){var a=t.getHandlerId();if(a!=null)return t.subscribeToStateChange(s,{handlerIds:[a]})},[t,s]),o}function Kr(t,e,r){return aa(e,t||function(){return{}},function(){return r.reconnect()})}function ua(t){return g.useMemo(function(){return t.hooks.dragSource()},[t])}function la(t){return g.useMemo(function(){return t.hooks.dragPreview()},[t])}function ca(t,e){var r=Vr(t,e);w(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=Ks(),i=Gs(r.options,r.previewOptions);return Us(r,n,i),[Kr(r.collect,n,i),ua(i),la(i)]}function da(t){var e=t.accept;return g.useMemo(function(){return w(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]},[e])}function fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ga(t,e,r){return e&&ha(t.prototype,e),t}function tr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var pa=function(){function t(e,r){fa(this,t),tr(this,"spec",void 0),tr(this,"monitor",void 0),this.spec=e,this.monitor=r}return ga(t,[{key:"canDrop",value:function(){var r=this.spec,n=this.monitor;return r.canDrop?r.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var r=this.spec,n=this.monitor;r.hover&&r.hover(n.getItem(),n)}},{key:"drop",value:function(){var r=this.spec,n=this.monitor;if(r.drop)return r.drop(n.getItem(),n)}}]),t}();function va(t,e){var r=g.useMemo(function(){return new pa(t,e)},[e]);return g.useEffect(function(){r.spec=t},[t]),r}function ma(t,e){return Oa(t)||Sa(t,e)||ba(t,e)||ya()}function ya(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ba(t,e){if(t){if(typeof t=="string")return rr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rr(t,e)}}function rr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sa(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,u;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(a){o=!0,u=a}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw u}}return n}}function Oa(t){if(Array.isArray(t))return t}function Ia(t,e,r){var n=ee(),i=va(t,e),o=da(t);Z(function(){var u=xs(o,i,n),a=ma(u,2),l=a[0],f=a[1];return e.receiveHandlerId(l),r.receiveHandlerId(l),f},[n,e,i,r,o.map(function(s){return s.toString()}).join("|")])}function Da(){var t=ee();return g.useMemo(function(){return new vs(t)},[t])}function wa(t){var e=ee(),r=g.useMemo(function(){return new Es(e.getBackend())},[e]);return Z(function(){return r.dropTargetOptions=t||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[t]),r}function Ta(t){return g.useMemo(function(){return t.hooks.dropTarget()},[t])}function Gr(t,e){var r=Vr(t,e),n=Da(),i=wa(r.options);return Ia(r,n,i),[Kr(r.collect,n,i),Ta(i)]}function Ca(t,e){return Na(t)||_a(t,e)||xa(t,e)||Ea()}function Ea(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xa(t,e){if(t){if(typeof t=="string")return nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(t,e)}}function nr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _a(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,u;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(a){o=!0,u=a}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw u}}return n}}function Na(t){if(Array.isArray(t))return t}function Pa(t){var e=ee(),r=e.getMonitor(),n=qr(r,t),i=Ca(n,2),o=i[0],s=i[1];return g.useEffect(function(){return r.subscribeToOffsetChange(s)}),g.useEffect(function(){return r.subscribeToStateChange(s)}),o}function Yr(t){var e=null,r=function(){return e==null&&(e=t()),e};return r}function ka(t,e){return t.filter(function(r){return r!==e})}function Ra(t,e){var r=new Set,n=function(s){return r.add(s)};t.forEach(n),e.forEach(n);var i=[];return r.forEach(function(o){return i.push(o)}),i}function ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ma(t,e,r){return e&&Aa(t.prototype,e),t}function ir(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $a=function(){function t(e){ja(this,t),ir(this,"entered",[]),ir(this,"isNodeInDocument",void 0),this.isNodeInDocument=e}return Ma(t,[{key:"enter",value:function(r){var n=this,i=this.entered.length,o=function(u){return n.isNodeInDocument(u)&&(!u.contains||u.contains(r))};return this.entered=Ra(this.entered.filter(o),[r]),i===0&&this.entered.length>0}},{key:"leave",value:function(r){var n=this.entered.length;return this.entered=ka(this.entered.filter(this.isNodeInDocument),r),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),t}(),La=Yr(function(){return/firefox/i.test(navigator.userAgent)}),Xr=Yr(function(){return!!window.safari});function Fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ua(t,e,r){return e&&Ha(t.prototype,e),t}function fe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var or=function(){function t(e,r){Fa(this,t),fe(this,"xs",void 0),fe(this,"ys",void 0),fe(this,"c1s",void 0),fe(this,"c2s",void 0),fe(this,"c3s",void 0);for(var n=e.length,i=[],o=0;o<n;o++)i.push(o);i.sort(function(M,F){return e[M]<e[F]?-1:1});for(var s=[],u=[],a,l,f=0;f<n-1;f++)a=e[f+1]-e[f],l=r[f+1]-r[f],s.push(a),u.push(l/a);for(var y=[u[0]],O=0;O<s.length-1;O++){var S=u[O],I=u[O+1];if(S*I<=0)y.push(0);else{a=s[O];var c=s[O+1],h=a+c;y.push(3*h/((h+c)/S+(h+a)/I))}}y.push(u[u.length-1]);for(var m=[],p=[],b,C=0;C<y.length-1;C++){b=u[C];var T=y[C],_=1/s[C],P=T+y[C+1]-b-b;m.push((b-T-P)*_),p.push(P*_*_)}this.xs=e,this.ys=r,this.c1s=y,this.c2s=m,this.c3s=p}return Ua(t,[{key:"interpolate",value:function(r){var n=this.xs,i=this.ys,o=this.c1s,s=this.c2s,u=this.c3s,a=n.length-1;if(r===n[a])return i[a];for(var l=0,f=u.length-1,y;l<=f;){y=Math.floor(.5*(l+f));var O=n[y];if(O<r)l=y+1;else if(O>r)f=y-1;else return i[y]}a=Math.max(0,f);var S=r-n[a],I=S*S;return i[a]+o[a]*S+s[a]*I+u[a]*S*I}}]),t}(),za=1;function Qr(t){var e=t.nodeType===za?t:t.parentElement;if(!e)return null;var r=e.getBoundingClientRect(),n=r.top,i=r.left;return{x:i,y:n}}function De(t){return{x:t.clientX,y:t.clientY}}function Ba(t){var e;return t.nodeName==="IMG"&&(La()||!((e=document.documentElement)!==null&&e!==void 0&&e.contains(t)))}function Wa(t,e,r,n){var i=t?e.width:r,o=t?e.height:n;return Xr()&&t&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function Va(t,e,r,n,i){var o=Ba(e),s=o?t:e,u=Qr(s),a={x:r.x-u.x,y:r.y-u.y},l=t.offsetWidth,f=t.offsetHeight,y=n.anchorX,O=n.anchorY,S=Wa(o,e,l,f),I=S.dragPreviewWidth,c=S.dragPreviewHeight,h=function(){var P=new or([0,.5,1],[a.y,a.y/f*c,a.y+c-f]),M=P.interpolate(O);return Xr()&&o&&(M+=(window.devicePixelRatio-1)*c),M},m=function(){var P=new or([0,.5,1],[a.x,a.x/l*I,a.x+I-l]);return P.interpolate(y)},p=i.offsetX,b=i.offsetY,C=p===0||p,T=b===0||b;return{x:C?p:m(),y:T?b:h()}}var Jr="__NATIVE_FILE__",Zr="__NATIVE_URL__",en="__NATIVE_TEXT__",tn="__NATIVE_HTML__";const sr=Object.freeze(Object.defineProperty({__proto__:null,FILE:Jr,HTML:tn,TEXT:en,URL:Zr},Symbol.toStringTag,{value:"Module"}));function Ze(t,e,r){var n=e.reduce(function(i,o){return i||t.getData(o)},"");return n??r}var se;function we(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ft=(se={},we(se,Jr,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:["Files"]}),we(se,tn,{exposeProperties:{html:function(e,r){return Ze(e,r,"")},dataTransfer:function(e){return e}},matchesTypes:["Html","text/html"]}),we(se,Zr,{exposeProperties:{urls:function(e,r){return Ze(e,r,"").split(`
`)},dataTransfer:function(e){return e}},matchesTypes:["Url","text/uri-list"]}),we(se,en,{exposeProperties:{text:function(e,r){return Ze(e,r,"")},dataTransfer:function(e){return e}},matchesTypes:["Text","text/plain"]}),se);function qa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ka(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ga(t,e,r){return e&&Ka(t.prototype,e),t}function ar(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ya=function(){function t(e){qa(this,t),ar(this,"item",void 0),ar(this,"config",void 0),this.config=e,this.item={},this.initializeExposedProperties()}return Ga(t,[{key:"initializeExposedProperties",value:function(){var r=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(r.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function(r){var n=this;if(r){var i={};Object.keys(this.config.exposeProperties).forEach(function(o){i[o]={value:n.config.exposeProperties[o](r,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,i)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(r,n){return n===r.getSourceId()}},{key:"endDrag",value:function(){}}]),t}();function Xa(t,e){var r=new Ya(ft[t]);return r.loadDataTransfer(e),r}function et(t){if(!t)return null;var e=Array.prototype.slice.call(t.types||[]);return Object.keys(ft).filter(function(r){var n=ft[r].matchesTypes;return n.some(function(i){return e.indexOf(i)>-1})})[0]||null}function Qa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ja(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Za(t,e,r){return e&&Ja(t.prototype,e),t}function tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var eu=function(){function t(e,r){Qa(this,t),tt(this,"ownerDocument",null),tt(this,"globalContext",void 0),tt(this,"optionsArgs",void 0),this.globalContext=e,this.optionsArgs=r}return Za(t,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}},{key:"document",get:function(){var r;return(r=this.globalContext)!==null&&r!==void 0&&r.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var r;return((r=this.optionsArgs)===null||r===void 0?void 0:r.rootElement)||this.window}}]),t}();function ur(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(r),!0).forEach(function(n){x(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ru(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nu(t,e,r){return e&&ru(t.prototype,e),t}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var iu=function(){function t(e,r,n){var i=this;tu(this,t),x(this,"options",void 0),x(this,"actions",void 0),x(this,"monitor",void 0),x(this,"registry",void 0),x(this,"enterLeaveCounter",void 0),x(this,"sourcePreviewNodes",new Map),x(this,"sourcePreviewNodeOptions",new Map),x(this,"sourceNodes",new Map),x(this,"sourceNodeOptions",new Map),x(this,"dragStartSourceIds",null),x(this,"dropTargetIds",[]),x(this,"dragEnterTargetIds",[]),x(this,"currentNativeSource",null),x(this,"currentNativeHandle",null),x(this,"currentDragSourceNode",null),x(this,"altKeyPressed",!1),x(this,"mouseMoveTimeoutTimer",null),x(this,"asyncEndDragFrameId",null),x(this,"dragOverTargetIds",null),x(this,"lastClientOffset",null),x(this,"hoverRafId",null),x(this,"getSourceClientOffset",function(o){var s=i.sourceNodes.get(o);return s&&Qr(s)||null}),x(this,"endDragNativeItem",function(){i.isDraggingNativeItem()&&(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)}),x(this,"isNodeInDocument",function(o){return!!(o&&i.document&&i.document.body&&i.document.body.contains(o))}),x(this,"endDragIfSourceWasRemovedFromDOM",function(){var o=i.currentDragSourceNode;o==null||i.isNodeInDocument(o)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),x(this,"handleTopDragStartCapture",function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]}),x(this,"handleTopDragStart",function(o){if(!o.defaultPrevented){var s=i.dragStartSourceIds;i.dragStartSourceIds=null;var u=De(o);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:u});var a=o.dataTransfer,l=et(a);if(i.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){var f=i.monitor.getSourceId(),y=i.sourceNodes.get(f),O=i.sourcePreviewNodes.get(f)||y;if(O){var S=i.getCurrentSourcePreviewNodeOptions(),I=S.anchorX,c=S.anchorY,h=S.offsetX,m=S.offsetY,p={anchorX:I,anchorY:c},b={offsetX:h,offsetY:m},C=Va(y,O,u,p,b);a.setDragImage(O,C.x,C.y)}}try{a==null||a.setData("application/json",{})}catch{}i.setCurrentDragSourceNode(o.target);var T=i.getCurrentSourcePreviewNodeOptions(),_=T.captureDraggingState;_?i.actions.publishDragSource():setTimeout(function(){return i.actions.publishDragSource()},0)}else if(l)i.beginDragNativeItem(l);else{if(a&&!a.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}}}),x(this,"handleTopDragEndCapture",function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),x(this,"handleTopDragEnterCapture",function(o){i.dragEnterTargetIds=[];var s=i.enterLeaveCounter.enter(o.target);if(!(!s||i.monitor.isDragging())){var u=o.dataTransfer,a=et(u);a&&i.beginDragNativeItem(a,u)}}),x(this,"handleTopDragEnter",function(o){var s=i.dragEnterTargetIds;if(i.dragEnterTargetIds=[],!!i.monitor.isDragging()){i.altKeyPressed=o.altKey,s.length>0&&i.actions.hover(s,{clientOffset:De(o)});var u=s.some(function(a){return i.monitor.canDropOnTarget(a)});u&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect()))}}),x(this,"handleTopDragOverCapture",function(){i.dragOverTargetIds=[]}),x(this,"handleTopDragOver",function(o){var s=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}i.altKeyPressed=o.altKey,i.lastClientOffset=De(o),i.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(i.hoverRafId=requestAnimationFrame(function(){i.monitor.isDragging()&&i.actions.hover(s||[],{clientOffset:i.lastClientOffset}),i.hoverRafId=null}));var u=(s||[]).some(function(a){return i.monitor.canDropOnTarget(a)});u?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))}),x(this,"handleTopDragLeaveCapture",function(o){i.isDraggingNativeItem()&&o.preventDefault();var s=i.enterLeaveCounter.leave(o.target);s&&i.isDraggingNativeItem()&&setTimeout(function(){return i.endDragNativeItem()},0)}),x(this,"handleTopDropCapture",function(o){if(i.dropTargetIds=[],i.isDraggingNativeItem()){var s;o.preventDefault(),(s=i.currentNativeSource)===null||s===void 0||s.loadDataTransfer(o.dataTransfer)}else et(o.dataTransfer)&&o.preventDefault();i.enterLeaveCounter.reset()}),x(this,"handleTopDrop",function(o){var s=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(s,{clientOffset:De(o)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()}),x(this,"handleSelectStart",function(o){var s=o.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(o.preventDefault(),s.dragDrop()))}),this.options=new eu(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new $a(this.isNodeInDocument)}return nu(t,[{key:"profile",value:function(){var r,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((r=this.dragStartSourceIds)===null||r===void 0?void 0:r.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var r=this.rootElement;if(r!==void 0){if(r.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");r.__isReactDndBackendSetUp=!0,this.addEventListeners(r)}}},{key:"teardown",value:function(){var r=this.rootElement;if(r!==void 0&&(r.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(r,n,i){var o=this;return this.sourcePreviewNodeOptions.set(r,i),this.sourcePreviewNodes.set(r,n),function(){o.sourcePreviewNodes.delete(r),o.sourcePreviewNodeOptions.delete(r)}}},{key:"connectDragSource",value:function(r,n,i){var o=this;this.sourceNodes.set(r,n),this.sourceNodeOptions.set(r,i);var s=function(l){return o.handleDragStart(l,r)},u=function(l){return o.handleSelectStart(l)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",s),n.addEventListener("selectstart",u),function(){o.sourceNodes.delete(r),o.sourceNodeOptions.delete(r),n.removeEventListener("dragstart",s),n.removeEventListener("selectstart",u),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(r,n){var i=this,o=function(l){return i.handleDragEnter(l,r)},s=function(l){return i.handleDragOver(l,r)},u=function(l){return i.handleDrop(l,r)};return n.addEventListener("dragenter",o),n.addEventListener("dragover",s),n.addEventListener("drop",u),function(){n.removeEventListener("dragenter",o),n.removeEventListener("dragover",s),n.removeEventListener("drop",u)}}},{key:"addEventListeners",value:function(r){r.addEventListener&&(r.addEventListener("dragstart",this.handleTopDragStart),r.addEventListener("dragstart",this.handleTopDragStartCapture,!0),r.addEventListener("dragend",this.handleTopDragEndCapture,!0),r.addEventListener("dragenter",this.handleTopDragEnter),r.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.addEventListener("dragover",this.handleTopDragOver),r.addEventListener("dragover",this.handleTopDragOverCapture,!0),r.addEventListener("drop",this.handleTopDrop),r.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(r){r.removeEventListener&&(r.removeEventListener("dragstart",this.handleTopDragStart),r.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),r.removeEventListener("dragend",this.handleTopDragEndCapture,!0),r.removeEventListener("dragenter",this.handleTopDragEnter),r.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.removeEventListener("dragover",this.handleTopDragOver),r.removeEventListener("dragover",this.handleTopDragOverCapture,!0),r.removeEventListener("drop",this.handleTopDrop),r.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(r);return lr({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(r);return lr({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var r=this.monitor.getItemType();return Object.keys(sr).some(function(n){return sr[n]===r})}},{key:"beginDragNativeItem",value:function(r,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=Xa(r,n),this.currentNativeHandle=this.registry.addSource(r,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(r){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=r;var i=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var o;return(o=n.rootElement)===null||o===void 0?void 0:o.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},i)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var r;(r=this.window)===null||r===void 0||r.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(r,n){r.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(r,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(r,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(r,n){this.dropTargetIds.unshift(n)}}]),t}(),Te;function ou(){return Te||(Te=new Image,Te.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Te}var su=function(e,r,n){return new iu(e,r,n)};function au(t){const e=H(),r=e.selectedIds,[n,i,o]=ca(()=>({canDrag:()=>t.isDraggable,type:"NODE",item:()=>{const s=e.isSelected(t.id)?Array.from(r):[t.id];return e.dispatch(le.dragStart(t.id,s)),{id:t.id,dragIds:s}},end:()=>{e.hideCursor(),e.dispatch(le.dragEnd())}}),[r,t]);return g.useEffect(()=>{o(ou())},[o]),i}function uu(t,e){const r=t.getBoundingClientRect(),n=e.x-Math.round(r.x),i=e.y-Math.round(r.y),o=r.height,s=i<o/2,u=!s,a=o/4,l=i>a&&i<o-a;return{x:n,inTopHalf:s,inBottomHalf:u,inMiddle:l,atTop:!l&&s,atBottom:!l&&u}}function lu(t,e,r,n){return t?t.isInternal?n.atTop?[e,t]:n.inMiddle?[t,t]:[t,r]:n.inTopHalf?[e,t]:[t,r]:[e,null]}function Ce(t,e){return{parentId:t||null,index:e}}function ae(t,e){return{type:"line",index:t,level:e}}function cu(t){return{type:"highlight",id:t}}function rt(t,e){var r;let n=t;for(;n.parent&&n.level>e;)n=n.parent;const i=((r=n.parent)===null||r===void 0?void 0:r.id)||null,o=Cr(n)+1;return{parentId:i,index:o}}function rn(t){var e;const r=uu(t.element,t.offset),n=t.indent,i=Math.round(Math.max(0,r.x-n)/n),{node:o,nextNode:s,prevNode:u}=t,[a,l]=lu(o,u,s,r);if(o&&o.isInternal&&r.inMiddle)return{drop:Ce(o.id,null),cursor:cu(o.id)};if(!a)return{drop:Ce((e=l==null?void 0:l.parent)===null||e===void 0?void 0:e.id,0),cursor:ae(0,0)};if(Ir(a)){const f=Ee(i,(l==null?void 0:l.level)||0,a.level);return{drop:rt(a,f),cursor:ae(a.rowIndex+1,f)}}if(Dr(a)){const f=Ee(i,(l==null?void 0:l.level)||0,a.level);return{drop:rt(a,f),cursor:ae(a.rowIndex+1,f)}}if(wr(a)){const f=Ee(i,0,a.level+1);return f>a.level?{drop:Ce(a.id,0),cursor:ae(a.rowIndex+1,f)}:{drop:rt(a,f),cursor:ae(a.rowIndex+1,f)}}return{drop:Ce(a==null?void 0:a.id,0),cursor:ae(a.rowIndex+1,a.level+1)}}function du(t,e){const r=H(),[n,i]=Gr(()=>({accept:"NODE",canDrop:()=>r.canDrop(),hover:(o,s)=>{const u=s.getClientOffset();if(!t.current||!u)return;const{cursor:a,drop:l}=rn({element:t.current,offset:u,indent:r.indent,node:e,prevNode:e.prev,nextNode:e.next});l&&r.dispatch(le.hovering(l.parentId,l.index)),s.canDrop()?a&&r.showCursor(a):r.hideCursor()},drop:(o,s)=>{if(!s.canDrop())return null;let{parentId:u,index:a,dragIds:l}=r.state.dnd;Pr(r.props.onMove,{dragIds:l,parentId:u===pe?null:u,index:a===null?0:a,dragNodes:r.dragNodes,parentNode:r.get(u)}),r.open(u)}}),[e,t.current,r.props]);return i}function fu(t){const e=H(),r=e.at(t);if(!r)throw new Error(`Could not find node for index: ${t}`);return g.useMemo(()=>{const n=r.clone();return e.visibleNodes[t]=n,n},[...Object.values(r.state),r])}const hu=pr.memo(function({index:e,style:r}){Or(),$n();const n=H(),i=fu(e),o=g.useRef(null),s=au(i),u=du(o,i),a=g.useCallback(c=>{o.current=c,u(c)},[u]),l=n.indent*i.level,f=g.useMemo(()=>({paddingLeft:l}),[l]),y=g.useMemo(()=>{var c,h;return Object.assign(Object.assign({},r),{top:parseFloat(r.top)+((h=(c=n.props.padding)!==null&&c!==void 0?c:n.props.paddingTop)!==null&&h!==void 0?h:0)})},[r,n.props.padding,n.props.paddingTop]),O={role:"treeitem","aria-level":i.level+1,"aria-selected":i.isSelected,"aria-expanded":i.isOpen,style:y,tabIndex:-1,className:n.props.rowClassName};g.useEffect(()=>{var c;!i.isEditing&&i.isFocused&&((c=o.current)===null||c===void 0||c.focus({preventScroll:!0}))},[i.isEditing,i.isFocused,o.current]);const S=n.renderNode,I=n.renderRow;return d.jsx(I,{node:i,innerRef:a,attrs:O,children:d.jsx(S,{node:i,tree:n,style:f,dragHandle:s})})});let nt="",cr=null;function nn(){Or();const t=H();return d.jsx("div",{role:"tree",style:{height:t.height,width:t.width,minHeight:0,minWidth:0},onContextMenu:t.props.onContextMenu,onClick:t.props.onClick,tabIndex:0,onFocus:e=>{e.currentTarget.contains(e.relatedTarget)||t.onFocus()},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||t.onBlur()},onKeyDown:e=>{var r;if(t.isEditing)return;if(e.key==="Backspace"){if(!t.props.onDelete)return;const i=Array.from(t.selectedIds);if(i.length>1){let o=t.mostRecentNode;for(;o&&o.isSelected;)o=o.nextSibling;o||(o=t.lastNode),t.focus(o,{scroll:!1}),t.delete(Array.from(i))}else{const o=t.focusedNode;if(o){const s=o.nextSibling,u=o.parent;t.focus(s||u,{scroll:!1}),t.delete(o)}}return}if(e.key==="Tab"&&!e.shiftKey){e.preventDefault(),Er(e.currentTarget);return}if(e.key==="Tab"&&e.shiftKey){e.preventDefault(),xr(e.currentTarget);return}if(e.key==="ArrowDown"){e.preventDefault();const i=t.nextNode;if(e.metaKey){t.select(t.focusedNode),t.activate(t.focusedNode);return}else if(!e.shiftKey||t.props.disableMultiSelection){t.focus(i);return}else{if(!i)return;const o=t.focusedNode;o?o.isSelected?t.selectContiguous(i):t.selectMulti(i):t.focus(t.firstNode);return}}if(e.key==="ArrowUp"){e.preventDefault();const i=t.prevNode;if(!e.shiftKey||t.props.disableMultiSelection){t.focus(i);return}else{if(!i)return;const o=t.focusedNode;o?o.isSelected?t.selectContiguous(i):t.selectMulti(i):t.focus(t.lastNode);return}}if(e.key==="ArrowRight"){const i=t.focusedNode;if(!i)return;i.isInternal&&i.isOpen?t.focus(t.nextNode):i.isInternal&&t.open(i.id);return}if(e.key==="ArrowLeft"){const i=t.focusedNode;if(!i||i.isRoot)return;i.isInternal&&i.isOpen?t.close(i.id):!((r=i.parent)===null||r===void 0)&&r.isRoot||t.focus(i.parent);return}if(e.key==="a"&&e.metaKey&&!t.props.disableMultiSelection){e.preventDefault(),t.selectAll();return}if(e.key==="a"&&!e.metaKey&&t.props.onCreate){t.createLeaf();return}if(e.key==="A"&&!e.metaKey){if(!t.props.onCreate)return;t.createInternal();return}if(e.key==="Home"){e.preventDefault(),t.focus(t.firstNode);return}if(e.key==="End"){e.preventDefault(),t.focus(t.lastNode);return}if(e.key==="Enter"){const i=t.focusedNode;if(!i||!i.isEditable||!t.props.onRename)return;setTimeout(()=>{i&&t.edit(i)});return}if(e.key===" "){e.preventDefault();const i=t.focusedNode;if(!i)return;i.isLeaf?(i.select(),i.activate()):i.toggle();return}if(e.key==="*"){const i=t.focusedNode;if(!i)return;t.openSiblings(i);return}if(e.key==="PageUp"){e.preventDefault(),t.pageUp();return}e.key==="PageDown"&&(e.preventDefault(),t.pageDown()),clearTimeout(cr),nt+=e.key,cr=setTimeout(()=>{nt=""},600);const n=t.visibleNodes.find(i=>{const o=i.data.name;return typeof o=="string"?o.toLowerCase().startsWith(nt):!1});n&&t.focus(n.id)},children:d.jsx(Si,{className:t.props.className,outerRef:t.listEl,itemCount:t.visibleNodes.length,height:t.height,width:t.width,itemSize:t.rowHeight,overscanCount:t.overscanCount,itemKey:e=>{var r;return((r=t.visibleNodes[e])===null||r===void 0?void 0:r.id)||e},outerElementType:Di,innerElementType:Ci,onScroll:t.props.onScroll,onItemsRendered:t.onItemsRendered.bind(t),ref:t.list,children:hu})})}function dr(t){return t.isFiltered?pu(t.root,t.isMatch.bind(t)):gu(t.root)}function gu(t){const e=[];function r(n){var i;n.level>=0&&e.push(n),n.isOpen&&((i=n.children)===null||i===void 0||i.forEach(r))}return r(t),e.forEach(on),e}function pu(t,e){const r={},n=[];function i(s){if(!s.isRoot&&e(s)){r[s.id]=!0;let a=s.parent;for(;a;)r[a.id]=!0,a=a.parent}if(s.children)for(let a of s.children)i(a)}function o(s){var u;s.level>=0&&r[s.id]&&n.push(s),s.isOpen&&((u=s.children)===null||u===void 0||u.forEach(o))}return i(t),o(t),n.forEach(on),n}function on(t,e){t.rowIndex=e}const fr=t=>t.reduce((e,r,n)=>(e[r.id]=n,e),{});var it=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(f){try{l(n.next(f))}catch(y){s(y)}}function a(f){try{l(n.throw(f))}catch(y){s(y)}}function l(f){f.done?o(f.value):i(f.value).then(u,a)}l((n=n.apply(t,e||[])).next())})};const{safeRun:A,identify:G,identifyNull:V}=Bn;class ge{constructor(e,r,n,i){this.store=e,this.props=r,this.list=n,this.listEl=i,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=wt(this),this.visibleNodes=dr(this),this.idToIndex=fr(this.visibleNodes)}update(e){this.props=e,this.root=wt(this),this.visibleNodes=dr(this),this.idToIndex=fr(this.visibleNodes)}dispatch(e){return this.store.dispatch(e)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){var e;return(e=this.props.width)!==null&&e!==void 0?e:300}get height(){var e;return(e=this.props.height)!==null&&e!==void 0?e:500}get indent(){var e;return(e=this.props.indent)!==null&&e!==void 0?e:24}get rowHeight(){var e;return(e=this.props.rowHeight)!==null&&e!==void 0?e:24}get overscanCount(){var e;return(e=this.props.overscanCount)!==null&&e!==void 0?e:1}get searchTerm(){return(this.props.searchTerm||"").trim()}get matchFn(){var e;const r=(e=this.props.searchMatch)!==null&&e!==void 0?e:(n,i)=>JSON.stringify(Object.values(n.data)).toLocaleLowerCase().includes(i.toLocaleLowerCase());return n=>r(n,this.searchTerm)}accessChildren(e){var r;const n=this.props.childrenAccessor||"children";return(r=he(e,n))!==null&&r!==void 0?r:null}accessId(e){const r=this.props.idAccessor||"id",n=he(e,r);if(!n)throw new Error("Data must contain an 'id' property or props.idAccessor must return a string");return n}get firstNode(){var e;return(e=this.visibleNodes[0])!==null&&e!==void 0?e:null}get lastNode(){var e;return(e=this.visibleNodes[this.visibleNodes.length-1])!==null&&e!==void 0?e:null}get focusedNode(){var e;return(e=this.get(this.state.nodes.focus.id))!==null&&e!==void 0?e:null}get mostRecentNode(){var e;return(e=this.get(this.state.nodes.selection.mostRecent))!==null&&e!==void 0?e:null}get nextNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e+1)}get prevNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e-1)}get(e){return e&&e in this.idToIndex&&this.visibleNodes[this.idToIndex[e]]||null}at(e){return this.visibleNodes[e]||null}nodesBetween(e,r){var n;if(e===null||r===null)return[];const i=(n=this.indexOf(e))!==null&&n!==void 0?n:0,o=this.indexOf(r);if(o===null)return[];const s=Math.min(i,o),u=Math.max(i,o);return this.visibleNodes.slice(s,u+1)}indexOf(e){const r=Nr(e);return r?this.idToIndex[r]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:"internal"})}createLeaf(){return this.create({type:"leaf"})}create(){return it(this,arguments,void 0,function*(e={}){var r,n;const i=e.parentId===void 0?jr(this):e.parentId,o=(r=e.index)!==null&&r!==void 0?r:Rr(this),s=(n=e.type)!==null&&n!==void 0?n:"leaf",u=yield A(this.props.onCreate,{type:s,parentId:i,index:o,parentNode:this.get(i)});u&&(this.focus(u),setTimeout(()=>{this.edit(u).then(()=>{this.select(u),this.activate(u)})}))})}delete(e){return it(this,void 0,void 0,function*(){if(!e)return;const n=(Array.isArray(e)?e:[e]).map(G),i=n.map(o=>this.get(o)).filter(o=>!!o);yield A(this.props.onDelete,{nodes:i,ids:n})})}edit(e){const r=G(e);return this.resolveEdit({cancelled:!0}),this.scrollTo(r),this.dispatch(Ve(r)),new Promise(n=>{ge.editPromise=n})}submit(e,r){return it(this,void 0,void 0,function*(){if(!e)return;const n=G(e);yield A(this.props.onRename,{id:n,name:r,node:this.get(n)}),this.dispatch(Ve(null)),this.resolveEdit({cancelled:!1,value:r}),setTimeout(()=>this.onFocus())})}reset(){this.dispatch(Ve(null)),this.resolveEdit({cancelled:!0}),setTimeout(()=>this.onFocus())}activate(e){const r=this.get(V(e));r&&A(this.props.onActivate,r)}resolveEdit(e){const r=ge.editPromise;r&&r(e),ge.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let e=[];for(let r of Array.from(this.selectedIds)){const n=this.get(r);n&&e.push(n)}return e}focus(e,r={}){e&&(this.props.selectionFollowsFocus?this.select(e):(this.dispatch(ne(G(e))),r.scroll!==!1&&this.scrollTo(e),this.focusedNode&&A(this.props.onFocus,this.focusedNode)))}pageUp(){var e,r;const n=this.visibleStartIndex,o=this.visibleStopIndex-n;let s=(r=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&&r!==void 0?r:0;s>n?s=n:s=Math.max(n-o,0),this.focus(this.at(s))}pageDown(){var e,r;const n=this.visibleStartIndex,i=this.visibleStopIndex,o=i-n;let s=(r=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&&r!==void 0?r:0;s<i?s=i:s=Math.min(s+o,this.visibleNodes.length-1),this.focus(this.at(s))}select(e,r={}){if(!e)return;const n=r.focus!==!1,i=G(e);n&&this.dispatch(ne(i)),this.dispatch(W.only(i)),this.dispatch(W.anchor(i)),this.dispatch(W.mostRecent(i)),this.scrollTo(i,r.align),this.focusedNode&&n&&A(this.props.onFocus,this.focusedNode),A(this.props.onSelect,this.selectedNodes)}deselect(e){if(!e)return;const r=G(e);this.dispatch(W.remove(r)),A(this.props.onSelect,this.selectedNodes)}selectMulti(e){const r=this.get(V(e));r&&(this.dispatch(ne(r.id)),this.dispatch(W.add(r.id)),this.dispatch(W.anchor(r.id)),this.dispatch(W.mostRecent(r.id)),this.scrollTo(r),this.focusedNode&&A(this.props.onFocus,this.focusedNode),A(this.props.onSelect,this.selectedNodes))}selectContiguous(e){if(!e)return;const r=G(e),{anchor:n,mostRecent:i}=this.state.nodes.selection;this.dispatch(ne(r)),this.dispatch(W.remove(this.nodesBetween(n,i))),this.dispatch(W.add(this.nodesBetween(n,V(r)))),this.dispatch(W.mostRecent(r)),this.scrollTo(r),this.focusedNode&&A(this.props.onFocus,this.focusedNode),A(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),A(this.props.onSelect,this.selectedNodes)}selectAll(){var e;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(ne((e=this.lastNode)===null||e===void 0?void 0:e.id)),this.focusedNode&&A(this.props.onFocus,this.focusedNode),A(this.props.onSelect,this.selectedNodes)}setSelection(e){var r;const n=new Set((r=e.ids)===null||r===void 0?void 0:r.map(G)),i=V(e.anchor),o=V(e.mostRecent);this.dispatch(W.set({ids:n,anchor:i,mostRecent:o})),A(this.props.onSelect,this.selectedNodes)}get cursorParentId(){const{cursor:e}=this.state.dnd;switch(e.type){case"highlight":return e.id;default:return null}}get cursorOverFolder(){return this.state.dnd.cursor.type==="highlight"}get dragNodes(){return this.state.dnd.dragIds.map(e=>this.get(e)).filter(e=>!!e)}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){var e;if(this.isFiltered)return!1;const r=(e=this.get(this.state.dnd.parentId))!==null&&e!==void 0?e:this.root,n=this.dragNodes,i=this.props.disableDrop;for(const o of n)if(!o||!r||o.isInternal&&Tr(r,o))return!1;return typeof i=="function"?!i({parentNode:r,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):typeof i=="string"?!r.data[i]:typeof i=="boolean"?!i:!0}hideCursor(){this.dispatch(le.cursor({type:"none"}))}showCursor(e){this.dispatch(le.cursor(e))}open(e){const r=V(e);r&&(this.isOpen(r)||(this.dispatch(st.open(r,this.isFiltered)),A(this.props.onToggle,r)))}close(e){const r=V(e);r&&this.isOpen(r)&&(this.dispatch(st.close(r,this.isFiltered)),A(this.props.onToggle,r))}toggle(e){const r=V(e);if(r)return this.isOpen(r)?this.close(r):this.open(r)}openParents(e){const r=V(e);if(!r)return;const n=ht(this.root,r);let i=n==null?void 0:n.parent;for(;i;)this.open(i.id),i=i.parent}openSiblings(e){const r=e.parent;if(!r)this.toggle(e.id);else if(r.children){const n=e.isOpen;for(let i of r.children)i.isInternal&&(n?this.close(i.id):this.open(i.id));this.scrollTo(this.focusedNode)}}openAll(){Re(this.root,e=>{e.isInternal&&e.open()})}closeAll(){Re(this.root,e=>{e.isInternal&&e.close()})}scrollTo(e,r="smart"){if(!e)return;const n=G(e);return this.openParents(n),kr(()=>n in this.idToIndex).then(()=>{var i;const o=this.idToIndex[n];o!==void 0&&((i=this.list.current)===null||i===void 0||i.scrollToItem(o,r))}).catch(()=>{})}get isEditing(){return this.state.nodes.edit.id!==null}get isFiltered(){var e;return!!(!((e=this.props.searchTerm)===null||e===void 0)&&e.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return this.state.nodes.selection.ids.size===0}get hasOneSelection(){return this.state.nodes.selection.ids.size===1}get hasMultipleSelections(){return this.state.nodes.selection.ids.size>1}isSelected(e){return e?this.state.nodes.selection.ids.has(e):!1}isOpen(e){var r,n,i;if(!e)return!1;if(e===pe)return!0;const o=(r=this.props.openByDefault)!==null&&r!==void 0?r:!0;return this.isFiltered?(n=this.state.nodes.open.filtered[e])!==null&&n!==void 0?n:!0:(i=this.state.nodes.open.unfiltered[e])!==null&&i!==void 0?i:o}isEditable(e){const r=this.props.disableEdit||(()=>!1);return!he(e,r)}isDraggable(e){const r=this.props.disableDrag||(()=>!1);return!he(e,r)}isDragging(e){const r=V(e);return r?this.state.nodes.drag.id===r:!1}isFocused(e){return this.hasFocus&&this.state.nodes.focus.id===e}isMatch(e){return this.matchFn(e)}willReceiveDrop(e){const r=V(e);if(!r)return!1;const{destinationParentId:n,destinationIndex:i}=this.state.nodes.drag;return r===n&&i===null}onFocus(){const e=this.focusedNode||this.firstNode;e&&this.dispatch(ne(e.id))}onBlur(){this.dispatch(Zn())}onItemsRendered(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleStopIndex=e.visibleStopIndex}get renderContainer(){return this.props.renderContainer||nn}get renderRow(){return this.props.renderRow||Gn}get renderNode(){return this.props.children||Yn}get renderDragPreview(){return this.props.renderDragPreview||Ar}get renderCursor(){return this.props.renderCursor||Kn}}function L(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var vu=typeof Symbol=="function"&&Symbol.observable||"@@observable",hr=vu,ot=()=>Math.random().toString(36).substring(7).split("").join("."),mu={INIT:`@@redux/INIT${ot()}`,REPLACE:`@@redux/REPLACE${ot()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ot()}`},Me=mu;function yu(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function sn(t,e,r){if(typeof t!="function")throw new Error(L(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(L(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(L(1));return r(sn)(t,e)}let n=t,i=e,o=new Map,s=o,u=0,a=!1;function l(){s===o&&(s=new Map,o.forEach((h,m)=>{s.set(m,h)}))}function f(){if(a)throw new Error(L(3));return i}function y(h){if(typeof h!="function")throw new Error(L(4));if(a)throw new Error(L(5));let m=!0;l();const p=u++;return s.set(p,h),function(){if(m){if(a)throw new Error(L(6));m=!1,l(),s.delete(p),o=null}}}function O(h){if(!yu(h))throw new Error(L(7));if(typeof h.type>"u")throw new Error(L(8));if(typeof h.type!="string")throw new Error(L(17));if(a)throw new Error(L(9));try{a=!0,i=n(i,h)}finally{a=!1}return(o=s).forEach(p=>{p()}),h}function S(h){if(typeof h!="function")throw new Error(L(10));n=h,O({type:Me.REPLACE})}function I(){const h=y;return{subscribe(m){if(typeof m!="object"||m===null)throw new Error(L(11));function p(){const C=m;C.next&&C.next(f())}return p(),{unsubscribe:h(p)}},[hr](){return this}}}return O({type:Me.INIT}),{dispatch:O,subscribe:y,getState:f,replaceReducer:S,[hr]:I}}function bu(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:Me.INIT})>"u")throw new Error(L(12));if(typeof r(void 0,{type:Me.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(L(13))})}function gr(t){const e=Object.keys(t),r={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(r[s]=t[s])}const n=Object.keys(r);let i;try{bu(r)}catch(o){i=o}return function(s={},u){if(i)throw i;let a=!1;const l={};for(let f=0;f<n.length;f++){const y=n[f],O=r[y],S=s[y],I=O(S,u);if(typeof I>"u")throw u&&u.type,new Error(L(14));l[y]=I,a=a||I!==S}return a=a||n.length!==Object.keys(s).length,a?l:s}}function Su(t=ue().nodes.drag,e){switch(e.type){case"DND_DRAG_START":return Object.assign(Object.assign({},t),{id:e.id,selectedIds:e.dragIds});case"DND_DRAG_END":return Object.assign(Object.assign({},t),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case"DND_HOVERING":return e.parentId!==t.destinationParentId||e.index!=t.destinationIndex?Object.assign(Object.assign({},t),{destinationParentId:e.parentId,destinationIndex:e.index}):t;default:return t}}const Ou=gr({nodes:gr({focus:ei,edit:Jn,open:ti,selection:ri,drag:Su}),dnd:ni}),Iu=ue();function Du({treeProps:t,imperativeHandle:e,children:r}){const n=g.useRef(null),i=g.useRef(null),o=g.useRef(sn(Ou,ue(t))),s=Pn.useSyncExternalStore(o.current.subscribe,o.current.getState,()=>Iu),u=g.useMemo(()=>new ge(o.current,t,n,i),[]),a=g.useRef(0);return g.useMemo(()=>{a.current+=1,u.update(t)},[...Object.values(t),s.nodes.open]),g.useImperativeHandle(e,()=>u),g.useEffect(()=>{u.props.selection?u.select(u.props.selection,{focus:!1}):u.deselectAll()},[u.props.selection]),g.useEffect(()=>{u.props.searchTerm||o.current.dispatch(st.clear(!0))},[u.props.searchTerm]),d.jsx(mr.Provider,{value:u,children:d.jsx(Sr.Provider,{value:a.current,children:d.jsx(yr.Provider,{value:s.nodes,children:d.jsx(br.Provider,{value:s.dnd,children:d.jsx(ss,Object.assign({backend:su,options:{rootElement:u.props.dndRootElement||void 0}},t.dndManager&&{manager:t.dndManager},{children:r}))})})})})}function wu(){const t=H(),[,e]=Gr(()=>({accept:"NODE",canDrop:(r,n)=>n.isOver({shallow:!0})?t.canDrop():!1,hover:(r,n)=>{if(!n.isOver({shallow:!0}))return;const i=n.getClientOffset();if(!t.listEl.current||!i)return;const{cursor:o,drop:s}=rn({element:t.listEl.current,offset:i,indent:t.indent,node:null,prevNode:t.visibleNodes[t.visibleNodes.length-1],nextNode:null});s&&t.dispatch(le.hovering(s.parentId,s.index)),n.canDrop()?o&&t.showCursor(o):t.hideCursor()}}),[t]);e(t.listEl)}function Tu(t){return wu(),t.children}function Cu(){const e=H().props.renderContainer||nn;return d.jsx(d.Fragment,{children:d.jsx(e,{})})}function Eu(){const t=H(),{offset:e,mouse:r,item:n,isDragging:i}=Pa(s=>({offset:s.getSourceClientOffset(),mouse:s.getClientOffset(),item:s.getItem(),isDragging:s.isDragging()})),o=t.props.renderDragPreview||Ar;return d.jsx(o,{offset:e,mouse:r,id:(n==null?void 0:n.id)||null,dragIds:(n==null?void 0:n.dragIds)||[],isDragging:i})}class xu{constructor(e){this.root=_u(e)}get data(){var e,r;return(r=(e=this.root.children)===null||e===void 0?void 0:e.map(n=>n.data))!==null&&r!==void 0?r:[]}create(e){const r=e.parentId?this.find(e.parentId):this.root;if(!r)return null;r.addChild(e.data,e.index)}move(e){const r=this.find(e.id),n=e.parentId?this.find(e.parentId):this.root;!r||!n||(n.addChild(r.data,e.index),r.drop())}update(e){const r=this.find(e.id);r&&r.update(e.changes)}drop(e){const r=this.find(e.id);r&&r.drop()}find(e,r=this.root){if(!r)return null;if(r.id===e)return r;if(r.children){for(let n of r.children){const i=this.find(e,n);if(i)return i}return null}return null}}function _u(t){const e=new an({id:"ROOT"},null);return e.children=t.map(r=>St(r,e)),e}function St(t,e){const r=new an(t,e);return t.children&&(r.children=t.children.map(n=>St(n,r))),r}class an{constructor(e,r){this.data=e,this.parent=r,this.id=e.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(e,r){var n,i;const o=St(e,this);this.children=(n=this.children)!==null&&n!==void 0?n:[],this.children.splice(r,0,o),this.data.children=(i=this.data.children)!==null&&i!==void 0?i:[],this.data.children.splice(r,0,e)}removeChild(e){var r,n;(r=this.children)===null||r===void 0||r.splice(e,1),(n=this.data.children)===null||n===void 0||n.splice(e,1)}update(e){if(this.hasParent()){const r=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),e),r),this.drop()}}drop(){this.hasParent()&&this.parent.removeChild(this.childIndex)}}let Nu=0;function Pu(t){const[e,r]=g.useState(t),n=g.useMemo(()=>new xu(e),[e]);return[e,{onMove:l=>{for(const f of l.dragIds)n.move({id:f,parentId:l.parentId,index:l.index});r(n.data)},onRename:({name:l,id:f})=>{n.update({id:f,changes:{name:l}}),r(n.data)},onCreate:({parentId:l,index:f,type:y})=>{const O={id:`simple-tree-id-${Nu++}`,name:""};return y==="internal"&&(O.children=[]),n.create({parentId:l,index:f,data:O}),r(n.data),O},onDelete:l=>{l.ids.forEach(f=>n.drop({id:f})),r(n.data)}}]}function ku(t){if(t.initialData&&t.data)throw new Error("React Arborist Tree => Provide either a data or initialData prop, but not both.");if(t.initialData&&(t.onCreate||t.onDelete||t.onMove||t.onRename))throw new Error(`React Arborist Tree => You passed the initialData prop along with a data handler.
Use the data prop if you want to provide your own handlers.`);if(t.initialData){const[e,r]=Pu(t.initialData);return Object.assign(Object.assign(Object.assign({},t),r),{data:e})}else return t}function Ru(t,e){const r=ku(t);return d.jsxs(Du,{treeProps:r,imperativeHandle:e,children:[d.jsx(Tu,{children:d.jsx(Cu,{})}),d.jsx(Eu,{})]})}const ju=g.forwardRef(Ru),Au=ce.object({name:ce.string().min(1,{message:"æ ‡ç­¾åç§°æ˜¯å¿…å¡«é¡¹"}).max(300,{message:"åç§°ä¸èƒ½è¶…è¿‡300ä¸ªå­—ç¬¦"}),remark:ce.string().optional(),puuid:ce.string().optional(),sortorder:ce.number().int().min(0,{message:"æŽ’åºå€¼å¿…é¡»æ˜¯éžè´Ÿæ•´æ•°"}).optional()}),Mu=({node:t,style:e})=>{var u,a;const r=t.isInternal,n=t.isOpen,i=((u=t.props)==null?void 0:u.isSelected)||!1,o=l=>{var f;t.handleClick(l),(f=t.props)!=null&&f.onNodeClick&&t.props.onNodeClick(t.data,"edit")},s=l=>{var f;l.stopPropagation(),(f=t.props)!=null&&f.onNodeClick&&t.props.onNodeClick(t.data,"add")};return d.jsxs("div",{style:e,className:`
        flex items-center gap-2 px-2 py-1 rounded cursor-pointer select-none group
        ${i?"bg-accent text-accent-foreground":"hover:bg-accent/50"}
        transition-all duration-200
      `,onClick:o,children:[r&&d.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-xs",children:n?"â–¼":"â–¶"}),d.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r?d.jsx(Mn,{className:"h-3 w-3 text-blue-500"}):d.jsx(In,{className:"h-3 w-3 text-green-500"})}),d.jsx(Tn,{checked:i,onCheckedChange:l=>{var f;(f=t.props)!=null&&f.onSelect&&t.props.onSelect(t.data.id,l)},onClick:l=>l.stopPropagation()}),d.jsx("span",{className:"flex-1 truncate text-sm",children:((a=t.data)==null?void 0:a.name)||"Unknown"}),d.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[d.jsx(X,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:s,title:"æ·»åŠ å­èŠ‚ç‚¹",children:d.jsx(vr,{className:"h-3 w-3"})}),d.jsx(X,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:l=>{var f;l.stopPropagation(),(f=t.props)!=null&&f.onEdit&&t.props.onEdit(t.data)},title:"ç¼–è¾‘èŠ‚ç‚¹",children:d.jsx(An,{className:"h-3 w-3"})})]})]})};function Vu({open:t,onOpenChange:e,selectedTags:r,onConfirm:n,flag:i="agent"}){const[o,s]=g.useState([]),[u,a]=g.useState(!1),[l,f]=g.useState(null),[y,O]=g.useState(!1),[S,I]=g.useState(new Set(r)),[c,h]=g.useState(null),m=g.useRef(null),p=cn({resolver:Dn(Au),defaultValues:{name:"",remark:"",puuid:"none",sortorder:0}}),b=g.useCallback(async()=>{a(!0);try{const{data:v}=await me.post("/sys/tags/tree",{flag:i}),D=k=>k.map(N=>({...N,children:N.children&&N.children.length>0?D(N.children):void 0})),E=D(v);return s(E),E}catch{return Q({title:"åŠ è½½å¤±è´¥",description:"æ— æ³•åŠ è½½æ ‡ç­¾æ•°æ®",variant:"destructive"}),[]}finally{a(!1)}},[i]),C=g.useCallback(async v=>{try{const D={...v,flag:i,puuid:v.puuid==="none"?void 0:v.puuid,sortorder:v.sortorder||0},E=await me.post("/sys/tags/create",D);return Q({title:"åˆ›å»ºæˆåŠŸ",description:"æ ‡ç­¾å·²åˆ›å»º"}),await b(),E.data}catch(D){throw Q({title:"åˆ›å»ºå¤±è´¥",description:"æ— æ³•åˆ›å»ºæ ‡ç­¾",variant:"destructive"}),D}},[i,b]),T=g.useCallback(async(v,D)=>{try{const E={...D,puuid:D.puuid==="none"?void 0:D.puuid,sortorder:D.sortorder||0},k=await me.post(`/sys/tags/update/${v}`,E);return Q({title:"æ›´æ–°æˆåŠŸ",description:"æ ‡ç­¾å·²æ›´æ–°"}),await b(),k.data}catch(E){throw Q({title:"æ›´æ–°å¤±è´¥",description:"æ— æ³•æ›´æ–°æ ‡ç­¾",variant:"destructive"}),E}},[b]),_=g.useCallback(async v=>{try{await me.post(`/sys/tags/delete/${v}`),Q({title:"åˆ é™¤æˆåŠŸ",description:"æ ‡ç­¾å·²åˆ é™¤"}),await b(),f(null),O(!1),h(null),p.reset({name:"",remark:"",puuid:"none",sortorder:0})}catch{Q({title:"åˆ é™¤å¤±è´¥",description:"æ— æ³•åˆ é™¤æ ‡ç­¾",variant:"destructive"})}},[p,b]),P=g.useCallback(async v=>{if(y&&l)await T(l.id,v);else{await C(v);const D=p.getValues("puuid");p.reset({name:"",remark:"",puuid:D,sortorder:0})}},[y,l,T,C,p]),M=g.useCallback(v=>{f(v),O(!0);let D=null,E="none";if(v.puuid&&v.puuid!=="none"&&v.puuid!==""){const k=(N,R)=>{for(const j of N){if(j.id===R)return j;if(j.children){const q=k(j.children,R);if(q)return q}}return null};D=k(o,v.puuid),E=v.puuid}h(D),p.reset({name:v.name,remark:v.remark||"",puuid:E,sortorder:v.sortorder||0})},[p,o]),F=g.useCallback((v,D)=>{if(D==="edit"){f(v),O(!0);let E=null,k="none";if(v.puuid&&v.puuid!=="none"&&v.puuid!==""){const N=(R,j)=>{for(const q of R){if(q.id===j)return q;if(q.children){const Y=N(q.children,j);if(Y)return Y}}return null};E=N(o,v.puuid),k=v.puuid}console.log("ç¼–è¾‘èŠ‚ç‚¹:",{nodeId:v.id,nodeName:v.name,puuid:v.puuid,puuidValue:k,parentNode:E==null?void 0:E.name}),h(E),p.reset({name:v.name,remark:v.remark||"",puuid:k,sortorder:v.sortorder||0})}else D==="add"&&(f(null),O(!1),h(v),p.reset({name:"",remark:"",puuid:v.id,sortorder:0}))},[p,o]),te=g.useCallback(()=>{f(null),O(!1),h(null),p.setValue("name",""),p.setValue("remark",""),p.setValue("puuid","none"),p.setValue("sortorder",0)},[p]),re=g.useCallback(()=>{const v=Array.from(S).map(D=>{const E=(k,N)=>{for(const R of k){if(R.id===N)return R.pname?`${R.pname}/${R.name}`:R.name;if(R.children){const j=E(R.children,N);if(j)return j}}return null};return E(o,D)}).filter(Boolean);n(v),e(!1)},[S,o,n,e]),ze=g.useCallback(()=>{e(!1),I(new Set(r)),f(null),O(!1),h(null),p.reset()},[e,r,p]);g.useEffect(()=>{t&&b()},[t,b]),g.useEffect(()=>{if(o.length>0&&r.length>0){const v=(E,k)=>{for(const N of E){if((N.pname?`${N.pname}/${N.name}`:N.name)===k)return N.id;if(N.children){const j=v(N.children,k);if(j)return j}}return null},D=r.map(E=>v(o,E)).filter(Boolean);I(new Set(D))}},[o,r]);const ve=g.useCallback((v,D)=>{const E=new Set(S);D?E.add(v):E.delete(v),I(E)},[S]),Be=g.useCallback(({node:v,style:D})=>d.jsx(Mu,{node:{...v,props:{onEdit:M,onSelect:ve,onNodeClick:F,isSelected:S.has(v.data.id)}},style:D}),[M,ve,F,S]),We=g.useCallback(()=>{const v=[{value:"none",label:"æ— çˆ¶èŠ‚ç‚¹ï¼ˆé¡¶çº§æ ‡ç­¾ï¼‰"}],D=(E,k=0)=>{E.forEach(N=>{if(y&&l&&N.id===l.id)return;const j=`${"ã€€".repeat(k)}${N.name}`;v.push({value:N.id,label:j}),N.children&&N.children.length>0&&D(N.children,k+1)})};return D(o),console.log("ç”Ÿæˆçš„çˆ¶èŠ‚ç‚¹é€‰é¡¹:",v),v},[o,y,l]);return d.jsx(dn,{open:t,onOpenChange:e,children:d.jsxs(fn,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[d.jsxs(hn,{children:[d.jsx(gn,{children:"é€‰æ‹©æ ‡ç­¾"}),d.jsx(pn,{})]}),d.jsxs("div",{className:"flex-1 flex gap-4 min-h-0",children:[d.jsxs("div",{className:"flex-1 flex flex-col border rounded-lg",children:[d.jsx("div",{className:"p-3 border-b bg-muted/50",children:d.jsx("div",{className:"flex items-center justify-between",children:d.jsx("h3",{className:"font-medium",children:"æ ‡ç­¾æ ‘"})})}),d.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:u?d.jsxs("div",{className:"flex items-center justify-center h-full",children:[d.jsx(vn,{className:"h-6 w-6 animate-spin"}),d.jsx("span",{className:"ml-2",children:"åŠ è½½ä¸­..."})]}):o.length>0?d.jsx("div",{className:"h-full w-full",style:{minHeight:"400px"},children:d.jsx(ju,{data:o,rowHeight:32,indent:24,overscanCount:10,ref:m,disableDrag:!0,disableMultiSelection:!1,selectionFollowsFocus:!1,children:Be})}):d.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"æš‚æ— æ ‡ç­¾æ•°æ®"})})]}),d.jsxs("div",{className:"w-80 flex flex-col border rounded-lg",children:[d.jsxs("div",{className:"p-3 border-b bg-muted/50 flex items-center justify-between",children:[d.jsx("h3",{className:"font-medium",children:y?"ç¼–è¾‘æ ‡ç­¾":c?"æ·»åŠ å­æ ‡ç­¾":"æ–°å»ºæ ‡ç­¾"}),d.jsx(X,{variant:"ghost",size:"sm",onClick:te,className:"h-8 w-8 p-0",title:"æ–°å»ºé¡¶çº§æ ‡ç­¾",children:d.jsx(vr,{className:"h-4 w-4"})})]}),d.jsx("div",{className:"flex-1 p-4 overflow-auto",children:d.jsx(mn,{...p,children:d.jsxs("form",{onSubmit:v=>{v.stopPropagation(),p.handleSubmit(P)(v)},className:"space-y-4",children:[d.jsx(ye,{control:p.control,name:"name",render:({field:v})=>d.jsxs(be,{children:[d.jsx(Se,{children:"æ ‡ç­¾åç§° *"}),d.jsx(Oe,{children:d.jsx(It,{placeholder:"è¯·è¾“å…¥æ ‡ç­¾åç§°",...v})}),d.jsx(Ie,{})]})}),d.jsx(ye,{control:p.control,name:"puuid",render:({field:v})=>(console.log("çˆ¶èŠ‚ç‚¹ä¸‹æ‹‰æ¡†å½“å‰å€¼:",v.value),d.jsxs(be,{children:[d.jsx(Se,{children:"çˆ¶èŠ‚ç‚¹"}),d.jsxs(Cn,{onValueChange:v.onChange,value:v.value||"none",children:[d.jsx(Oe,{children:d.jsx(En,{children:d.jsx(xn,{placeholder:"é€‰æ‹©çˆ¶èŠ‚ç‚¹"})})}),d.jsx(_n,{children:We().map(D=>d.jsx(Nn,{value:D.value,children:D.label},D.value))})]}),d.jsx(Ie,{})]}))}),d.jsx(ye,{control:p.control,name:"sortorder",render:({field:v})=>d.jsxs(be,{children:[d.jsx(Se,{children:"æŽ’åºå€¼"}),d.jsx(Oe,{children:d.jsx(It,{type:"number",min:"0",placeholder:"è¯·è¾“å…¥æŽ’åºå€¼ï¼ˆæ•°å­—è¶Šå°è¶Šé å‰ï¼‰",...v,onChange:D=>v.onChange(parseInt(D.target.value)||0),value:v.value||0})}),d.jsx(Ie,{})]})}),d.jsx(ye,{control:p.control,name:"remark",render:({field:v})=>d.jsxs(be,{className:"hidden",children:[d.jsx(Se,{children:"å¤‡æ³¨"}),d.jsx(Oe,{children:d.jsx(wn,{placeholder:"è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯",className:"resize-none",rows:2,...v})}),d.jsx(Ie,{})]})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(X,{type:"submit",className:"flex-1",onClick:v=>v.stopPropagation(),children:[d.jsx(jn,{className:"h-4 w-4 mr-2"}),y?"æ›´æ–°":"åˆ›å»º"]}),y&&l&&d.jsx(X,{type:"button",variant:"destructive",onClick:v=>{v.stopPropagation(),_(l.id)},children:d.jsx(yn,{className:"h-4 w-4"})})]})]})})})]})]}),d.jsxs("div",{className:"border-t pt-4 mt-4",children:[S.size>0&&d.jsxs("div",{className:"mb-4",children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:"å·²é€‰æ‹©çš„æ ‡ç­¾ï¼š"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(S).map(v=>{const D=(k,N)=>{for(const R of k){if(R.id===N)return R.pname?`${R.pname}/${R.name}`:R.name;if(R.children){const j=D(R.children,N);if(j)return j}}return null},E=D(o,v);return E?d.jsxs(bn,{variant:"secondary",className:"flex items-center gap-1",children:[E,d.jsx(X,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>{const k=new Set(S);k.delete(v),I(k)},children:d.jsx(Sn,{className:"h-3 w-3"})})]},v):null})})]}),d.jsxs(On,{children:[d.jsx(X,{variant:"outline",onClick:v=>{v.stopPropagation(),ze()},children:"å–æ¶ˆ"}),d.jsxs(X,{onClick:v=>{v.stopPropagation(),re()},children:["ç¡®è®¤é€‰æ‹© (",S.size,")"]})]})]})]})})}export{Vu as T};
