import{bY as v,bZ as b,b_ as R,b$ as p,c0 as x,r as f}from"./index-C_oIiI4O.js";var M=class extends v{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:b()},t)}getOptimisticResult(e){return e.behavior=b(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var g,l;const{state:s}=e,c=super.createResult(e,t),{isFetching:r,isRefetching:a,isError:n,isRefetchError:o}=c,i=(l=(g=s.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:l.direction,u=n&&i==="forward",h=r&&i==="forward",P=n&&i==="backward",d=r&&i==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:R(t,s.data),hasPreviousPage:p(t,s.data),isFetchNextPageError:u,isFetchingNextPage:h,isFetchPreviousPageError:P,isFetchingPreviousPage:d,isRefetchError:o&&!u&&!P,isRefetching:a&&!h&&!d}}};function O(e,t){return x(e,M)}function m({hasNextPage:e=!1,isFetchingNextPage:t=!1,fetchNextPage:s,threshold:c=200}){const r=f.useRef(null),a=f.useRef(null),n=f.useCallback(()=>{e&&!t&&s()},[e,t,s]);return f.useEffect(()=>{const o=a.current;if(o)return r.current&&r.current.disconnect(),r.current=new IntersectionObserver(i=>{const[u]=i;u.isIntersecting&&n()},{rootMargin:`${c}px`,threshold:.1}),r.current.observe(o),()=>{r.current&&r.current.disconnect()}},[n,c]),{loadMoreRef:a}}export{m as a,O as u};
